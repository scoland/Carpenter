!function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(6)},function(t,e,i){var s,n;/*!
	 * jQuery JavaScript Library v2.2.1
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2016-02-22T19:11Z
	 */
!function(e,i){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,function(i,o){function r(t){var e=!!t&&"length"in t&&t.length,i=lt.type(t);return"function"===i||lt.isWindow(t)?!1:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function a(t,e,i){if(lt.isFunction(e))return lt.grep(t,function(t,s){return!!e.call(t,s,t)!==i});if(e.nodeType)return lt.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(wt.test(e))return lt.filter(e,t,i);e=lt.filter(e,t)}return lt.grep(t,function(t){return st.call(e,t)>-1!==i})}function h(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function l(t){var e={};return lt.each(t.match(kt)||[],function(t,i){e[i]=!0}),e}function c(){K.removeEventListener("DOMContentLoaded",c),i.removeEventListener("load",c),lt.ready()}function u(){this.expando=lt.expando+u.uid++}function p(t,e,i){var s;if(void 0===i&&1===t.nodeType)if(s="data-"+e.replace(Ct,"-$&").toLowerCase(),i=t.getAttribute(s),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Ot.test(i)?lt.parseJSON(i):i}catch(n){}qt.set(t,e,i)}else i=void 0;return i}function d(t,e,i,s){var n,o=1,r=20,a=s?function(){return s.cur()}:function(){return lt.css(t,e,"")},h=a(),l=i&&i[3]||(lt.cssNumber[e]?"":"px"),c=(lt.cssNumber[e]||"px"!==l&&+h)&&Ft.exec(lt.css(t,e));if(c&&c[3]!==l){l=l||c[3],i=i||[],c=+h||1;do o=o||".5",c/=o,lt.style(t,e,c+l);while(o!==(o=a()/h)&&1!==o&&--r)}return i&&(c=+c||+h||0,n=i[1]?c+(i[1]+1)*i[2]:+i[2],s&&(s.unit=l,s.start=c,s.end=n)),n}function f(t,e){var i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&lt.nodeName(t,e)?lt.merge([t],i):i}function y(t,e){for(var i=0,s=t.length;s>i;i++)At.set(t[i],"globalEval",!e||At.get(e[i],"globalEval"))}function m(t,e,i,s,n){for(var o,r,a,h,l,c,u=e.createDocumentFragment(),p=[],d=0,m=t.length;m>d;d++)if(o=t[d],o||0===o)if("object"===lt.type(o))lt.merge(p,o.nodeType?[o]:o);else if(Bt.test(o)){for(r=r||u.appendChild(e.createElement("div")),a=(zt.exec(o)||["",""])[1].toLowerCase(),h=Nt[a]||Nt._default,r.innerHTML=h[1]+lt.htmlPrefilter(o)+h[2],c=h[0];c--;)r=r.lastChild;lt.merge(p,r.childNodes),r=u.firstChild,r.textContent=""}else p.push(e.createTextNode(o));for(u.textContent="",d=0;o=p[d++];)if(s&&lt.inArray(o,s)>-1)n&&n.push(o);else if(l=lt.contains(o.ownerDocument,o),r=f(u.appendChild(o),"script"),l&&y(r),i)for(c=0;o=r[c++];)It.test(o.type||"")&&i.push(o);return u}function v(){return!0}function g(){return!1}function w(){try{return K.activeElement}catch(t){}}function _(t,e,i,s,n,o){var r,a;if("object"==typeof e){"string"!=typeof i&&(s=s||i,i=void 0);for(a in e)_(t,a,i,s,e[a],o);return t}if(null==s&&null==n?(n=i,s=i=void 0):null==n&&("string"==typeof i?(n=s,s=void 0):(n=s,s=i,i=void 0)),n===!1)n=g;else if(!n)return t;return 1===o&&(r=n,n=function(t){return lt().off(t),r.apply(this,arguments)},n.guid=r.guid||(r.guid=lt.guid++)),t.each(function(){lt.event.add(this,e,n,s,i)})}function b(t,e){return lt.nodeName(t,"table")&&lt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function x(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function S(t){var e=Qt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function T(t,e){var i,s,n,o,r,a,h,l;if(1===e.nodeType){if(At.hasData(t)&&(o=At.access(t),r=At.set(e,o),l=o.events)){delete r.handle,r.events={};for(n in l)for(i=0,s=l[n].length;s>i;i++)lt.event.add(e,n,l[n][i])}qt.hasData(t)&&(a=qt.access(t),h=lt.extend({},a),qt.set(e,h))}}function k(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Dt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function P(t,e,i,s){e=et.apply([],e);var n,o,r,a,h,l,c=0,u=t.length,p=u-1,d=e[0],y=lt.isFunction(d);if(y||u>1&&"string"==typeof d&&!at.checkClone&&$t.test(d))return t.each(function(n){var o=t.eq(n);y&&(e[0]=d.call(this,n,o.html())),P(o,e,i,s)});if(u&&(n=m(e,t[0].ownerDocument,!1,t,s),o=n.firstChild,1===n.childNodes.length&&(n=o),o||s)){for(r=lt.map(f(n,"script"),x),a=r.length;u>c;c++)h=n,c!==p&&(h=lt.clone(h,!0,!0),a&&lt.merge(r,f(h,"script"))),i.call(t[c],h,c);if(a)for(l=r[r.length-1].ownerDocument,lt.map(r,S),c=0;a>c;c++)h=r[c],It.test(h.type||"")&&!At.access(h,"globalEval")&&lt.contains(l,h)&&(h.src?lt._evalUrl&&lt._evalUrl(h.src):lt.globalEval(h.textContent.replace(Xt,"")))}return t}function M(t,e,i){for(var s,n=e?lt.filter(e,t):t,o=0;null!=(s=n[o]);o++)i||1!==s.nodeType||lt.cleanData(f(s)),s.parentNode&&(i&&lt.contains(s.ownerDocument,s)&&y(f(s,"script")),s.parentNode.removeChild(s));return t}function E(t,e){var i=lt(e.createElement(t)).appendTo(e.body),s=lt.css(i[0],"display");return i.detach(),s}function A(t){var e=K,i=Jt[t];return i||(i=E(t,e),"none"!==i&&i||(Yt=(Yt||lt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Yt[0].contentDocument,e.write(),e.close(),i=E(t,e),Yt.detach()),Jt[t]=i),i}function q(t,e,i){var s,n,o,r,a=t.style;return i=i||te(t),r=i?i.getPropertyValue(e)||i[e]:void 0,""!==r&&void 0!==r||lt.contains(t.ownerDocument,t)||(r=lt.style(t,e)),i&&!at.pixelMarginRight()&&Kt.test(r)&&Zt.test(e)&&(s=a.width,n=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=s,a.minWidth=n,a.maxWidth=o),void 0!==r?r+"":r}function O(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function C(t){if(t in ae)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=re.length;i--;)if(t=re[i]+e,t in ae)return t}function R(t,e,i){var s=Ft.exec(e);return s?Math.max(0,s[2]-(i||0))+(s[3]||"px"):e}function F(t,e,i,s,n){for(var o=i===(s?"border":"content")?4:"width"===e?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=lt.css(t,i+jt[o],!0,n)),s?("content"===i&&(r-=lt.css(t,"padding"+jt[o],!0,n)),"margin"!==i&&(r-=lt.css(t,"border"+jt[o]+"Width",!0,n))):(r+=lt.css(t,"padding"+jt[o],!0,n),"padding"!==i&&(r+=lt.css(t,"border"+jt[o]+"Width",!0,n)));return r}function j(t,e,s){var n=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=te(t),a="border-box"===lt.css(t,"boxSizing",!1,r);if(K.msFullscreenElement&&i.top!==i&&t.getClientRects().length&&(o=Math.round(100*t.getBoundingClientRect()[e])),0>=o||null==o){if(o=q(t,e,r),(0>o||null==o)&&(o=t.style[e]),Kt.test(o))return o;n=a&&(at.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+F(t,e,s||(a?"border":"content"),n,r)+"px"}function L(t,e){for(var i,s,n,o=[],r=0,a=t.length;a>r;r++)s=t[r],s.style&&(o[r]=At.get(s,"olddisplay"),i=s.style.display,e?(o[r]||"none"!==i||(s.style.display=""),""===s.style.display&&Lt(s)&&(o[r]=At.access(s,"olddisplay",A(s.nodeName)))):(n=Lt(s),"none"===i&&n||At.set(s,"olddisplay",n?i:lt.css(s,"display"))));for(r=0;a>r;r++)s=t[r],s.style&&(e&&"none"!==s.style.display&&""!==s.style.display||(s.style.display=e?o[r]||"":"none"));return t}function D(t,e,i,s,n){return new D.prototype.init(t,e,i,s,n)}function z(){return i.setTimeout(function(){he=void 0}),he=lt.now()}function I(t,e){var i,s=0,n={height:t};for(e=e?1:0;4>s;s+=2-e)i=jt[s],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function N(t,e,i){for(var s,n=(U.tweeners[e]||[]).concat(U.tweeners["*"]),o=0,r=n.length;r>o;o++)if(s=n[o].call(i,e,t))return s}function B(t,e,i){var s,n,o,r,a,h,l,c,u=this,p={},d=t.style,f=t.nodeType&&Lt(t),y=At.get(t,"fxshow");i.queue||(a=lt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,h=a.empty.fire,a.empty.fire=function(){a.unqueued||h()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,lt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],l=lt.css(t,"display"),c="none"===l?At.get(t,"olddisplay")||A(t.nodeName):l,"inline"===c&&"none"===lt.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",u.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(s in e)if(n=e[s],ce.exec(n)){if(delete e[s],o=o||"toggle"===n,n===(f?"hide":"show")){if("show"!==n||!y||void 0===y[s])continue;f=!0}p[s]=y&&y[s]||lt.style(t,s)}else l=void 0;if(lt.isEmptyObject(p))"inline"===("none"===l?A(t.nodeName):l)&&(d.display=l);else{y?"hidden"in y&&(f=y.hidden):y=At.access(t,"fxshow",{}),o&&(y.hidden=!f),f?lt(t).show():u.done(function(){lt(t).hide()}),u.done(function(){var e;At.remove(t,"fxshow");for(e in p)lt.style(t,e,p[e])});for(s in p)r=N(f?y[s]:0,s,u),s in y||(y[s]=r.start,f&&(r.end=r.start,r.start="width"===s||"height"===s?1:0))}}function W(t,e){var i,s,n,o,r;for(i in t)if(s=lt.camelCase(i),n=e[s],o=t[i],lt.isArray(o)&&(n=o[1],o=t[i]=o[0]),i!==s&&(t[s]=o,delete t[i]),r=lt.cssHooks[s],r&&"expand"in r){o=r.expand(o),delete t[s];for(i in o)i in t||(t[i]=o[i],e[i]=n)}else e[s]=n}function U(t,e,i){var s,n,o=0,r=U.prefilters.length,a=lt.Deferred().always(function(){delete h.elem}),h=function(){if(n)return!1;for(var e=he||z(),i=Math.max(0,l.startTime+l.duration-e),s=i/l.duration||0,o=1-s,r=0,h=l.tweens.length;h>r;r++)l.tweens[r].run(o);return a.notifyWith(t,[l,o,i]),1>o&&h?i:(a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:lt.extend({},e),opts:lt.extend(!0,{specialEasing:{},easing:lt.easing._default},i),originalProperties:e,originalOptions:i,startTime:he||z(),duration:i.duration,tweens:[],createTween:function(e,i){var s=lt.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(s),s},stop:function(e){var i=0,s=e?l.tweens.length:0;if(n)return this;for(n=!0;s>i;i++)l.tweens[i].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),c=l.props;for(W(c,l.opts.specialEasing);r>o;o++)if(s=U.prefilters[o].call(l,t,c,l.opts))return lt.isFunction(s.stop)&&(lt._queueHooks(l.elem,l.opts.queue).stop=lt.proxy(s.stop,s)),s;return lt.map(c,N,l),lt.isFunction(l.opts.start)&&l.opts.start.call(t,l),lt.fx.timer(lt.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function G(t){return t.getAttribute&&t.getAttribute("class")||""}function V(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var s,n=0,o=e.toLowerCase().match(kt)||[];if(lt.isFunction(i))for(;s=o[n++];)"+"===s[0]?(s=s.slice(1)||"*",(t[s]=t[s]||[]).unshift(i)):(t[s]=t[s]||[]).push(i)}}function H(t,e,i,s){function n(a){var h;return o[a]=!0,lt.each(t[a]||[],function(t,a){var l=a(e,i,s);return"string"!=typeof l||r||o[l]?r?!(h=l):void 0:(e.dataTypes.unshift(l),n(l),!1)}),h}var o={},r=t===Ae;return n(e.dataTypes[0])||!o["*"]&&n("*")}function $(t,e){var i,s,n=lt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((n[i]?t:s||(s={}))[i]=e[i]);return s&&lt.extend(!0,t,s),t}function Q(t,e,i){for(var s,n,o,r,a=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===s&&(s=t.mimeType||e.getResponseHeader("Content-Type"));if(s)for(n in a)if(a[n]&&a[n].test(s)){h.unshift(n);break}if(h[0]in i)o=h[0];else{for(n in i){if(!h[0]||t.converters[n+" "+h[0]]){o=n;break}r||(r=n)}o=o||r}return o?(o!==h[0]&&h.unshift(o),i[o]):void 0}function X(t,e,i,s){var n,o,r,a,h,l={},c=t.dataTypes.slice();if(c[1])for(r in t.converters)l[r.toLowerCase()]=t.converters[r];for(o=c.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!h&&s&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=o,o=c.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(r=l[h+" "+o]||l["* "+o],!r)for(n in l)if(a=n.split(" "),a[1]===o&&(r=l[h+" "+a[0]]||l["* "+a[0]])){r===!0?r=l[n]:l[n]!==!0&&(o=a[0],c.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(u){return{state:"parsererror",error:r?u:"No conversion from "+h+" to "+o}}}return{state:"success",data:e}}function Y(t,e,i,s){var n;if(lt.isArray(e))lt.each(e,function(e,n){i||Re.test(t)?s(t,n):Y(t+"["+("object"==typeof n&&null!=n?e:"")+"]",n,i,s)});else if(i||"object"!==lt.type(e))s(t,e);else for(n in e)Y(t+"["+n+"]",e[n],i,s)}function J(t){return lt.isWindow(t)?t:9===t.nodeType&&t.defaultView}var Z=[],K=i.document,tt=Z.slice,et=Z.concat,it=Z.push,st=Z.indexOf,nt={},ot=nt.toString,rt=nt.hasOwnProperty,at={},ht="2.2.1",lt=function(t,e){return new lt.fn.init(t,e)},ct=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ut=/^-ms-/,pt=/-([\da-z])/gi,dt=function(t,e){return e.toUpperCase()};lt.fn=lt.prototype={jquery:ht,constructor:lt,selector:"",length:0,toArray:function(){return tt.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:tt.call(this)},pushStack:function(t){var e=lt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return lt.each(this,t)},map:function(t){return this.pushStack(lt.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(tt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:it,sort:Z.sort,splice:Z.splice},lt.extend=lt.fn.extend=function(){var t,e,i,s,n,o,r=arguments[0]||{},a=1,h=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[a]||{},a++),"object"==typeof r||lt.isFunction(r)||(r={}),a===h&&(r=this,a--);h>a;a++)if(null!=(t=arguments[a]))for(e in t)i=r[e],s=t[e],r!==s&&(l&&s&&(lt.isPlainObject(s)||(n=lt.isArray(s)))?(n?(n=!1,o=i&&lt.isArray(i)?i:[]):o=i&&lt.isPlainObject(i)?i:{},r[e]=lt.extend(l,o,s)):void 0!==s&&(r[e]=s));return r},lt.extend({expando:"jQuery"+(ht+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===lt.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!lt.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){return"object"!==lt.type(t)||t.nodeType||lt.isWindow(t)?!1:!t.constructor||rt.call(t.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?nt[ot.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=lt.trim(t),t&&(1===t.indexOf("use strict")?(e=K.createElement("script"),e.text=t,K.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(ut,"ms-").replace(pt,dt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var i,s=0;if(r(t))for(i=t.length;i>s&&e.call(t[s],s,t[s])!==!1;s++);else for(s in t)if(e.call(t[s],s,t[s])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(ct,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(r(Object(t))?lt.merge(i,"string"==typeof t?[t]:t):it.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:st.call(e,t,i)},merge:function(t,e){for(var i=+e.length,s=0,n=t.length;i>s;s++)t[n++]=e[s];return t.length=n,t},grep:function(t,e,i){for(var s,n=[],o=0,r=t.length,a=!i;r>o;o++)s=!e(t[o],o),s!==a&&n.push(t[o]);return n},map:function(t,e,i){var s,n,o=0,a=[];if(r(t))for(s=t.length;s>o;o++)n=e(t[o],o,i),null!=n&&a.push(n);else for(o in t)n=e(t[o],o,i),null!=n&&a.push(n);return et.apply([],a)},guid:1,proxy:function(t,e){var i,s,n;return"string"==typeof e&&(i=t[e],e=t,t=i),lt.isFunction(t)?(s=tt.call(arguments,2),n=function(){return t.apply(e||this,s.concat(tt.call(arguments)))},n.guid=t.guid=t.guid||lt.guid++,n):void 0},now:Date.now,support:at}),"function"==typeof Symbol&&(lt.fn[Symbol.iterator]=Z[Symbol.iterator]),lt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){nt["[object "+e+"]"]=e.toLowerCase()});var ft=/*!
	 * Sizzle CSS Selector Engine v2.2.1
	 * http://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2015-10-17
	 */
function(t){function e(t,e,i,s){var n,o,r,a,h,l,u,d,f=e&&e.ownerDocument,y=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==y&&9!==y&&11!==y)return i;if(!s&&((e?e.ownerDocument||e:N)!==C&&O(e),e=e||C,F)){if(11!==y&&(l=vt.exec(t)))if(n=l[1]){if(9===y){if(!(r=e.getElementById(n)))return i;if(r.id===n)return i.push(r),i}else if(f&&(r=f.getElementById(n))&&z(e,r)&&r.id===n)return i.push(r),i}else{if(l[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((n=l[3])&&b.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(n)),i}if(b.qsa&&!V[t+" "]&&(!j||!j.test(t))){if(1!==y)f=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(wt,"\\$&"):e.setAttribute("id",a=I),u=k(t),o=u.length,h=pt.test(a)?"#"+a:"[id='"+a+"']";o--;)u[o]=h+" "+p(u[o]);d=u.join(","),f=gt.test(t)&&c(e.parentNode)||e}if(d)try{return Z.apply(i,f.querySelectorAll(d)),i}catch(m){}finally{a===I&&e.removeAttribute("id")}}}return M(t.replace(at,"$1"),e,i,s)}function i(){function t(i,s){return e.push(i+" ")>x.cacheLength&&delete t[e.shift()],t[i+" "]=s}var e=[];return t}function s(t){return t[I]=!0,t}function n(t){var e=C.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),s=i.length;s--;)x.attrHandle[i[s]]=e}function r(t,e){var i=e&&t,s=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||$)-(~t.sourceIndex||$);if(s)return s;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function l(t){return s(function(e){return e=+e,s(function(i,s){for(var n,o=t([],i.length,e),r=o.length;r--;)i[n=o[r]]&&(i[n]=!(s[n]=i[n]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function u(){}function p(t){for(var e=0,i=t.length,s="";i>e;e++)s+=t[e].value;return s}function d(t,e,i){var s=e.dir,n=i&&"parentNode"===s,o=W++;return e.first?function(e,i,o){for(;e=e[s];)if(1===e.nodeType||n)return t(e,i,o)}:function(e,i,r){var a,h,l,c=[B,o];if(r){for(;e=e[s];)if((1===e.nodeType||n)&&t(e,i,r))return!0}else for(;e=e[s];)if(1===e.nodeType||n){if(l=e[I]||(e[I]={}),h=l[e.uniqueID]||(l[e.uniqueID]={}),(a=h[s])&&a[0]===B&&a[1]===o)return c[2]=a[2];if(h[s]=c,c[2]=t(e,i,r))return!0}}}function f(t){return t.length>1?function(e,i,s){for(var n=t.length;n--;)if(!t[n](e,i,s))return!1;return!0}:t[0]}function y(t,i,s){for(var n=0,o=i.length;o>n;n++)e(t,i[n],s);return s}function m(t,e,i,s,n){for(var o,r=[],a=0,h=t.length,l=null!=e;h>a;a++)(o=t[a])&&(i&&!i(o,s,n)||(r.push(o),l&&e.push(a)));return r}function v(t,e,i,n,o,r){return n&&!n[I]&&(n=v(n)),o&&!o[I]&&(o=v(o,r)),s(function(s,r,a,h){var l,c,u,p=[],d=[],f=r.length,v=s||y(e||"*",a.nodeType?[a]:a,[]),g=!t||!s&&e?v:m(v,p,t,a,h),w=i?o||(s?t:f||n)?[]:r:g;if(i&&i(g,w,a,h),n)for(l=m(w,d),n(l,[],a,h),c=l.length;c--;)(u=l[c])&&(w[d[c]]=!(g[d[c]]=u));if(s){if(o||t){if(o){for(l=[],c=w.length;c--;)(u=w[c])&&l.push(g[c]=u);o(null,w=[],l,h)}for(c=w.length;c--;)(u=w[c])&&(l=o?tt(s,u):p[c])>-1&&(s[l]=!(r[l]=u))}}else w=m(w===r?w.splice(f,w.length):w),o?o(null,r,w,h):Z.apply(r,w)})}function g(t){for(var e,i,s,n=t.length,o=x.relative[t[0].type],r=o||x.relative[" "],a=o?1:0,h=d(function(t){return t===e},r,!0),l=d(function(t){return tt(e,t)>-1},r,!0),c=[function(t,i,s){var n=!o&&(s||i!==E)||((e=i).nodeType?h(t,i,s):l(t,i,s));return e=null,n}];n>a;a++)if(i=x.relative[t[a].type])c=[d(f(c),i)];else{if(i=x.filter[t[a].type].apply(null,t[a].matches),i[I]){for(s=++a;n>s&&!x.relative[t[s].type];s++);return v(a>1&&f(c),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(at,"$1"),i,s>a&&g(t.slice(a,s)),n>s&&g(t=t.slice(s)),n>s&&p(t))}c.push(i)}return f(c)}function w(t,i){var n=i.length>0,o=t.length>0,r=function(s,r,a,h,l){var c,u,p,d=0,f="0",y=s&&[],v=[],g=E,w=s||o&&x.find.TAG("*",l),_=B+=null==g?1:Math.random()||.1,b=w.length;for(l&&(E=r===C||r||l);f!==b&&null!=(c=w[f]);f++){if(o&&c){for(u=0,r||c.ownerDocument===C||(O(c),a=!F);p=t[u++];)if(p(c,r||C,a)){h.push(c);break}l&&(B=_)}n&&((c=!p&&c)&&d--,s&&y.push(c))}if(d+=f,n&&f!==d){for(u=0;p=i[u++];)p(y,v,r,a);if(s){if(d>0)for(;f--;)y[f]||v[f]||(v[f]=Y.call(h));v=m(v)}Z.apply(h,v),l&&!s&&v.length>0&&d+i.length>1&&e.uniqueSort(h)}return l&&(B=_,E=g),y};return n?s(r):r}var _,b,x,S,T,k,P,M,E,A,q,O,C,R,F,j,L,D,z,I="sizzle"+1*new Date,N=t.document,B=0,W=0,U=i(),G=i(),V=i(),H=function(t,e){return t===e&&(q=!0),0},$=1<<31,Q={}.hasOwnProperty,X=[],Y=X.pop,J=X.push,Z=X.push,K=X.slice,tt=function(t,e){for(var i=0,s=t.length;s>i;i++)if(t[i]===e)return i;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",st="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt="\\["+it+"*("+st+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+it+"*\\]",ot=":("+st+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",rt=new RegExp(it+"+","g"),at=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ht=new RegExp("^"+it+"*,"+it+"*"),lt=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ct=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),ut=new RegExp(ot),pt=new RegExp("^"+st+"$"),dt={ID:new RegExp("^#("+st+")"),CLASS:new RegExp("^\\.("+st+")"),TAG:new RegExp("^("+st+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},ft=/^(?:input|select|textarea|button)$/i,yt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,vt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,wt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),bt=function(t,e,i){var s="0x"+e-65536;return s!==s||i?e:0>s?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,1023&s|56320)},xt=function(){O()};try{Z.apply(X=K.call(N.childNodes),N.childNodes),X[N.childNodes.length].nodeType}catch(St){Z={apply:X.length?function(t,e){J.apply(t,K.call(e))}:function(t,e){for(var i=t.length,s=0;t[i++]=e[s++];);t.length=i-1}}}b=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},O=e.setDocument=function(t){var e,i,s=t?t.ownerDocument||t:N;return s!==C&&9===s.nodeType&&s.documentElement?(C=s,R=C.documentElement,F=!T(C),(i=C.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",xt,!1):i.attachEvent&&i.attachEvent("onunload",xt)),b.attributes=n(function(t){return t.className="i",!t.getAttribute("className")}),b.getElementsByTagName=n(function(t){return t.appendChild(C.createComment("")),!t.getElementsByTagName("*").length}),b.getElementsByClassName=mt.test(C.getElementsByClassName),b.getById=n(function(t){return R.appendChild(t).id=I,!C.getElementsByName||!C.getElementsByName(I).length}),b.getById?(x.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&F){var i=e.getElementById(t);return i?[i]:[]}},x.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){return t.getAttribute("id")===e}}):(delete x.find.ID,x.filter.ID=function(t){var e=t.replace(_t,bt);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),x.find.TAG=b.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):b.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,s=[],n=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[n++];)1===i.nodeType&&s.push(i);return s}return o},x.find.CLASS=b.getElementsByClassName&&function(t,e){return"undefined"!=typeof e.getElementsByClassName&&F?e.getElementsByClassName(t):void 0},L=[],j=[],(b.qsa=mt.test(C.querySelectorAll))&&(n(function(t){R.appendChild(t).innerHTML="<a id='"+I+"'></a><select id='"+I+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||j.push("\\["+it+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+I+"-]").length||j.push("~="),t.querySelectorAll(":checked").length||j.push(":checked"),t.querySelectorAll("a#"+I+"+*").length||j.push(".#.+[+~]")}),n(function(t){var e=C.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&j.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),j.push(",.*:")})),(b.matchesSelector=mt.test(D=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&n(function(t){b.disconnectedMatch=D.call(t,"div"),D.call(t,"[s!='']:x"),L.push("!=",ot)}),j=j.length&&new RegExp(j.join("|")),L=L.length&&new RegExp(L.join("|")),e=mt.test(R.compareDocumentPosition),z=e||mt.test(R.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,s=e&&e.parentNode;return t===s||!(!s||1!==s.nodeType||!(i.contains?i.contains(s):t.compareDocumentPosition&&16&t.compareDocumentPosition(s)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},H=e?function(t,e){if(t===e)return q=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!b.sortDetached&&e.compareDocumentPosition(t)===i?t===C||t.ownerDocument===N&&z(N,t)?-1:e===C||e.ownerDocument===N&&z(N,e)?1:A?tt(A,t)-tt(A,e):0:4&i?-1:1)}:function(t,e){if(t===e)return q=!0,0;var i,s=0,n=t.parentNode,o=e.parentNode,a=[t],h=[e];if(!n||!o)return t===C?-1:e===C?1:n?-1:o?1:A?tt(A,t)-tt(A,e):0;if(n===o)return r(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)h.unshift(i);for(;a[s]===h[s];)s++;return s?r(a[s],h[s]):a[s]===N?-1:h[s]===N?1:0},C):C},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==C&&O(t),i=i.replace(ct,"='$1']"),b.matchesSelector&&F&&!V[i+" "]&&(!L||!L.test(i))&&(!j||!j.test(i)))try{var s=D.call(t,i);if(s||b.disconnectedMatch||t.document&&11!==t.document.nodeType)return s}catch(n){}return e(i,C,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==C&&O(t),z(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==C&&O(t);var i=x.attrHandle[e.toLowerCase()],s=i&&Q.call(x.attrHandle,e.toLowerCase())?i(t,e,!F):void 0;return void 0!==s?s:b.attributes||!F?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],s=0,n=0;if(q=!b.detectDuplicates,A=!b.sortStable&&t.slice(0),t.sort(H),q){for(;e=t[n++];)e===t[n]&&(s=i.push(n));for(;s--;)t.splice(i[s],1)}return A=null,t},S=e.getText=function(t){var e,i="",s=0,n=t.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===n||4===n)return t.nodeValue}else for(;e=t[s++];)i+=S(e);return i},x=e.selectors={cacheLength:50,createPseudo:s,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,bt),t[3]=(t[3]||t[4]||t[5]||"").replace(_t,bt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&ut.test(i)&&(e=k(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,bt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=U[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&U(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,s){return function(n){var o=e.attr(n,t);return null==o?"!="===i:i?(o+="","="===i?o===s:"!="===i?o!==s:"^="===i?s&&0===o.indexOf(s):"*="===i?s&&o.indexOf(s)>-1:"$="===i?s&&o.slice(-s.length)===s:"~="===i?(" "+o.replace(rt," ")+" ").indexOf(s)>-1:"|="===i?o===s||o.slice(0,s.length+1)===s+"-":!1):!0}},CHILD:function(t,e,i,s,n){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===s&&0===n?function(t){return!!t.parentNode}:function(e,i,h){var l,c,u,p,d,f,y=o!==r?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),g=!h&&!a,w=!1;if(m){if(o){for(;y;){for(p=e;p=p[y];)if(a?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=y="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&g){for(p=m,u=p[I]||(p[I]={}),c=u[p.uniqueID]||(u[p.uniqueID]={}),l=c[t]||[],d=l[0]===B&&l[1],w=d&&l[2],p=d&&m.childNodes[d];p=++d&&p&&p[y]||(w=d=0)||f.pop();)if(1===p.nodeType&&++w&&p===e){c[t]=[B,d,w];break}}else if(g&&(p=e,u=p[I]||(p[I]={}),c=u[p.uniqueID]||(u[p.uniqueID]={}),l=c[t]||[],d=l[0]===B&&l[1],w=d),w===!1)for(;(p=++d&&p&&p[y]||(w=d=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++w||(g&&(u=p[I]||(p[I]={}),c=u[p.uniqueID]||(u[p.uniqueID]={}),c[t]=[B,w]),p!==e)););return w-=n,w===s||w%s===0&&w/s>=0}}},PSEUDO:function(t,i){var n,o=x.pseudos[t]||x.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[I]?o(i):o.length>1?(n=[t,t,"",i],x.setFilters.hasOwnProperty(t.toLowerCase())?s(function(t,e){for(var s,n=o(t,i),r=n.length;r--;)s=tt(t,n[r]),t[s]=!(e[s]=n[r])}):function(t){return o(t,0,n)}):o}},pseudos:{not:s(function(t){var e=[],i=[],n=P(t.replace(at,"$1"));return n[I]?s(function(t,e,i,s){for(var o,r=n(t,null,s,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,s,o){return e[0]=t,n(e,null,o,i),e[0]=null,!i.pop()}}),has:s(function(t){return function(i){return e(t,i).length>0}}),contains:s(function(t){return t=t.replace(_t,bt),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:s(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,bt).toLowerCase(),function(e){var i;do if(i=F?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===R},focus:function(t){return t===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!x.pseudos.empty(t)},header:function(t){return yt.test(t.nodeName)},input:function(t){return ft.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:l(function(){return[0]}),last:l(function(t,e){return[e-1]}),eq:l(function(t,e,i){return[0>i?i+e:i]}),even:l(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:l(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:l(function(t,e,i){for(var s=0>i?i+e:i;--s>=0;)t.push(s);return t}),gt:l(function(t,e,i){for(var s=0>i?i+e:i;++s<e;)t.push(s);return t})}},x.pseudos.nth=x.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})x.pseudos[_]=h(_);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,k=e.tokenize=function(t,i){var s,n,o,r,a,h,l,c=G[t+" "];if(c)return i?0:c.slice(0);for(a=t,h=[],l=x.preFilter;a;){s&&!(n=ht.exec(a))||(n&&(a=a.slice(n[0].length)||a),h.push(o=[])),s=!1,(n=lt.exec(a))&&(s=n.shift(),o.push({value:s,type:n[0].replace(at," ")}),a=a.slice(s.length));for(r in x.filter)!(n=dt[r].exec(a))||l[r]&&!(n=l[r](n))||(s=n.shift(),o.push({value:s,type:r,matches:n}),a=a.slice(s.length));if(!s)break}return i?a.length:a?e.error(t):G(t,h).slice(0)},P=e.compile=function(t,e){var i,s=[],n=[],o=V[t+" "];if(!o){for(e||(e=k(t)),i=e.length;i--;)o=g(e[i]),o[I]?s.push(o):n.push(o);o=V(t,w(n,s)),o.selector=t}return o},M=e.select=function(t,e,i,s){var n,o,r,a,h,l="function"==typeof t&&t,u=!s&&k(t=l.selector||t);if(i=i||[],1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&b.getById&&9===e.nodeType&&F&&x.relative[o[1].type]){if(e=(x.find.ID(r.matches[0].replace(_t,bt),e)||[])[0],!e)return i;l&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(n=dt.needsContext.test(t)?0:o.length;n--&&(r=o[n],!x.relative[a=r.type]);)if((h=x.find[a])&&(s=h(r.matches[0].replace(_t,bt),gt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(n,1),t=s.length&&p(o),!t)return Z.apply(i,s),i;break}}return(l||P(t,u))(s,e,!F,i,!e||gt.test(t)&&c(e.parentNode)||e),i},b.sortStable=I.split("").sort(H).join("")===I,b.detectDuplicates=!!q,O(),b.sortDetached=n(function(t){return 1&t.compareDocumentPosition(C.createElement("div"))}),n(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),b.attributes&&n(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),n(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,i){var s;return i?void 0:t[e]===!0?e.toLowerCase():(s=t.getAttributeNode(e))&&s.specified?s.value:null}),e}(i);lt.find=ft,lt.expr=ft.selectors,lt.expr[":"]=lt.expr.pseudos,lt.uniqueSort=lt.unique=ft.uniqueSort,lt.text=ft.getText,lt.isXMLDoc=ft.isXML,lt.contains=ft.contains;var yt=function(t,e,i){for(var s=[],n=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(n&&lt(t).is(i))break;s.push(t)}return s},mt=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},vt=lt.expr.match.needsContext,gt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,wt=/^.[^:#\[\.,]*$/;lt.filter=function(t,e,i){var s=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===s.nodeType?lt.find.matchesSelector(s,t)?[s]:[]:lt.find.matches(t,lt.grep(e,function(t){return 1===t.nodeType}))},lt.fn.extend({find:function(t){var e,i=this.length,s=[],n=this;if("string"!=typeof t)return this.pushStack(lt(t).filter(function(){for(e=0;i>e;e++)if(lt.contains(n[e],this))return!0}));for(e=0;i>e;e++)lt.find(t,n[e],s);return s=this.pushStack(i>1?lt.unique(s):s),s.selector=this.selector?this.selector+" "+t:t,s},filter:function(t){return this.pushStack(a(this,t||[],!1))},not:function(t){return this.pushStack(a(this,t||[],!0))},is:function(t){return!!a(this,"string"==typeof t&&vt.test(t)?lt(t):t||[],!1).length}});var _t,bt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,xt=lt.fn.init=function(t,e,i){var s,n;if(!t)return this;if(i=i||_t,"string"==typeof t){if(s="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:bt.exec(t),!s||!s[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(s[1]){if(e=e instanceof lt?e[0]:e,lt.merge(this,lt.parseHTML(s[1],e&&e.nodeType?e.ownerDocument||e:K,!0)),gt.test(s[1])&&lt.isPlainObject(e))for(s in e)lt.isFunction(this[s])?this[s](e[s]):this.attr(s,e[s]);return this}return n=K.getElementById(s[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=K,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):lt.isFunction(t)?void 0!==i.ready?i.ready(t):t(lt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),lt.makeArray(t,this))};xt.prototype=lt.fn,_t=lt(K);var St=/^(?:parents|prev(?:Until|All))/,Tt={children:!0,contents:!0,next:!0,prev:!0};lt.fn.extend({has:function(t){var e=lt(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(lt.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,s=0,n=this.length,o=[],r=vt.test(t)||"string"!=typeof t?lt(t,e||this.context):0;n>s;s++)for(i=this[s];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&lt.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?lt.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?st.call(lt(t),this[0]):st.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(lt.uniqueSort(lt.merge(this.get(),lt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),lt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return yt(t,"parentNode")},parentsUntil:function(t,e,i){return yt(t,"parentNode",i)},next:function(t){return h(t,"nextSibling")},prev:function(t){return h(t,"previousSibling")},nextAll:function(t){return yt(t,"nextSibling")},prevAll:function(t){return yt(t,"previousSibling")},nextUntil:function(t,e,i){return yt(t,"nextSibling",i)},prevUntil:function(t,e,i){return yt(t,"previousSibling",i)},siblings:function(t){return mt((t.parentNode||{}).firstChild,t)},children:function(t){return mt(t.firstChild)},contents:function(t){return t.contentDocument||lt.merge([],t.childNodes)}},function(t,e){lt.fn[t]=function(i,s){var n=lt.map(this,e,i);return"Until"!==t.slice(-5)&&(s=i),s&&"string"==typeof s&&(n=lt.filter(s,n)),this.length>1&&(Tt[t]||lt.uniqueSort(n),St.test(t)&&n.reverse()),this.pushStack(n)}});var kt=/\S+/g;lt.Callbacks=function(t){t="string"==typeof t?l(t):lt.extend({},t);var e,i,s,n,o=[],r=[],a=-1,h=function(){for(n=t.once,s=e=!0;r.length;a=-1)for(i=r.shift();++a<o.length;)o[a].apply(i[0],i[1])===!1&&t.stopOnFalse&&(a=o.length,i=!1);t.memory||(i=!1),e=!1,n&&(o=i?[]:"")},c={add:function(){return o&&(i&&!e&&(a=o.length-1,r.push(i)),function s(e){lt.each(e,function(e,i){lt.isFunction(i)?t.unique&&c.has(i)||o.push(i):i&&i.length&&"string"!==lt.type(i)&&s(i)})}(arguments),i&&!e&&h()),this},remove:function(){return lt.each(arguments,function(t,e){for(var i;(i=lt.inArray(e,o,i))>-1;)o.splice(i,1),a>=i&&a--}),this},has:function(t){return t?lt.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return n=r=[],o=i="",this},disabled:function(){return!o},lock:function(){return n=r=[],i||(o=i=""),this},locked:function(){return!!n},fireWith:function(t,i){return n||(i=i||[],i=[t,i.slice?i.slice():i],r.push(i),e||h()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!s}};return c},lt.extend({Deferred:function(t){var e=[["resolve","done",lt.Callbacks("once memory"),"resolved"],["reject","fail",lt.Callbacks("once memory"),"rejected"],["notify","progress",lt.Callbacks("memory")]],i="pending",s={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var t=arguments;return lt.Deferred(function(i){lt.each(e,function(e,o){var r=lt.isFunction(t[e])&&t[e];n[o[1]](function(){var t=r&&r.apply(this,arguments);t&&lt.isFunction(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[o[0]+"With"](this===s?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?lt.extend(t,s):s}},n={};return s.pipe=s.then,lt.each(e,function(t,o){var r=o[2],a=o[3];s[o[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),n[o[0]]=function(){return n[o[0]+"With"](this===n?s:this,arguments),this},n[o[0]+"With"]=r.fireWith}),s.promise(n),t&&t.call(n,n),n},when:function(t){var e,i,s,n=0,o=tt.call(arguments),r=o.length,a=1!==r||t&&lt.isFunction(t.promise)?r:0,h=1===a?t:lt.Deferred(),l=function(t,i,s){return function(n){i[t]=this,s[t]=arguments.length>1?tt.call(arguments):n,s===e?h.notifyWith(i,s):--a||h.resolveWith(i,s)}};if(r>1)for(e=new Array(r),i=new Array(r),s=new Array(r);r>n;n++)o[n]&&lt.isFunction(o[n].promise)?o[n].promise().progress(l(n,i,e)).done(l(n,s,o)).fail(h.reject):--a;return a||h.resolveWith(s,o),h.promise()}});var Pt;lt.fn.ready=function(t){return lt.ready.promise().done(t),this},lt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?lt.readyWait++:lt.ready(!0)},ready:function(t){(t===!0?--lt.readyWait:lt.isReady)||(lt.isReady=!0,t!==!0&&--lt.readyWait>0||(Pt.resolveWith(K,[lt]),lt.fn.triggerHandler&&(lt(K).triggerHandler("ready"),lt(K).off("ready"))))}}),lt.ready.promise=function(t){return Pt||(Pt=lt.Deferred(),"complete"===K.readyState||"loading"!==K.readyState&&!K.documentElement.doScroll?i.setTimeout(lt.ready):(K.addEventListener("DOMContentLoaded",c),i.addEventListener("load",c))),Pt.promise(t)},lt.ready.promise();var Mt=function(t,e,i,s,n,o,r){var a=0,h=t.length,l=null==i;if("object"===lt.type(i)){n=!0;for(a in i)Mt(t,e,a,i[a],!0,o,r)}else if(void 0!==s&&(n=!0,lt.isFunction(s)||(r=!0),l&&(r?(e.call(t,s),e=null):(l=e,e=function(t,e,i){return l.call(lt(t),i)})),e))for(;h>a;a++)e(t[a],i,r?s:s.call(t[a],a,e(t[a],i)));return n?t:l?e.call(t):h?e(t[0],i):o},Et=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};u.uid=1,u.prototype={register:function(t,e){var i=e||{};return t.nodeType?t[this.expando]=i:Object.defineProperty(t,this.expando,{value:i,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!Et(t))return{};var e=t[this.expando];return e||(e={},Et(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var s,n=this.cache(t);if("string"==typeof e)n[e]=i;else for(s in e)n[s]=e[s];return n},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,i){var s;return void 0===e||e&&"string"==typeof e&&void 0===i?(s=this.get(t,e),void 0!==s?s:this.get(t,lt.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,s,n,o=t[this.expando];if(void 0!==o){if(void 0===e)this.register(t);else{lt.isArray(e)?s=e.concat(e.map(lt.camelCase)):(n=lt.camelCase(e),e in o?s=[e,n]:(s=n,s=s in o?[s]:s.match(kt)||[])),i=s.length;for(;i--;)delete o[s[i]]}(void 0===e||lt.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!lt.isEmptyObject(e)}};var At=new u,qt=new u,Ot=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ct=/[A-Z]/g;lt.extend({hasData:function(t){return qt.hasData(t)||At.hasData(t)},data:function(t,e,i){return qt.access(t,e,i)},removeData:function(t,e){qt.remove(t,e)},_data:function(t,e,i){return At.access(t,e,i)},_removeData:function(t,e){At.remove(t,e)}}),lt.fn.extend({data:function(t,e){var i,s,n,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(n=qt.get(o),1===o.nodeType&&!At.get(o,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&(s=r[i].name,0===s.indexOf("data-")&&(s=lt.camelCase(s.slice(5)),p(o,s,n[s])));At.set(o,"hasDataAttrs",!0)}return n}return"object"==typeof t?this.each(function(){qt.set(this,t)}):Mt(this,function(e){var i,s;if(o&&void 0===e){if(i=qt.get(o,t)||qt.get(o,t.replace(Ct,"-$&").toLowerCase()),void 0!==i)return i;if(s=lt.camelCase(t),i=qt.get(o,s),void 0!==i)return i;if(i=p(o,s,void 0),void 0!==i)return i}else s=lt.camelCase(t),this.each(function(){var i=qt.get(this,s);qt.set(this,s,e),t.indexOf("-")>-1&&void 0!==i&&qt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){qt.remove(this,t)})}}),lt.extend({queue:function(t,e,i){var s;return t?(e=(e||"fx")+"queue",s=At.get(t,e),i&&(!s||lt.isArray(i)?s=At.access(t,e,lt.makeArray(i)):s.push(i)),s||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=lt.queue(t,e),s=i.length,n=i.shift(),o=lt._queueHooks(t,e),r=function(){lt.dequeue(t,e)};"inprogress"===n&&(n=i.shift(),s--),n&&("fx"===e&&i.unshift("inprogress"),delete o.stop,n.call(t,r,o)),!s&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return At.get(t,i)||At.access(t,i,{empty:lt.Callbacks("once memory").add(function(){At.remove(t,[e+"queue",i])})})}}),lt.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?lt.queue(this[0],t):void 0===e?this:this.each(function(){var i=lt.queue(this,t,e);lt._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&lt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){lt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,s=1,n=lt.Deferred(),o=this,r=this.length,a=function(){--s||n.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=At.get(o[r],t+"queueHooks"),i&&i.empty&&(s++,i.empty.add(a));return a(),n.promise(e)}});var Rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ft=new RegExp("^(?:([+-])=|)("+Rt+")([a-z%]*)$","i"),jt=["Top","Right","Bottom","Left"],Lt=function(t,e){return t=e||t,"none"===lt.css(t,"display")||!lt.contains(t.ownerDocument,t)},Dt=/^(?:checkbox|radio)$/i,zt=/<([\w:-]+)/,It=/^$|\/(?:java|ecma)script/i,Nt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td;var Bt=/<|&#?\w+;/;!function(){var t=K.createDocumentFragment(),e=t.appendChild(K.createElement("div")),i=K.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),at.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",at.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Wt=/^key/,Ut=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Gt=/^([^.]*)(?:\.(.+)|)/;lt.event={global:{},add:function(t,e,i,s,n){var o,r,a,h,l,c,u,p,d,f,y,m=At.get(t);if(m)for(i.handler&&(o=i,i=o.handler,n=o.selector),i.guid||(i.guid=lt.guid++),(h=m.events)||(h=m.events={}),(r=m.handle)||(r=m.handle=function(e){return"undefined"!=typeof lt&&lt.event.triggered!==e.type?lt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(kt)||[""],l=e.length;l--;)a=Gt.exec(e[l])||[],d=y=a[1],f=(a[2]||"").split(".").sort(),d&&(u=lt.event.special[d]||{},d=(n?u.delegateType:u.bindType)||d,u=lt.event.special[d]||{},c=lt.extend({type:d,origType:y,data:s,handler:i,guid:i.guid,selector:n,needsContext:n&&lt.expr.match.needsContext.test(n),namespace:f.join(".")},o),(p=h[d])||(p=h[d]=[],p.delegateCount=0,u.setup&&u.setup.call(t,s,f,r)!==!1||t.addEventListener&&t.addEventListener(d,r)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),n?p.splice(p.delegateCount++,0,c):p.push(c),lt.event.global[d]=!0)},remove:function(t,e,i,s,n){var o,r,a,h,l,c,u,p,d,f,y,m=At.hasData(t)&&At.get(t);if(m&&(h=m.events)){for(e=(e||"").match(kt)||[""],l=e.length;l--;)if(a=Gt.exec(e[l])||[],d=y=a[1],f=(a[2]||"").split(".").sort(),d){for(u=lt.event.special[d]||{},d=(s?u.delegateType:u.bindType)||d,p=h[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=p.length;o--;)c=p[o],!n&&y!==c.origType||i&&i.guid!==c.guid||a&&!a.test(c.namespace)||s&&s!==c.selector&&("**"!==s||!c.selector)||(p.splice(o,1),
c.selector&&p.delegateCount--,u.remove&&u.remove.call(t,c));r&&!p.length&&(u.teardown&&u.teardown.call(t,f,m.handle)!==!1||lt.removeEvent(t,d,m.handle),delete h[d])}else for(d in h)lt.event.remove(t,d+e[l],i,s,!0);lt.isEmptyObject(h)&&At.remove(t,"handle events")}},dispatch:function(t){t=lt.event.fix(t);var e,i,s,n,o,r=[],a=tt.call(arguments),h=(At.get(this,"events")||{})[t.type]||[],l=lt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,t)!==!1){for(r=lt.event.handlers.call(this,t,h),e=0;(n=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=n.elem,i=0;(o=n.handlers[i++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,s=((lt.event.special[o.origType]||{}).handle||o.handler).apply(n.elem,a),void 0!==s&&(t.result=s)===!1&&(t.preventDefault(),t.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,s,n,o,r=[],a=e.delegateCount,h=t.target;if(a&&h.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&(h.disabled!==!0||"click"!==t.type)){for(s=[],i=0;a>i;i++)o=e[i],n=o.selector+" ",void 0===s[n]&&(s[n]=o.needsContext?lt(n,this).index(h)>-1:lt.find(n,this,null,[h]).length),s[n]&&s.push(o);s.length&&r.push({elem:h,handlers:s})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,s,n,o=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||K,s=i.documentElement,n=i.body,t.pageX=e.clientX+(s&&s.scrollLeft||n&&n.scrollLeft||0)-(s&&s.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(s&&s.scrollTop||n&&n.scrollTop||0)-(s&&s.clientTop||n&&n.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[lt.expando])return t;var e,i,s,n=t.type,o=t,r=this.fixHooks[n];for(r||(this.fixHooks[n]=r=Ut.test(n)?this.mouseHooks:Wt.test(n)?this.keyHooks:{}),s=r.props?this.props.concat(r.props):this.props,t=new lt.Event(o),e=s.length;e--;)i=s[e],t[i]=o[i];return t.target||(t.target=K),3===t.target.nodeType&&(t.target=t.target.parentNode),r.filter?r.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==w()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===w()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&lt.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return lt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},lt.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},lt.Event=function(t,e){return this instanceof lt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?v:g):this.type=t,e&&lt.extend(this,e),this.timeStamp=t&&t.timeStamp||lt.now(),void(this[lt.expando]=!0)):new lt.Event(t,e)},lt.Event.prototype={constructor:lt.Event,isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=v,t&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=v,t&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=v,t&&t.stopImmediatePropagation(),this.stopPropagation()}},lt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){lt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,s=this,n=t.relatedTarget,o=t.handleObj;return n&&(n===s||lt.contains(s,n))||(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),lt.fn.extend({on:function(t,e,i,s){return _(this,t,e,i,s)},one:function(t,e,i,s){return _(this,t,e,i,s,1)},off:function(t,e,i){var s,n;if(t&&t.preventDefault&&t.handleObj)return s=t.handleObj,lt(t.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof t){for(n in t)this.off(n,e,t[n]);return this}return e!==!1&&"function"!=typeof e||(i=e,e=void 0),i===!1&&(i=g),this.each(function(){lt.event.remove(this,t,i,e)})}});var Vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ht=/<script|<style|<link/i,$t=/checked\s*(?:[^=]|=\s*.checked.)/i,Qt=/^true\/(.*)/,Xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;lt.extend({htmlPrefilter:function(t){return t.replace(Vt,"<$1></$2>")},clone:function(t,e,i){var s,n,o,r,a=t.cloneNode(!0),h=lt.contains(t.ownerDocument,t);if(!(at.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||lt.isXMLDoc(t)))for(r=f(a),o=f(t),s=0,n=o.length;n>s;s++)k(o[s],r[s]);if(e)if(i)for(o=o||f(t),r=r||f(a),s=0,n=o.length;n>s;s++)T(o[s],r[s]);else T(t,a);return r=f(a,"script"),r.length>0&&y(r,!h&&f(t,"script")),a},cleanData:function(t){for(var e,i,s,n=lt.event.special,o=0;void 0!==(i=t[o]);o++)if(Et(i)){if(e=i[At.expando]){if(e.events)for(s in e.events)n[s]?lt.event.remove(i,s):lt.removeEvent(i,s,e.handle);i[At.expando]=void 0}i[qt.expando]&&(i[qt.expando]=void 0)}}}),lt.fn.extend({domManip:P,detach:function(t){return M(this,t,!0)},remove:function(t){return M(this,t)},text:function(t){return Mt(this,function(t){return void 0===t?lt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return P(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.appendChild(t)}})},prepend:function(){return P(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return P(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return P(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(lt.cleanData(f(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return lt.clone(this,t,e)})},html:function(t){return Mt(this,function(t){var e=this[0]||{},i=0,s=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ht.test(t)&&!Nt[(zt.exec(t)||["",""])[1].toLowerCase()]){t=lt.htmlPrefilter(t);try{for(;s>i;i++)e=this[i]||{},1===e.nodeType&&(lt.cleanData(f(e,!1)),e.innerHTML=t);e=0}catch(n){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return P(this,arguments,function(e){var i=this.parentNode;lt.inArray(this,t)<0&&(lt.cleanData(f(this)),i&&i.replaceChild(e,this))},t)}}),lt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){lt.fn[t]=function(t){for(var i,s=[],n=lt(t),o=n.length-1,r=0;o>=r;r++)i=r===o?this:this.clone(!0),lt(n[r])[e](i),it.apply(s,i.get());return this.pushStack(s)}});var Yt,Jt={HTML:"block",BODY:"block"},Zt=/^margin/,Kt=new RegExp("^("+Rt+")(?!px)[a-z%]+$","i"),te=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},ee=function(t,e,i,s){var n,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];n=i.apply(t,s||[]);for(o in e)t.style[o]=r[o];return n},ie=K.documentElement;!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",ie.appendChild(r);var t=i.getComputedStyle(a);e="1%"!==t.top,o="2px"===t.marginLeft,s="4px"===t.width,a.style.marginRight="50%",n="4px"===t.marginRight,ie.removeChild(r)}var e,s,n,o,r=K.createElement("div"),a=K.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",at.clearCloneStyle="content-box"===a.style.backgroundClip,r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",r.appendChild(a),lt.extend(at,{pixelPosition:function(){return t(),e},boxSizingReliable:function(){return null==s&&t(),s},pixelMarginRight:function(){return null==s&&t(),n},reliableMarginLeft:function(){return null==s&&t(),o},reliableMarginRight:function(){var t,e=a.appendChild(K.createElement("div"));return e.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",a.style.width="1px",ie.appendChild(r),t=!parseFloat(i.getComputedStyle(e).marginRight),ie.removeChild(r),a.removeChild(e),t}}))}();var se=/^(none|table(?!-c[ea]).+)/,ne={position:"absolute",visibility:"hidden",display:"block"},oe={letterSpacing:"0",fontWeight:"400"},re=["Webkit","O","Moz","ms"],ae=K.createElement("div").style;lt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=q(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,s){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var n,o,r,a=lt.camelCase(e),h=t.style;return e=lt.cssProps[a]||(lt.cssProps[a]=C(a)||a),r=lt.cssHooks[e]||lt.cssHooks[a],void 0===i?r&&"get"in r&&void 0!==(n=r.get(t,!1,s))?n:h[e]:(o=typeof i,"string"===o&&(n=Ft.exec(i))&&n[1]&&(i=d(t,e,n),o="number"),null!=i&&i===i&&("number"===o&&(i+=n&&n[3]||(lt.cssNumber[a]?"":"px")),at.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,s))||(h[e]=i)),void 0)}},css:function(t,e,i,s){var n,o,r,a=lt.camelCase(e);return e=lt.cssProps[a]||(lt.cssProps[a]=C(a)||a),r=lt.cssHooks[e]||lt.cssHooks[a],r&&"get"in r&&(n=r.get(t,!0,i)),void 0===n&&(n=q(t,e,s)),"normal"===n&&e in oe&&(n=oe[e]),""===i||i?(o=parseFloat(n),i===!0||isFinite(o)?o||0:n):n}}),lt.each(["height","width"],function(t,e){lt.cssHooks[e]={get:function(t,i,s){return i?se.test(lt.css(t,"display"))&&0===t.offsetWidth?ee(t,ne,function(){return j(t,e,s)}):j(t,e,s):void 0},set:function(t,i,s){var n,o=s&&te(t),r=s&&F(t,e,s,"border-box"===lt.css(t,"boxSizing",!1,o),o);return r&&(n=Ft.exec(i))&&"px"!==(n[3]||"px")&&(t.style[e]=i,i=lt.css(t,e)),R(t,i,r)}}}),lt.cssHooks.marginLeft=O(at.reliableMarginLeft,function(t,e){return e?(parseFloat(q(t,"marginLeft"))||t.getBoundingClientRect().left-ee(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px":void 0}),lt.cssHooks.marginRight=O(at.reliableMarginRight,function(t,e){return e?ee(t,{display:"inline-block"},q,[t,"marginRight"]):void 0}),lt.each({margin:"",padding:"",border:"Width"},function(t,e){lt.cssHooks[t+e]={expand:function(i){for(var s=0,n={},o="string"==typeof i?i.split(" "):[i];4>s;s++)n[t+jt[s]+e]=o[s]||o[s-2]||o[0];return n}},Zt.test(t)||(lt.cssHooks[t+e].set=R)}),lt.fn.extend({css:function(t,e){return Mt(this,function(t,e,i){var s,n,o={},r=0;if(lt.isArray(e)){for(s=te(t),n=e.length;n>r;r++)o[e[r]]=lt.css(t,e[r],!1,s);return o}return void 0!==i?lt.style(t,e,i):lt.css(t,e)},t,e,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Lt(this)?lt(this).show():lt(this).hide()})}}),lt.Tween=D,D.prototype={constructor:D,init:function(t,e,i,s,n,o){this.elem=t,this.prop=i,this.easing=n||lt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=s,this.unit=o||(lt.cssNumber[i]?"":"px")},cur:function(){var t=D.propHooks[this.prop];return t&&t.get?t.get(this):D.propHooks._default.get(this)},run:function(t){var e,i=D.propHooks[this.prop];return this.options.duration?this.pos=e=lt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=lt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){lt.fx.step[t.prop]?lt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[lt.cssProps[t.prop]]&&!lt.cssHooks[t.prop]?t.elem[t.prop]=t.now:lt.style(t.elem,t.prop,t.now+t.unit)}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},lt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},lt.fx=D.prototype.init,lt.fx.step={};var he,le,ce=/^(?:toggle|show|hide)$/,ue=/queueHooks$/;lt.Animation=lt.extend(U,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return d(i.elem,t,Ft.exec(e),i),i}]},tweener:function(t,e){lt.isFunction(t)?(e=t,t=["*"]):t=t.match(kt);for(var i,s=0,n=t.length;n>s;s++)i=t[s],U.tweeners[i]=U.tweeners[i]||[],U.tweeners[i].unshift(e)},prefilters:[B],prefilter:function(t,e){e?U.prefilters.unshift(t):U.prefilters.push(t)}}),lt.speed=function(t,e,i){var s=t&&"object"==typeof t?lt.extend({},t):{complete:i||!i&&e||lt.isFunction(t)&&t,duration:t,easing:i&&e||e&&!lt.isFunction(e)&&e};return s.duration=lt.fx.off?0:"number"==typeof s.duration?s.duration:s.duration in lt.fx.speeds?lt.fx.speeds[s.duration]:lt.fx.speeds._default,null!=s.queue&&s.queue!==!0||(s.queue="fx"),s.old=s.complete,s.complete=function(){lt.isFunction(s.old)&&s.old.call(this),s.queue&&lt.dequeue(this,s.queue)},s},lt.fn.extend({fadeTo:function(t,e,i,s){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:e},t,i,s)},animate:function(t,e,i,s){var n=lt.isEmptyObject(t),o=lt.speed(e,i,s),r=function(){var e=U(this,lt.extend({},t),o);(n||At.get(this,"finish"))&&e.stop(!0)};return r.finish=r,n||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(t,e,i){var s=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=lt.timers,r=At.get(this);if(n)r[n]&&r[n].stop&&s(r[n]);else for(n in r)r[n]&&r[n].stop&&ue.test(n)&&s(r[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(i),e=!1,o.splice(n,1));!e&&i||lt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=At.get(this),s=i[t+"queue"],n=i[t+"queueHooks"],o=lt.timers,r=s?s.length:0;for(i.finish=!0,lt.queue(this,t,[]),n&&n.stop&&n.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;r>e;e++)s[e]&&s[e].finish&&s[e].finish.call(this);delete i.finish})}}),lt.each(["toggle","show","hide"],function(t,e){var i=lt.fn[e];lt.fn[e]=function(t,s,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(I(e,!0),t,s,n)}}),lt.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){lt.fn[t]=function(t,i,s){return this.animate(e,t,i,s)}}),lt.timers=[],lt.fx.tick=function(){var t,e=0,i=lt.timers;for(he=lt.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||lt.fx.stop(),he=void 0},lt.fx.timer=function(t){lt.timers.push(t),t()?lt.fx.start():lt.timers.pop()},lt.fx.interval=13,lt.fx.start=function(){le||(le=i.setInterval(lt.fx.tick,lt.fx.interval))},lt.fx.stop=function(){i.clearInterval(le),le=null},lt.fx.speeds={slow:600,fast:200,_default:400},lt.fn.delay=function(t,e){return t=lt.fx?lt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,s){var n=i.setTimeout(e,t);s.stop=function(){i.clearTimeout(n)}})},function(){var t=K.createElement("input"),e=K.createElement("select"),i=e.appendChild(K.createElement("option"));t.type="checkbox",at.checkOn=""!==t.value,at.optSelected=i.selected,e.disabled=!0,at.optDisabled=!i.disabled,t=K.createElement("input"),t.value="t",t.type="radio",at.radioValue="t"===t.value}();var pe,de=lt.expr.attrHandle;lt.fn.extend({attr:function(t,e){return Mt(this,lt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){lt.removeAttr(this,t)})}}),lt.extend({attr:function(t,e,i){var s,n,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?lt.prop(t,e,i):(1===o&&lt.isXMLDoc(t)||(e=e.toLowerCase(),n=lt.attrHooks[e]||(lt.expr.match.bool.test(e)?pe:void 0)),void 0!==i?null===i?void lt.removeAttr(t,e):n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=lt.find.attr(t,e),null==s?void 0:s))},attrHooks:{type:{set:function(t,e){if(!at.radioValue&&"radio"===e&&lt.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,s,n=0,o=e&&e.match(kt);if(o&&1===t.nodeType)for(;i=o[n++];)s=lt.propFix[i]||i,lt.expr.match.bool.test(i)&&(t[s]=!1),t.removeAttribute(i)}}),pe={set:function(t,e,i){return e===!1?lt.removeAttr(t,i):t.setAttribute(i,i),i}},lt.each(lt.expr.match.bool.source.match(/\w+/g),function(t,e){var i=de[e]||lt.find.attr;de[e]=function(t,e,s){var n,o;return s||(o=de[e],de[e]=n,n=null!=i(t,e,s)?e.toLowerCase():null,de[e]=o),n}});var fe=/^(?:input|select|textarea|button)$/i,ye=/^(?:a|area)$/i;lt.fn.extend({prop:function(t,e){return Mt(this,lt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[lt.propFix[t]||t]})}}),lt.extend({prop:function(t,e,i){var s,n,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&lt.isXMLDoc(t)||(e=lt.propFix[e]||e,n=lt.propHooks[e]),void 0!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:t[e]=i:n&&"get"in n&&null!==(s=n.get(t,e))?s:t[e]},propHooks:{tabIndex:{get:function(t){var e=lt.find.attr(t,"tabindex");return e?parseInt(e,10):fe.test(t.nodeName)||ye.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),at.optSelected||(lt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),lt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){lt.propFix[this.toLowerCase()]=this});var me=/[\t\r\n\f]/g;lt.fn.extend({addClass:function(t){var e,i,s,n,o,r,a,h=0;if(lt.isFunction(t))return this.each(function(e){lt(this).addClass(t.call(this,e,G(this)))});if("string"==typeof t&&t)for(e=t.match(kt)||[];i=this[h++];)if(n=G(i),s=1===i.nodeType&&(" "+n+" ").replace(me," ")){for(r=0;o=e[r++];)s.indexOf(" "+o+" ")<0&&(s+=o+" ");a=lt.trim(s),n!==a&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,s,n,o,r,a,h=0;if(lt.isFunction(t))return this.each(function(e){lt(this).removeClass(t.call(this,e,G(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(kt)||[];i=this[h++];)if(n=G(i),s=1===i.nodeType&&(" "+n+" ").replace(me," ")){for(r=0;o=e[r++];)for(;s.indexOf(" "+o+" ")>-1;)s=s.replace(" "+o+" "," ");a=lt.trim(s),n!==a&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):lt.isFunction(t)?this.each(function(i){lt(this).toggleClass(t.call(this,i,G(this),e),e)}):this.each(function(){var e,s,n,o;if("string"===i)for(s=0,n=lt(this),o=t.match(kt)||[];e=o[s++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==t&&"boolean"!==i||(e=G(this),e&&At.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":At.get(this,"__className__")||""))})},hasClass:function(t){var e,i,s=0;for(e=" "+t+" ";i=this[s++];)if(1===i.nodeType&&(" "+G(i)+" ").replace(me," ").indexOf(e)>-1)return!0;return!1}});var ve=/\r/g;lt.fn.extend({val:function(t){var e,i,s,n=this[0];{if(arguments.length)return s=lt.isFunction(t),this.each(function(i){var n;1===this.nodeType&&(n=s?t.call(this,i,lt(this).val()):t,null==n?n="":"number"==typeof n?n+="":lt.isArray(n)&&(n=lt.map(n,function(t){return null==t?"":t+""})),e=lt.valHooks[this.type]||lt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,n,"value")||(this.value=n))});if(n)return e=lt.valHooks[n.type]||lt.valHooks[n.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(n,"value"))?i:(i=n.value,"string"==typeof i?i.replace(ve,""):null==i?"":i)}}}),lt.extend({valHooks:{option:{get:function(t){return lt.trim(t.value)}},select:{get:function(t){for(var e,i,s=t.options,n=t.selectedIndex,o="select-one"===t.type||0>n,r=o?null:[],a=o?n+1:s.length,h=0>n?a:o?n:0;a>h;h++)if(i=s[h],(i.selected||h===n)&&(at.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!lt.nodeName(i.parentNode,"optgroup"))){if(e=lt(i).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var i,s,n=t.options,o=lt.makeArray(e),r=n.length;r--;)s=n[r],(s.selected=lt.inArray(lt.valHooks.option.get(s),o)>-1)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),lt.each(["radio","checkbox"],function(){lt.valHooks[this]={set:function(t,e){return lt.isArray(e)?t.checked=lt.inArray(lt(t).val(),e)>-1:void 0}},at.checkOn||(lt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ge=/^(?:focusinfocus|focusoutblur)$/;lt.extend(lt.event,{trigger:function(t,e,s,n){var o,r,a,h,l,c,u,p=[s||K],d=rt.call(t,"type")?t.type:t,f=rt.call(t,"namespace")?t.namespace.split("."):[];if(r=a=s=s||K,3!==s.nodeType&&8!==s.nodeType&&!ge.test(d+lt.event.triggered)&&(d.indexOf(".")>-1&&(f=d.split("."),d=f.shift(),f.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[lt.expando]?t:new lt.Event(d,"object"==typeof t&&t),t.isTrigger=n?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=s),e=null==e?[t]:lt.makeArray(e,[t]),u=lt.event.special[d]||{},n||!u.trigger||u.trigger.apply(s,e)!==!1)){if(!n&&!u.noBubble&&!lt.isWindow(s)){for(h=u.delegateType||d,ge.test(h+d)||(r=r.parentNode);r;r=r.parentNode)p.push(r),a=r;a===(s.ownerDocument||K)&&p.push(a.defaultView||a.parentWindow||i)}for(o=0;(r=p[o++])&&!t.isPropagationStopped();)t.type=o>1?h:u.bindType||d,c=(At.get(r,"events")||{})[t.type]&&At.get(r,"handle"),c&&c.apply(r,e),c=l&&r[l],c&&c.apply&&Et(r)&&(t.result=c.apply(r,e),t.result===!1&&t.preventDefault());return t.type=d,n||t.isDefaultPrevented()||u._default&&u._default.apply(p.pop(),e)!==!1||!Et(s)||l&&lt.isFunction(s[d])&&!lt.isWindow(s)&&(a=s[l],a&&(s[l]=null),lt.event.triggered=d,s[d](),lt.event.triggered=void 0,a&&(s[l]=a)),t.result}},simulate:function(t,e,i){var s=lt.extend(new lt.Event,i,{type:t,isSimulated:!0});lt.event.trigger(s,null,e),s.isDefaultPrevented()&&i.preventDefault()}}),lt.fn.extend({trigger:function(t,e){return this.each(function(){lt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?lt.event.trigger(t,e,i,!0):void 0}}),lt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){lt.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),lt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),at.focusin="onfocusin"in i,at.focusin||lt.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){lt.event.simulate(e,t.target,lt.event.fix(t))};lt.event.special[e]={setup:function(){var s=this.ownerDocument||this,n=At.access(s,e);n||s.addEventListener(t,i,!0),At.access(s,e,(n||0)+1)},teardown:function(){var s=this.ownerDocument||this,n=At.access(s,e)-1;n?At.access(s,e,n):(s.removeEventListener(t,i,!0),At.remove(s,e))}}});var we=i.location,_e=lt.now(),be=/\?/;lt.parseJSON=function(t){return JSON.parse(t+"")},lt.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(s){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||lt.error("Invalid XML: "+t),e};var xe=/#.*$/,Se=/([?&])_=[^&]*/,Te=/^(.*?):[ \t]*([^\r\n]*)$/gm,ke=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Pe=/^(?:GET|HEAD)$/,Me=/^\/\//,Ee={},Ae={},qe="*/".concat("*"),Oe=K.createElement("a");Oe.href=we.href,lt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we.href,type:"GET",isLocal:ke.test(we.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":lt.parseJSON,"text xml":lt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$($(t,lt.ajaxSettings),e):$(lt.ajaxSettings,t)},ajaxPrefilter:V(Ee),ajaxTransport:V(Ae),ajax:function(t,e){function s(t,e,s,a){var l,u,g,w,b,S=e;2!==_&&(_=2,h&&i.clearTimeout(h),n=void 0,r=a||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,s&&(w=Q(p,x,s)),w=X(p,w,x,l),l?(p.ifModified&&(b=x.getResponseHeader("Last-Modified"),b&&(lt.lastModified[o]=b),b=x.getResponseHeader("etag"),b&&(lt.etag[o]=b)),204===t||"HEAD"===p.type?S="nocontent":304===t?S="notmodified":(S=w.state,u=w.data,g=w.error,l=!g)):(g=S,!t&&S||(S="error",0>t&&(t=0))),x.status=t,x.statusText=(e||S)+"",l?y.resolveWith(d,[u,S,x]):y.rejectWith(d,[x,S,g]),x.statusCode(v),v=void 0,c&&f.trigger(l?"ajaxSuccess":"ajaxError",[x,p,l?u:g]),m.fireWith(d,[x,S]),c&&(f.trigger("ajaxComplete",[x,p]),--lt.active||lt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,o,r,a,h,l,c,u,p=lt.ajaxSetup({},e),d=p.context||p,f=p.context&&(d.nodeType||d.jquery)?lt(d):lt.event,y=lt.Deferred(),m=lt.Callbacks("once memory"),v=p.statusCode||{},g={},w={},_=0,b="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=Te.exec(r);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?r:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=w[i]=w[i]||t,g[t]=e),this},overrideMimeType:function(t){return _||(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||b;return n&&n.abort(e),s(0,e),this}};if(y.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,p.url=((t||p.url||we.href)+"").replace(xe,"").replace(Me,we.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=lt.trim(p.dataType||"*").toLowerCase().match(kt)||[""],null==p.crossDomain){l=K.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Oe.protocol+"//"+Oe.host!=l.protocol+"//"+l.host}catch(S){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=lt.param(p.data,p.traditional)),H(Ee,p,e,x),2===_)return x;c=lt.event&&p.global,c&&0===lt.active++&&lt.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Pe.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(be.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=Se.test(o)?o.replace(Se,"$1_="+_e++):o+(be.test(o)?"&":"?")+"_="+_e++)),p.ifModified&&(lt.lastModified[o]&&x.setRequestHeader("If-Modified-Since",lt.lastModified[o]),lt.etag[o]&&x.setRequestHeader("If-None-Match",lt.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+qe+"; q=0.01":""):p.accepts["*"]);for(u in p.headers)x.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(p.beforeSend.call(d,x,p)===!1||2===_))return x.abort();b="abort";for(u in{success:1,error:1,complete:1})x[u](p[u]);if(n=H(Ae,p,e,x)){if(x.readyState=1,c&&f.trigger("ajaxSend",[x,p]),2===_)return x;p.async&&p.timeout>0&&(h=i.setTimeout(function(){x.abort("timeout")},p.timeout));try{_=1,n.send(g,s)}catch(S){if(!(2>_))throw S;s(-1,S)}}else s(-1,"No Transport");return x},getJSON:function(t,e,i){return lt.get(t,e,i,"json")},getScript:function(t,e){return lt.get(t,void 0,e,"script")}}),lt.each(["get","post"],function(t,e){lt[e]=function(t,i,s,n){return lt.isFunction(i)&&(n=n||s,s=i,i=void 0),lt.ajax(lt.extend({url:t,type:e,dataType:n,data:i,success:s},lt.isPlainObject(t)&&t))}}),lt._evalUrl=function(t){return lt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},lt.fn.extend({wrapAll:function(t){var e;return lt.isFunction(t)?this.each(function(e){lt(this).wrapAll(t.call(this,e))}):(this[0]&&(e=lt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return lt.isFunction(t)?this.each(function(e){lt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=lt(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=lt.isFunction(t);return this.each(function(i){lt(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){lt.nodeName(this,"body")||lt(this).replaceWith(this.childNodes)}).end()}}),lt.expr.filters.hidden=function(t){return!lt.expr.filters.visible(t)},lt.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Ce=/%20/g,Re=/\[\]$/,Fe=/\r?\n/g,je=/^(?:submit|button|image|reset|file)$/i,Le=/^(?:input|select|textarea|keygen)/i;lt.param=function(t,e){var i,s=[],n=function(t,e){e=lt.isFunction(e)?e():null==e?"":e,s[s.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=lt.ajaxSettings&&lt.ajaxSettings.traditional),lt.isArray(t)||t.jquery&&!lt.isPlainObject(t))lt.each(t,function(){n(this.name,this.value)});else for(i in t)Y(i,t[i],e,n);return s.join("&").replace(Ce,"+")},lt.fn.extend({serialize:function(){return lt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=lt.prop(this,"elements");return t?lt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!lt(this).is(":disabled")&&Le.test(this.nodeName)&&!je.test(t)&&(this.checked||!Dt.test(t))}).map(function(t,e){var i=lt(this).val();return null==i?null:lt.isArray(i)?lt.map(i,function(t){return{name:e.name,value:t.replace(Fe,"\r\n")}}):{name:e.name,value:i.replace(Fe,"\r\n")}}).get()}}),lt.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var De={0:200,1223:204},ze=lt.ajaxSettings.xhr();at.cors=!!ze&&"withCredentials"in ze,at.ajax=ze=!!ze,lt.ajaxTransport(function(t){var e,s;return at.cors||ze&&!t.crossDomain?{send:function(n,o){var r,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)a[r]=t.xhrFields[r];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)a.setRequestHeader(r,n[r]);e=function(t){return function(){e&&(e=s=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,
"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?o(0,"error"):o(a.status,a.statusText):o(De[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),s=a.onerror=e("error"),void 0!==a.onabort?a.onabort=s:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout(function(){e&&s()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(h){if(e)throw h}},abort:function(){e&&e()}}:void 0}),lt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return lt.globalEval(t),t}}}),lt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),lt.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(s,n){e=lt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&n("error"===t.type?404:200,t.type)}),K.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Ie=[],Ne=/(=)\?(?=&|$)|\?\?/;lt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ie.pop()||lt.expando+"_"+_e++;return this[t]=!0,t}}),lt.ajaxPrefilter("json jsonp",function(t,e,s){var n,o,r,a=t.jsonp!==!1&&(Ne.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ne.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=lt.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ne,"$1"+n):t.jsonp!==!1&&(t.url+=(be.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return r||lt.error(n+" was not called"),r[0]},t.dataTypes[0]="json",o=i[n],i[n]=function(){r=arguments},s.always(function(){void 0===o?lt(i).removeProp(n):i[n]=o,t[n]&&(t.jsonpCallback=e.jsonpCallback,Ie.push(n)),r&&lt.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),at.createHTMLDocument=function(){var t=K.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),lt.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||(at.createHTMLDocument?K.implementation.createHTMLDocument(""):K);var s=gt.exec(t),n=!i&&[];return s?[e.createElement(s[1])]:(s=m([t],e,n),n&&n.length&&lt(n).remove(),lt.merge([],s.childNodes))};var Be=lt.fn.load;lt.fn.load=function(t,e,i){if("string"!=typeof t&&Be)return Be.apply(this,arguments);var s,n,o,r=this,a=t.indexOf(" ");return a>-1&&(s=lt.trim(t.slice(a)),t=t.slice(0,a)),lt.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(n="POST"),r.length>0&&lt.ajax({url:t,type:n||"GET",dataType:"html",data:e}).done(function(t){o=arguments,r.html(s?lt("<div>").append(lt.parseHTML(t)).find(s):t)}).always(i&&function(t,e){r.each(function(){i.apply(r,o||[t.responseText,e,t])})}),this},lt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){lt.fn[e]=function(t){return this.on(e,t)}}),lt.expr.filters.animated=function(t){return lt.grep(lt.timers,function(e){return t===e.elem}).length},lt.offset={setOffset:function(t,e,i){var s,n,o,r,a,h,l,c=lt.css(t,"position"),u=lt(t),p={};"static"===c&&(t.style.position="relative"),a=u.offset(),o=lt.css(t,"top"),h=lt.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(o+h).indexOf("auto")>-1,l?(s=u.position(),r=s.top,n=s.left):(r=parseFloat(o)||0,n=parseFloat(h)||0),lt.isFunction(e)&&(e=e.call(t,i,lt.extend({},a))),null!=e.top&&(p.top=e.top-a.top+r),null!=e.left&&(p.left=e.left-a.left+n),"using"in e?e.using.call(t,p):u.css(p)}},lt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){lt.offset.setOffset(this,t,e)});var e,i,s=this[0],n={top:0,left:0},o=s&&s.ownerDocument;if(o)return e=o.documentElement,lt.contains(e,s)?(n=s.getBoundingClientRect(),i=J(o),{top:n.top+i.pageYOffset-e.clientTop,left:n.left+i.pageXOffset-e.clientLeft}):n},position:function(){if(this[0]){var t,e,i=this[0],s={top:0,left:0};return"fixed"===lt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),lt.nodeName(t[0],"html")||(s=t.offset()),s.top+=lt.css(t[0],"borderTopWidth",!0),s.left+=lt.css(t[0],"borderLeftWidth",!0)),{top:e.top-s.top-lt.css(i,"marginTop",!0),left:e.left-s.left-lt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===lt.css(t,"position");)t=t.offsetParent;return t||ie})}}),lt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;lt.fn[t]=function(s){return Mt(this,function(t,s,n){var o=J(t);return void 0===n?o?o[e]:t[s]:void(o?o.scrollTo(i?o.pageXOffset:n,i?n:o.pageYOffset):t[s]=n)},t,s,arguments.length)}}),lt.each(["top","left"],function(t,e){lt.cssHooks[e]=O(at.pixelPosition,function(t,i){return i?(i=q(t,e),Kt.test(i)?lt(t).position()[e]+"px":i):void 0})}),lt.each({Height:"height",Width:"width"},function(t,e){lt.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,s){lt.fn[s]=function(s,n){var o=arguments.length&&(i||"boolean"!=typeof s),r=i||(s===!0||n===!0?"margin":"border");return Mt(this,function(e,i,s){var n;return lt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])):void 0===s?lt.css(e,i,r):lt.style(e,i,s,r)},e,o?s:void 0,o,null)}})}),lt.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,s){return this.on(e,t,i,s)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},size:function(){return this.length}}),lt.fn.andSelf=lt.fn.addBack,s=[],n=function(){return lt}.apply(e,s),!(void 0!==n&&(t.exports=n));var We=i.jQuery,Ue=i.$;return lt.noConflict=function(t){return i.$===lt&&(i.$=Ue),t&&i.jQuery===lt&&(i.jQuery=We),lt},o||(i.jQuery=i.$=lt),lt})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(root){"use strict";function Main(t){Tone=t()}function Module(t){t(Tone)}var Tone;/**
		 *  Tone.js
		 *  @author Yotam Mann
		 *  @license http://opensource.org/licenses/MIT MIT License
		 *  @copyright 2014-2015 Yotam Mann
		 */
Main(function(){function t(t){return void 0===t}function e(t){return"function"==typeof t}var i;if(t(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext),t(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t(AudioContext))throw new Error("Web Audio is not supported in this browser");i=new AudioContext,e(AudioContext.prototype.createGain)||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e(AudioContext.prototype.createDelay)||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),e(AudioContext.prototype.createPeriodicWave)||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),e(AudioBufferSourceNode.prototype.start)||(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn),e(AudioBufferSourceNode.prototype.stop)||(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),e(OscillatorNode.prototype.start)||(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn),e(OscillatorNode.prototype.stop)||(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff),e(OscillatorNode.prototype.setPeriodicWave)||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioNode.prototype._nativeConnect=AudioNode.prototype.connect,AudioNode.prototype.connect=function(e,i,s){if(e.input)Array.isArray(e.input)?(t(s)&&(s=0),this.connect(e.input[s])):this.connect(e.input,i,s);else try{e instanceof AudioNode?this._nativeConnect(e,i,s):this._nativeConnect(e,i)}catch(n){throw new Error("error connecting to node: "+e)}};var s=function(e,i){t(e)||1===e?this.input=this.context.createGain():e>1&&(this.input=new Array(e)),t(i)||1===i?this.output=this.context.createGain():i>1&&(this.output=new Array(e))};s.prototype.set=function(e,i,n){if(this.isObject(e))n=i;else if(this.isString(e)){var o={};o[e]=i,e=o}for(var r in e){i=e[r];var a=this;if(-1!==r.indexOf(".")){for(var h=r.split("."),l=0;l<h.length-1;l++)a=a[h[l]];r=h[h.length-1]}var c=a[r];t(c)||(s.Signal&&c instanceof s.Signal||s.Param&&c instanceof s.Param?c.value!==i&&(t(n)?c.value=i:c.rampTo(i,n)):c instanceof AudioParam?c.value!==i&&(c.value=i):c instanceof s?c.set(i):c!==i&&(a[r]=i))}return this},s.prototype.get=function(i){t(i)?i=this._collectDefaults(this.constructor):this.isString(i)&&(i=[i]);for(var n={},o=0;o<i.length;o++){var r=i[o],a=this,h=n;if(-1!==r.indexOf(".")){for(var l=r.split("."),c=0;c<l.length-1;c++){var u=l[c];h[u]=h[u]||{},h=h[u],a=a[u]}r=l[l.length-1]}var p=a[r];this.isObject(i[r])?h[r]=p.get():s.Signal&&p instanceof s.Signal?h[r]=p.value:s.Param&&p instanceof s.Param?h[r]=p.value:p instanceof AudioParam?h[r]=p.value:p instanceof s?h[r]=p.get():e(p)||t(p)||(h[r]=p)}return n},s.prototype._collectDefaults=function(e){var i=[];if(t(e.defaults)||(i=Object.keys(e.defaults)),!t(e._super))for(var s=this._collectDefaults(e._super),n=0;n<s.length;n++)-1===i.indexOf(s[n])&&i.push(s[n]);return i},s.prototype.toString=function(){for(var t in s){var i=t[0].match(/^[A-Z]$/),n=s[t]===this.constructor;if(e(s[t])&&i&&n)return t}return"Tone"},s.context=i,s.prototype.context=s.context,s.prototype.bufferSize=2048,s.prototype.blockTime=128/s.context.sampleRate,s.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this};var n=null;s.prototype.noGC=function(){return this.output.connect(n),this},AudioNode.prototype.noGC=function(){return this.connect(n),this},s.prototype.connect=function(t,e,i){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,i)):this.output.connect(t,e,i),this},s.prototype.disconnect=function(t){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].disconnect()):this.output.disconnect(),this},s.prototype.connectSeries=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},s.prototype.connectParallel=function(){var t=arguments[0];if(arguments.length>1)for(var e=1;e<arguments.length;e++){var i=arguments[e];t.connect(i)}return this},s.prototype.chain=function(){if(arguments.length>0)for(var t=this,e=0;e<arguments.length;e++){var i=arguments[e];t.connect(i),t=i}return this},s.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=s.prototype.chain,AudioNode.prototype.fan=s.prototype.fan,s.prototype.defaultArg=function(e,i){if(this.isObject(e)&&this.isObject(i)){var s={};for(var n in e)s[n]=this.defaultArg(i[n],e[n]);for(var o in i)s[o]=this.defaultArg(e[o],i[o]);return s}return t(e)?i:e},s.prototype.optionsObject=function(t,e,i){var s={};if(1===t.length&&this.isObject(t[0]))s=t[0];else for(var n=0;n<e.length;n++)s[e[n]]=t[n];return this.isUndef(i)?s:this.defaultArg(s,i)},s.prototype.isUndef=t,s.prototype.isFunction=e,s.prototype.isNumber=function(t){return"number"==typeof t},s.prototype.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},s.prototype.isBoolean=function(t){return"boolean"==typeof t},s.prototype.isArray=function(t){return Array.isArray(t)},s.prototype.isString=function(t){return"string"==typeof t},s.noOp=function(){},s.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},s.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},s.State={Started:"started",Stopped:"stopped",Paused:"paused"},s.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},s.prototype.dbToGain=function(t){return Math.pow(2,t/6)},s.prototype.gainToDb=function(t){return 20*(Math.log(t)/Math.LN10)},s.prototype.now=function(){return this.context.currentTime},s.extend=function(e,i){function n(){}t(i)&&(i=s),n.prototype=i.prototype,e.prototype=new n,e.prototype.constructor=e,e._super=i};var o=[];return s._initAudioContext=function(t){t(s.context),o.push(t)},s.setContext=function(t){s.prototype.context=t,s.context=t;for(var e=0;e<o.length;e++)o[e](t)},s.startMobile=function(){var t=s.context.createOscillator(),e=s.context.createGain();e.gain.value=0,t.connect(e),e.connect(s.context.destination);var i=s.context.currentTime;t.start(i),t.stop(i+1)},s._initAudioContext(function(t){s.prototype.blockTime=128/t.sampleRate,n=t.createGain(),n.gain.value=0,n.connect(t.destination)}),s.version="r6",console.log("%c * Tone.js "+s.version+" * ","background: #000; color: #fff"),s}),Module(function(t){return t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,i,s){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,i,s),this},t.SignalBase}),Module(function(t){return t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,i=this._curve.length;i>e;e++){var s=e/i*2-1;this._curve[e]=t(s,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(-1===["none","2x","4x"].indexOf(t))throw new Error("invalid oversampling: "+t);this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}),Module(function(Tone){function getTransportBpm(){return Tone.Transport&&Tone.Transport.bpm?Tone.Transport.bpm.value:120}function getTransportTimeSignature(){return Tone.Transport&&Tone.Transport.timeSignature?Tone.Transport.timeSignature:4}function toNotationHelper(t,e,i,s){for(var n=this.toSeconds(t),o=this.notationToSeconds(s[s.length-1],e,i),r="",a=0;a<s.length;a++){var h=this.notationToSeconds(s[a],e,i),l=n/h,c=1e-6;if(c>1-l%1&&(l+=c),l=Math.floor(l),l>0){if(r+=1===l?s[a]:l.toString()+"*"+s[a],n-=l*h,o>n)break;r+=" + "}}return""===r&&(r="0"),r}Tone.Type={Default:"number",Time:"time",Frequency:"frequency",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",TransportTime:"transportTime",Ticks:"tick",Note:"note",Milliseconds:"milliseconds",Notation:"notation"},Tone.prototype.isNowRelative=function(){var t=new RegExp(/^\s*\+(.)+/i);return function(e){return t.test(e)}}(),Tone.prototype.isTicks=function(){var t=new RegExp(/^\d+i$/i);return function(e){return t.test(e)}}(),Tone.prototype.isNotation=function(){var t=new RegExp(/^[0-9]+[mnt]$/i);return function(e){return t.test(e)}}(),Tone.prototype.isTransportTime=function(){var t=new RegExp(/^(\d+(\.\d+)?\:){1,2}(\d+(\.\d+)?)?$/i);return function(e){return t.test(e)}}(),Tone.prototype.isNote=function(){var t=new RegExp(/^[a-g]{1}(b|#|x|bb)?-?[0-9]+$/i);return function(e){return t.test(e)}}(),Tone.prototype.isFrequency=function(){var t=new RegExp(/^\d*\.?\d+hz$/i);return function(e){return t.test(e)}}(),Tone.prototype.notationToSeconds=function(t,e,i){e=this.defaultArg(e,getTransportBpm()),i=this.defaultArg(i,getTransportTimeSignature());var s=60/e;"1n"===t&&(t="1m");var n=parseInt(t,10),o=0;0===n&&(o=0);var r=t.slice(-1);return o="t"===r?4/n*2/3:"n"===r?4/n:"m"===r?n*i:0,s*o},Tone.prototype.transportTimeToSeconds=function(t,e,i){e=this.defaultArg(e,getTransportBpm()),i=this.defaultArg(i,getTransportTimeSignature());var s=0,n=0,o=0,r=t.split(":");2===r.length?(s=parseFloat(r[0]),n=parseFloat(r[1])):1===r.length?n=parseFloat(r[0]):3===r.length&&(s=parseFloat(r[0]),n=parseFloat(r[1]),o=parseFloat(r[2]));var a=s*i+n+o/4;return a*(60/e)},Tone.prototype.ticksToSeconds=function(t,e){if(this.isUndef(Tone.Transport))return 0;t=parseFloat(t),e=this.defaultArg(e,getTransportBpm());var i=60/e/Tone.Transport.PPQ;return i*t},Tone.prototype.frequencyToSeconds=function(t){return 1/parseFloat(t)},Tone.prototype.samplesToSeconds=function(t){return t/this.context.sampleRate},Tone.prototype.secondsToSamples=function(t){return t*this.context.sampleRate},Tone.prototype.secondsToTransportTime=function(t,e,i){e=this.defaultArg(e,getTransportBpm()),i=this.defaultArg(i,getTransportTimeSignature());var s=60/e,n=t/s,o=Math.floor(n/i),r=n%1*4;n=Math.floor(n)%i;var a=[o,n,r];return a.join(":")},Tone.prototype.secondsToFrequency=function(t){return 1/t},Tone.prototype.toTransportTime=function(t,e,i){var s=this.toSeconds(t);return this.secondsToTransportTime(s,e,i)},Tone.prototype.toFrequency=function(t,e){return this.isFrequency(t)?parseFloat(t):this.isNotation(t)||this.isTransportTime(t)?this.secondsToFrequency(this.toSeconds(t,e)):this.isNote(t)?this.noteToFrequency(t):t},Tone.prototype.toTicks=function(t){if(this.isUndef(Tone.Transport))return 0;var e=Tone.Transport.bpm.value,i=0;if(this.isNowRelative(t))t=t.replace("+",""),i=Tone.Transport.ticks;else if(this.isUndef(t))return Tone.Transport.ticks;var s=this.toSeconds(t),n=60/e,o=s/n,r=o*Tone.Transport.PPQ;return Math.round(r+i)},Tone.prototype.toSamples=function(t){var e=this.toSeconds(t);return Math.round(e*this.context.sampleRate)},Tone.prototype.toSeconds=function(time,now){if(now=this.defaultArg(now,this.now()),this.isNumber(time))return time;if(this.isString(time)){var plusTime=0;this.isNowRelative(time)&&(time=time.replace("+",""),plusTime=now);var betweenParens=time.match(/\(([^)(]+)\)/g);if(betweenParens)for(var j=0;j<betweenParens.length;j++){var symbol=betweenParens[j].replace(/[\(\)]/g,""),symbolVal=this.toSeconds(symbol);time=time.replace(betweenParens[j],symbolVal)}if(-1!==time.indexOf("@")){var quantizationSplit=time.split("@");if(this.isUndef(Tone.Transport))throw new Error("quantization requires Tone.Transport");var toQuantize=quantizationSplit[0].trim();""===toQuantize&&(toQuantize=void 0),plusTime>0&&(toQuantize="+"+toQuantize,plusTime=0);var subdivision=quantizationSplit[1].trim();time=Tone.Transport.quantize(toQuantize,subdivision)}else{var components=time.split(/[\(\)\-\+\/\*]/);if(components.length>1){for(var originalTime=time,i=0;i<components.length;i++){var symb=components[i].trim();if(""!==symb){var val=this.toSeconds(symb);time=time.replace(symb,val)}}try{time=eval(time)}catch(e){throw new EvalError("cannot evaluate Time: "+originalTime)}}else time=this.isNotation(time)?this.notationToSeconds(time):this.isTransportTime(time)?this.transportTimeToSeconds(time):this.isFrequency(time)?this.frequencyToSeconds(time):this.isTicks(time)?this.ticksToSeconds(time):parseFloat(time)}return time+plusTime}return now},Tone.prototype.toNotation=function(t,e,i){var s=["1m","2n","4n","8n","16n","32n","64n","128n"],n=toNotationHelper.call(this,t,e,i,s),o=["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"],r=toNotationHelper.call(this,t,e,i,o);return r.split("+").length<n.split("+").length?r:n},Tone.prototype.fromUnits=function(t,e){if(!this.convert&&!this.isUndef(this.convert))return t;switch(e){case Tone.Type.Time:return this.toSeconds(t);case Tone.Type.Frequency:return this.toFrequency(t);case Tone.Type.Decibels:return this.dbToGain(t);case Tone.Type.NormalRange:return Math.min(Math.max(t,0),1);case Tone.Type.AudioRange:return Math.min(Math.max(t,-1),1);case Tone.Type.Positive:return Math.max(t,0);default:return t}},Tone.prototype.toUnits=function(t,e){if(!this.convert&&!this.isUndef(this.convert))return t;switch(e){case Tone.Type.Decibels:return this.gainToDb(t);default:return t}};var noteToScaleIndex={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return Tone.A4=440,Tone.prototype.noteToFrequency=function(t){var e=t.split(/(-?\d+)/);if(3===e.length){var i=noteToScaleIndex[e[0].toLowerCase()],s=e[1],n=i+12*(parseInt(s,10)+1);return this.midiToFrequency(n)}return 0},Tone.prototype.frequencyToNote=function(t){var e=Math.log(t/Tone.A4)/Math.LN2,i=Math.round(12*e)+57,s=Math.floor(i/12);0>s&&(i+=-12*s);var n=scaleIndexToNote[i%12];return n+s.toString()},Tone.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},Tone.prototype.midiToNote=function(t){var e=Math.floor(t/12)-1,i=t%12;return scaleIndexToNote[i]+e},Tone.prototype.noteToMidi=function(t){var e=t.split(/(\d+)/);if(3===e.length){var i=noteToScaleIndex[e[0].toLowerCase()],s=e[1];return i+12*(parseInt(s,10)+1)}return 0},Tone.prototype.midiToFrequency=function(t){return Tone.A4*Math.pow(2,(t-69)/12)},Tone}),Module(function(t){return t.Param=function(){var e=this.optionsObject(arguments,["param","units","convert"],t.Param.defaults);this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(t){var e=this._fromUnits(t);this._param.value=e}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.setValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return this._param.setValueAtTime(e,t),this},t.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Param.prototype.exponentialRampToValue=function(t,e){var i=this.now(),s=this.value;return this.setValueAtTime(Math.max(s,this._minOutput),i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.linearRampToValue=function(t,e){var i=this.now();return this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,i){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),i=Math.max(this._minOutput,i),this._param.setTargetAtTime(t,this.toSeconds(e),i),this},t.Param.prototype.setValueCurveAtTime=function(t,e,i){for(var s=0;s<t.length;s++)t[s]=this._fromUnits(t[s]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(i)),this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.rampTo=function(e,i){return i=this.defaultArg(i,0),this.units===t.Type.Frequency||this.units===t.Type.BPM?this.exponentialRampToValue(e,i):this.linearRampToValue(e,i),this},t.Param.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param=null,this},t.Param}),Module(function(t){return t.Gain=function(){var e=this.optionsObject(arguments,["gain","units"],t.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.Gain}),Module(function(t){return t.Signal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this.output=this._gain=this.context.createGain(),e.param=this._gain.gain,t.Param.call(this,e),this.input=this._param=this._gain.gain,t.Signal._constant.chain(this._gain)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},t.Signal._constant=null,t._initAudioContext(function(e){for(var i=e.createBuffer(1,128,e.sampleRate),s=i.getChannelData(0),n=0;n<s.length;n++)s[n]=1;t.Signal._constant=e.createBufferSource(),t.Signal._constant.channelCount=1,t.Signal._constant.channelCountMode="explicit",t.Signal._constant.buffer=i,t.Signal._constant.loop=!0,t.Signal._constant.start(0),t.Signal._constant.noGC()}),t.Signal}),Module(function(t){return t.Timeline=function(){var e=this.optionsObject(arguments,["memory"],t.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.addEvent=function(t){if(this.isUndef(t.time))throw new Error("events must have a time attribute");if(t.time=this.toSeconds(t.time),this._timeline.length){var e=this._search(t.time);this._timeline.splice(e+1,0,t)}else this._timeline.push(t);if(this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},t.Timeline.prototype.removeEvent=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.getEvent=function(t){t=this.toSeconds(t);var e=this._search(t);return-1!==e?this._timeline[e]:null},t.Timeline.prototype.getEventAfter=function(t){t=this.toSeconds(t);var e=this._search(t);return e+1<this._timeline.length?this._timeline[e+1]:null},t.Timeline.prototype.getEventBefore=function(t){t=this.toSeconds(t);var e=this._search(t);return e-1>=0?this._timeline[e-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){t=this.toSeconds(t);var e=this._search(t);e>=0?this._timeline=this._timeline.slice(0,e):this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){if(this._timeline.length){t=this.toSeconds(t);var e=this._search(t);e>=0&&(this._timeline=this._timeline.slice(e+1))}return this},t.Timeline.prototype._search=function(t){for(var e=0,i=this._timeline.length,s=i;s>=e&&i>e;){var n=Math.floor(e+(s-e)/2),o=this._timeline[n];if(o.time===t){for(var r=n;r<this._timeline.length;r++){var a=this._timeline[r];a.time===t&&(n=r)}return n}o.time>t?s=n-1:o.time<t&&(e=n+1)}return e-1},t.Timeline.prototype._iterate=function(t,e,i){this._iterating=!0,e=this.defaultArg(e,0),i=this.defaultArg(i,this._timeline.length-1);for(var s=e;i>=s;s++)t(this._timeline[s]);if(this._iterating=!1,this._toRemove.length>0){for(var n=0;n<this._toRemove.length;n++){var o=this._timeline.indexOf(this._toRemove[n]);-1!==o&&this._timeline.splice(o,1)}this._toRemove=[]}},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){t=this.toSeconds(t);var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},t.Timeline.prototype.forEachAfter=function(t,e){t=this.toSeconds(t);var i=this._search(t);return this._iterate(e,i+1),this},t.Timeline.prototype.forEachFrom=function(t,e){t=this.toSeconds(t);for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){t=this.toSeconds(t);var i=this._search(t);return-1!==i&&this._iterate(function(i){i.time===t&&e(i)},0,i),this},t.Timeline.prototype.dispose=function(){t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},t.Timeline}),Module(function(t){return t.TimelineSignal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);t.Signal.apply(this,e),e.param=this._param,t.Param.call(this,e),this._events=new t.Timeline(10),this._initial=this._fromUnits(this._param.value)},t.extend(t.TimelineSignal,t.Param),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(t){var e=this._fromUnits(t);this._initial=e,this._param.value=e}}),t.TimelineSignal.prototype.setValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Set,value:e,time:i}),this._param.setValueAtTime(e,i),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,i){return e=this._fromUnits(e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Linear,value:e,time:i}),this._param.linearRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,i){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Exponential,value:e,time:i}),this._param.exponentialRampToValueAtTime(e,i),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,i,s){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),s=Math.max(this._minOutput,s),i=this.toSeconds(i),this._events.addEvent({type:t.TimelineSignal.Type.Target,value:e,time:i,constant:s}),this._param.setTargetAtTime(e,i,s),this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return this._events.cancel(t),this._param.cancelScheduledValues(this.toSeconds(t)),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var i=this.getValueAtTime(e),s=this._searchAfter(e);return s&&(this.cancelScheduledValues(e),s.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(i,e):s.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(i,e)),this.setValueAtTime(i,e),this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.linearRampToValueAtTime(t,i),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,i){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,i),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.getEvent(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getEventAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){var i=this._searchAfter(e),s=this._searchBefore(e),n=this._initial;if(null===s)n=this._initial;else if(s.type===t.TimelineSignal.Type.Target){var o,r=this._events.getEventBefore(s.time);o=null===r?this._initial:r.value,n=this._exponentialApproach(s.time,o,s.value,s.constant,e)}else n=null===i?s.value:i.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(s.time,s.value,i.time,i.value,e):i.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(s.time,s.value,i.time,i.value,e):s.value;return n},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,i,s,n){return i+(e-i)*Math.exp(-(n-t)/s)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,i,s,n){return e+(s-e)*((n-t)/(i-t))},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,i,s,n){return e=Math.max(this._minOutput,e),e*Math.pow(s/e,(n-t)/(i-t))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),t.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}),Module(function(t){return t.Pow=function(e){this._exp=this.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}),Module(function(t){return t.Envelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve=t.Envelope.Type.Linear,this._releaseCurve=t.Envelope.Type.Exponential,this._minOutput=1e-5,this._sig=this.output=new t.TimelineSignal,this._sig.setValueAtTime(this._minOutput,0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve},t.extend(t.Envelope),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",releaseCurve:"exponential"},t.Envelope.prototype._timeMult=.25,Object.defineProperty(t.Envelope.prototype,"value",{get:function(){return this._sig.value}}),Object.defineProperty(t.Envelope.prototype,"attackCurve",{get:function(){return this._attackCurve},set:function(e){if(e!==t.Envelope.Type.Linear&&e!==t.Envelope.Type.Exponential)throw Error('attackCurve must be either "linear" or "exponential". Invalid type: ',e);this._attackCurve=e}}),Object.defineProperty(t.Envelope.prototype,"releaseCurve",{get:function(){return this._releaseCurve},set:function(e){if(e!==t.Envelope.Type.Linear&&e!==t.Envelope.Type.Exponential)throw Error('releaseCurve must be either "linear" or "exponential". Invalid type: ',e);this._releaseCurve=e}}),t.Envelope.prototype.triggerAttack=function(e,i){var s=this.now()+this.blockTime;e=this.toSeconds(e,s);var n=this.toSeconds(this.attack)+e,o=this.toSeconds(this.decay);return i=this.defaultArg(i,1),this._attackCurve===t.Envelope.Type.Linear?this._sig.linearRampToValueBetween(i,e,n):this._sig.exponentialRampToValueBetween(i,e,n),this._sig.setValueAtTime(i,n),this._sig.exponentialRampToValueAtTime(this.sustain*i,n+o),this},t.Envelope.prototype.triggerRelease=function(e){var i=this.now()+this.blockTime;e=this.toSeconds(e,i);var s=this.toSeconds(this.release);return this._releaseCurve===t.Envelope.Type.Linear?this._sig.linearRampToValueBetween(this._minOutput,e,e+s):this._sig.exponentialRampToValueBetween(this._minOutput,e,s+e),this},t.Envelope.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.connect=t.Signal.prototype.connect,t.Envelope.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this},t.Envelope.Phase={Attack:"attack",Decay:"decay",Sustain:"sustain",Release:"release",Standby:"standby"},t.Envelope.Type={Linear:"linear",Exponential:"exponential"},t.Envelope}),Module(function(t){return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return this.input.dispose(),this.input=null,t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}),Module(function(t){return t.Analyser=function(){var e=this.optionsObject(arguments,["size","type"],t.Analyser.defaults);this._analyser=this.input=this.context.createAnalyser(),this._type=e.type,this._returnType=e.returnType,this._buffer=null,this.size=e.size,this.type=e.type,this.returnType=e.returnType,this.minDecibels=e.minDecibels,this.maxDecibels=e.maxDecibels},t.extend(t.Analyser),t.Analyser.defaults={size:2048,returnType:"byte",type:"fft",smoothing:.8,maxDecibels:-30,minDecibels:-100},t.Analyser.Type={Waveform:"waveform",FFT:"fft"},t.Analyser.ReturnType={Byte:"byte",Float:"float"},t.Analyser.prototype.analyse=function(){return this._type===t.Analyser.Type.FFT?this._returnType===t.Analyser.ReturnType.Byte?this._analyser.getByteFrequencyData(this._buffer):this._analyser.getFloatFrequencyData(this._buffer):this._type===t.Analyser.Type.Waveform&&(this._returnType===t.Analyser.ReturnType.Byte?this._analyser.getByteTimeDomainData(this._buffer):this._analyser.getFloatTimeDomainData(this._buffer)),this._buffer},Object.defineProperty(t.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this.type=this._type}}),Object.defineProperty(t.Analyser.prototype,"returnType",{get:function(){return this._returnType},set:function(e){if(e===t.Analyser.ReturnType.Byte)this._buffer=new Uint8Array(this._analyser.frequencyBinCount);else{if(e!==t.Analyser.ReturnType.Float)throw new Error("Invalid Return Type: "+e);this._buffer=new Float32Array(this._analyser.frequencyBinCount)}this._returnType=e}}),Object.defineProperty(t.Analyser.prototype,"type",{get:function(){return this._type},set:function(e){
if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new Error("Invalid Type: "+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),Object.defineProperty(t.Analyser.prototype,"minDecibels",{get:function(){return this._analyser.minDecibels},set:function(t){this._analyser.minDecibels=t}}),Object.defineProperty(t.Analyser.prototype,"maxDecibels",{get:function(){return this._analyser.maxDecibels},set:function(t){this._analyser.maxDecibels=t}}),t.Analyser.prototype.dispose=function(){t.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}),Module(function(t){return t.Compressor=function(){var e=this.optionsObject(arguments,["threshold","ratio"],t.Compressor.defaults);this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=this._compressor.threshold,this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=this._compressor.knee,this.ratio=this._compressor.ratio,this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(e)},t.extend(t.Compressor),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold=null,this.ratio=null,this.knee=null,this},t.Compressor}),Module(function(t){return t.Add=function(e){t.call(this,2,0),this._sum=this.input[0]=this.input[1]=this.output=this.context.createGain(),this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Add}),Module(function(t){return t.Multiply=function(e){t.call(this,2,0),this._mult=this.input[0]=this.output=this.context.createGain(),this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.disconnect(),this._mult=null,this._param=null,this},t.Multiply}),Module(function(t){return t.Negate=function(){this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}),Module(function(t){return t.Subtract=function(e){t.call(this,2,0),this._sum=this.input[0]=this.output=this.context.createGain(),this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},t.Subtract}),Module(function(t){return t.GreaterThanZero=function(){this._thresh=this.output=new t.WaveShaper(function(t){return 0>=t?0:1}),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}),Module(function(t){return t.EqualZero=function(){this._scale=this.input=new t.Multiply(1e4),this._thresh=new t.WaveShaper(function(t){return 0===t?1:0},128),this._gtz=this.output=new t.GreaterThanZero,this._scale.chain(this._thresh,this._gtz)},t.extend(t.EqualZero,t.SignalBase),t.EqualZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.EqualZero}),Module(function(t){return t.Equal=function(e){t.call(this,2,0),this._sub=this.input[0]=new t.Subtract(e),this._equals=this.output=new t.EqualZero,this._sub.connect(this._equals),this.input[1]=this._sub.input[1]},t.extend(t.Equal,t.SignalBase),Object.defineProperty(t.Equal.prototype,"value",{get:function(){return this._sub.value},set:function(t){this._sub.value=t}}),t.Equal.prototype.dispose=function(){return t.prototype.dispose.call(this),this._equals.dispose(),this._equals=null,this._sub.dispose(),this._sub=null,this},t.Equal}),Module(function(t){t.Select=function(i){i=this.defaultArg(i,2),t.call(this,i,1),this.gate=new t.Signal(0),this._readOnly("gate");for(var s=0;i>s;s++){var n=new e(s);this.input[s]=n,this.gate.connect(n.selecter),n.connect(this.output)}},t.extend(t.Select,t.SignalBase),t.Select.prototype.select=function(t,e){return t=Math.floor(t),this.gate.setValueAtTime(t,this.toSeconds(e)),this},t.Select.prototype.dispose=function(){this._writable("gate"),this.gate.dispose(),this.gate=null;for(var e=0;e<this.input.length;e++)this.input[e].dispose(),this.input[e]=null;return t.prototype.dispose.call(this),this};var e=function(e){this.selecter=new t.Equal(e),this.gate=this.input=this.output=this.context.createGain(),this.selecter.connect(this.gate.gain)};return t.extend(e),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.selecter.dispose(),this.gate.disconnect(),this.selecter=null,this.gate=null},t.Select}),Module(function(t){return t.IfThenElse=function(){t.call(this,3,0),this._selector=this.output=new t.Select(2),this["if"]=this.input[0]=this._selector.gate,this.then=this.input[1]=this._selector.input[1],this["else"]=this.input[2]=this._selector.input[0]},t.extend(t.IfThenElse,t.SignalBase),t.IfThenElse.prototype.dispose=function(){return t.prototype.dispose.call(this),this._selector.dispose(),this._selector=null,this["if"]=null,this.then=null,this["else"]=null,this},t.IfThenElse}),Module(function(t){return t.OR=function(e){e=this.defaultArg(e,2),t.call(this,e,0),this._sum=this.context.createGain(),this._gtz=this.output=new t.GreaterThanZero;for(var i=0;e>i;i++)this.input[i]=this._sum;this._sum.connect(this._gtz)},t.extend(t.OR,t.SignalBase),t.OR.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this._sum.disconnect(),this._sum=null,this},t.OR}),Module(function(t){return t.AND=function(e){e=this.defaultArg(e,2),t.call(this,e,0),this._equals=this.output=new t.Equal(e);for(var i=0;e>i;i++)this.input[i]=this._equals},t.extend(t.AND,t.SignalBase),t.AND.prototype.dispose=function(){return t.prototype.dispose.call(this),this._equals.dispose(),this._equals=null,this},t.AND}),Module(function(t){return t.NOT=t.EqualZero,t.NOT}),Module(function(t){return t.GreaterThan=function(e){t.call(this,2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}),Module(function(t){return t.LessThan=function(e){t.call(this,2,0),this._neg=this.input[0]=new t.Negate,this._gt=this.output=new t.GreaterThan,this._rhNeg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._neg.connect(this._gt),this._param.connect(this._rhNeg),this._rhNeg.connect(this._gt,0,1)},t.extend(t.LessThan,t.Signal),t.LessThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._gt.dispose(),this._gt=null,this._rhNeg.dispose(),this._rhNeg=null,this._param.dispose(),this._param=null,this},t.LessThan}),Module(function(t){return t.Abs=function(){t.call(this,1,0),this._ltz=new t.LessThan(0),this._switch=this.output=new t.Select(2),this._negate=new t.Negate,this.input.connect(this._switch,0,0),this.input.connect(this._negate),this._negate.connect(this._switch,0,1),this.input.chain(this._ltz,this._switch.gate)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.prototype.dispose.call(this),this._switch.dispose(),this._switch=null,this._ltz.dispose(),this._ltz=null,this._negate.dispose(),this._negate=null,this},t.Abs}),Module(function(t){return t.Max=function(e){t.call(this,2,0),this.input[0]=this.context.createGain(),this._param=this.input[1]=new t.Signal(e),this._ifThenElse=this.output=new t.IfThenElse,this._gt=new t.GreaterThan,this.input[0].chain(this._gt,this._ifThenElse["if"]),this.input[0].connect(this._ifThenElse.then),this._param.connect(this._ifThenElse["else"]),this._param.connect(this._gt,0,1)},t.extend(t.Max,t.Signal),t.Max.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._ifThenElse.dispose(),this._gt.dispose(),this._param=null,this._ifThenElse=null,this._gt=null,this},t.Max}),Module(function(t){return t.Min=function(e){t.call(this,2,0),this.input[0]=this.context.createGain(),this._ifThenElse=this.output=new t.IfThenElse,this._lt=new t.LessThan,this._param=this.input[1]=new t.Signal(e),this.input[0].chain(this._lt,this._ifThenElse["if"]),this.input[0].connect(this._ifThenElse.then),this._param.connect(this._ifThenElse["else"]),this._param.connect(this._lt,0,1)},t.extend(t.Min,t.Signal),t.Min.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._ifThenElse.dispose(),this._lt.dispose(),this._param=null,this._ifThenElse=null,this._lt=null,this},t.Min}),Module(function(t){return t.Modulo=function(e){t.call(this,1,1),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){var i=Math.floor((e+1e-4)/t);return i})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}),Module(function(t){return t.AudioToGain=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}),Module(function(t){function e(t,e,i){var s=new t;return i._eval(e[0]).connect(s,0,0),i._eval(e[1]).connect(s,0,1),s}function i(t,e,i){var s=new t;return i._eval(e[0]).connect(s,0,0),s}function s(t){return t?parseFloat(t):void 0}function n(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){var t=this._replacements(Array.prototype.slice.call(arguments)),e=this._parseInputs(t);this._nodes=[],this.input=new Array(e);for(var i=0;e>i;i++)this.input[i]=this.context.createGain();var s,n=this._parseTree(t);try{s=this._eval(n)}catch(o){throw this._disposeNodes(),new Error("Could evaluate expression: "+t)}this.output=s},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){var i=new t.Signal(s(e));return i}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[s(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:i.bind(this,t.Abs)},min:{regexp:/^min/,method:e.bind(this,t.Min)},max:{regexp:/^max/,method:e.bind(this,t.Max)},"if":{regexp:/^if/,method:function(e,i){var s=new t.IfThenElse;return i._eval(e[0]).connect(s["if"]),i._eval(e[1]).connect(s.then),i._eval(e[2]).connect(s["else"]),s}},gt0:{regexp:/^gt0/,method:i.bind(this,t.GreaterThanZero)},eq0:{regexp:/^eq0/,method:i.bind(this,t.EqualZero)},mod:{regexp:/^mod/,method:function(e,i){var s=n(e[1]),o=new t.Modulo(s);return i._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,i){var s=n(e[1]),o=new t.Pow(s);return i._eval(e[0]).connect(o),o}},a2g:{regexp:/^a2g/,method:function(e,i){var s=new t.AudioToGain;return i._eval(e[0]).connect(s),s}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(s,n){return 1===s.length?i(t.Negate,s,n):e(t.Subtract,s,n)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)},">":{regexp:/^\>/,precedence:2,method:e.bind(this,t.GreaterThan)},"<":{regexp:/^</,precedence:2,method:e.bind(this,t.LessThan)},"==":{regexp:/^==/,precedence:3,method:e.bind(this,t.Equal)},"&&":{regexp:/^&&/,precedence:4,method:e.bind(this,t.AND)},"||":{regexp:/^\|\|/,precedence:5,method:e.bind(this,t.OR)}},unary:{"-":{regexp:/^\-/,method:i.bind(this,t.Negate)},"!":{regexp:/^\!/,method:i.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\$\d/g),i=0;if(null!==e)for(var s=0;s<e.length;s++){var n=parseInt(e[s].substr(1))+1;i=Math.max(i,n)}return i},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),i=0;i<t.length;i++)e=e.replace(/\%/i,t[i]);return e},t.Expr.prototype._tokenize=function(e){function i(e){for(var i in t.Expr._Expressions){var s=t.Expr._Expressions[i];for(var n in s){var o=s[n],r=o.regexp,a=e.match(r);if(null!==a)return{type:i,value:a[0],method:o.method}}}throw new SyntaxError("Unexpected token "+e)}for(var s=-1,n=[];e.length>0;){e=e.trim();var o=i(e);n.push(o),e=e.substr(o.value.length)}return{next:function(){return n[++s]},peek:function(){return n[s+1]}}},t.Expr.prototype._parseTree=function(e){function i(t,e){return!c(t)&&"glue"===t.type&&t.value===e}function s(e,i,s){var n=!1,o=t.Expr._Expressions[i];if(!c(e))for(var r in o){var a=o[r];if(a.regexp.test(e.value)){if(c(s))return!0;if(a.precedence===s)return!0}}return n}function n(t){c(t)&&(t=5);var e;e=0>t?o():n(t-1);for(var i=l.peek();s(i,"binary",t);)i=l.next(),e={operator:i.value,method:i.method,args:[e,n(t)]},i=l.peek();return e}function o(){var t,e;return t=l.peek(),s(t,"unary")?(t=l.next(),e=o(),{operator:t.value,method:t.method,args:[e]}):r()}function r(){var t,e;if(t=l.peek(),c(t))throw new SyntaxError("Unexpected termination of expression");if("func"===t.type)return t=l.next(),a(t);if("value"===t.type)return t=l.next(),{method:t.method,args:t.value};if(i(t,"(")){if(l.next(),e=n(),t=l.next(),!i(t,")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Parse error, cannot process token "+t.value)}function a(t){var e,s=[];if(e=l.next(),!i(e,"("))throw new SyntaxError('Expected ( in a function call "'+t.value+'"');if(e=l.peek(),i(e,")")||(s=h()),e=l.next(),!i(e,")"))throw new SyntaxError('Expected ) in a function call "'+t.value+'"');return{method:t.method,args:s,name:name}}function h(){for(var t,e,s=[];;){if(e=n(),c(e))break;if(s.push(e),t=l.peek(),!i(t,","))break;l.next()}return s}var l=this._tokenize(e),c=this.isUndef.bind(this);return n()},t.Expr.prototype._eval=function(t){if(!this.isUndef(t)){var e=t.method(t.args,this);return this._nodes.push(e),e}},t.Expr.prototype._disposeNodes=function(){for(var t=0;t<this._nodes.length;t++){var e=this._nodes[t];this.isFunction(e.dispose)?e.dispose():this.isFunction(e.disconnect)&&e.disconnect(),e=null,this._nodes[t]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeNodes()},t.Expr}),Module(function(t){return t.EqualPowerGain=function(){this._eqPower=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:this.equalPowerScale(t)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}),Module(function(t){return t.CrossFade=function(e){t.call(this,2,1),this.a=this.input[0]=this.context.createGain(),this.b=this.input[1]=this.context.createGain(),this.fade=new t.Signal(this.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade),t.CrossFade.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.disconnect(),this.a=null,this.b.disconnect(),this.b=null,this},t.CrossFade}),Module(function(t){return t.Filter=function(){t.call(this);var e=this.optionsObject(arguments,["frequency","type","rolloff"],t.Filter.defaults);this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!1}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly(["detune","frequency","gain","Q"])},t.extend(t.Filter),t.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,"type",{get:function(){return this._type},set:function(t){var e=["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"];if(-1===e.indexOf(t))throw new Error("Tone.Filter does not have filter type "+t);this._type=t;for(var i=0;i<this._filters.length;i++)this._filters[i].type=t}}),Object.defineProperty(t.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){t=parseInt(t,10);var e=[-12,-24,-48,-96],i=e.indexOf(t);if(-1===i)throw new Error("Filter rolloff can only be -12, -24, -48 or -96");i+=1,this._rolloff=t,this.input.disconnect();for(var s=0;s<this._filters.length;s++)this._filters[s].disconnect(),this._filters[s]=null;this._filters=new Array(i);for(var n=0;i>n;n++){var o=this.context.createBiquadFilter();o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[n]=o}var r=[this.input].concat(this._filters).concat([this.output]);this.connectSeries.apply(this,r)}}),t.Filter.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}),Module(function(t){return t.MultibandSplit=function(){var e=this.optionsObject(arguments,["lowFrequency","highFrequency"],t.MultibandSplit.defaults);this.input=this.context.createGain(),this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this.mid=this.output[1]=new t.Filter(0,"lowpass"),this.high=this.output[2]=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandSplit),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}),Module(function(t){return t.EQ3=function(){var e=this.optionsObject(arguments,["low","mid","high"],t.EQ3.defaults);this.output=this.context.createGain(),this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},t.extend(t.EQ3),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}),Module(function(t){return t.Scale=function(e,i){this._outputMin=this.defaultArg(e,0),this._outputMax=this.defaultArg(i,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}),Module(function(t){return t.ScaleExp=function(e,i,s){this._scale=this.output=new t.Scale(e,i),this._exp=this.input=new t.Pow(this.defaultArg(s,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}),Module(function(t){return t.FeedbackCombFilter=function(){t.call(this);var e=this.optionsObject(arguments,["delayTime","resonance"],t.FeedbackCombFilter.defaults);this._delay=this.input=this.output=this.context.createDelay(1),this.delayTime=new t.Param({param:this._delay.delayTime,value:e.delayTime,units:t.Type.Time}),this._feedback=this.context.createGain(),this.resonance=new t.Param({param:this._feedback.gain,value:e.resonance,units:t.Type.NormalRange}),this._delay.chain(this._feedback,this._delay),this._readOnly(["resonance","delayTime"])},t.extend(t.FeedbackCombFilter),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.disconnect(),this._delay=null,this.delayTime.dispose(),this.delayTime=null,this.resonance.dispose(),this.resonance=null,this._feedback.disconnect(),this._feedback=null,this},t.FeedbackCombFilter}),Module(function(t){return t.Follower=function(){t.call(this);var e=this.optionsObject(arguments,["attack","release"],t.Follower.defaults);this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=new t.WaveShaper,this._sub=new t.Subtract,this._delay=this.context.createDelay(),this._delay.delayTime.value=this.blockTime,this._mult=new t.Multiply(1e4),this._attack=e.attack,this._release=e.release,this.input.chain(this._abs,this._filter,this.output),this._abs.connect(this._sub,0,1),this._filter.chain(this._delay,this._sub),this._sub.chain(this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(t,e){var i=this.blockTime;t=this.secondsToFrequency(this.toSeconds(t)),e=this.secondsToFrequency(this.toSeconds(e)),t=Math.max(t,i),e=Math.max(e,i),this._frequencyValues.setMap(function(i){return 0>=i?t:e})},Object.defineProperty(t.Follower.prototype,"attack",{get:function(){return this._attack},set:function(t){this._attack=t,this._setAttackRelease(this._attack,this._release)}}),Object.defineProperty(t.Follower.prototype,"release",{get:function(){return this._release},set:function(t){this._release=t,this._setAttackRelease(this._attack,this._release)}}),t.Follower.prototype.connect=t.Signal.prototype.connect,t.Follower.prototype.dispose=function(){return t.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._frequencyValues.disconnect(),this._frequencyValues=null,this._delay.disconnect(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this._mult.dispose(),this._mult=null,this._curve=null,this},t.Follower}),Module(function(t){return t.ScaledEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.Envelope.call(this,e),e=this.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}),Module(function(t){return t.FrequencyEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.ScaledEnvelope.call(this,e),e=this.defaultArg(e,t.FrequencyEnvelope.defaults),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:2},Object.defineProperty(t.FrequencyEnvelope.prototype,"baseFrequency",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}),Module(function(t){return t.Gate=function(){t.call(this);var e=this.optionsObject(arguments,["threshold","attack","release"],t.Gate.defaults);this._follower=new t.Follower(e.attack,e.release),this._gt=new t.GreaterThan(this.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._gt,this._follower,this.output.gain)},t.extend(t.Gate),t.Gate.defaults={attack:.1,release:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,"threshold",{get:function(){return this.gainToDb(this._gt.value)},set:function(t){this._gt.value=this.dbToGain(t)}}),Object.defineProperty(t.Gate.prototype,"attack",{get:function(){return this._follower.attack},set:function(t){this._follower.attack=t}}),Object.defineProperty(t.Gate.prototype,"release",{get:function(){return this._follower.release},set:function(t){this._follower.release=t}}),t.Gate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}),Module(function(t){return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getStateAtTime=function(t){var e=this.getEvent(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){this.addEvent({state:t,time:this.toSeconds(e)})},t.TimelineState}),Module(function(t){return t.Clock=function(){var e=this.optionsObject(arguments,["callback","frequency"],t.Clock.defaults);this.callback=e.callback,this._lookAhead="auto",this._computedLookAhead=1/60,this._threshold=.5,this._nextTick=-1,this._lastUpdate=0,this._loopID=-1,this.frequency=new t.TimelineSignal(e.frequency,t.Type.Frequency),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this._readOnly("frequency"),this._loop()},t.extend(t.Clock),t.Clock.defaults={callback:t.noOp,frequency:1,lookAhead:"auto"},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getStateAtTime(this.now())}}),Object.defineProperty(t.Clock.prototype,"lookAhead",{get:function(){return this._lookAhead},set:function(t){"auto"===t?this._lookAhead="auto":this._lookAhead=this.toSeconds(t)}}),t.Clock.prototype.start=function(e,i){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Started&&this._state.addEvent({state:t.State.Started,time:e,offset:i}),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)!==t.State.Stopped&&this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(e){if(this._loopID=requestAnimationFrame(this._boundLoop),"auto"===this._lookAhead){if(!this.isUndef(e)){var i=(e-this._lastUpdate)/1e3;this._lastUpdate=e,i<this._threshold&&(this._computedLookAhead=(9*this._computedLookAhead+i)/10)}}else this._computedLookAhead=this._lookAhead;var s=this.now(),n=2*this._computedLookAhead,o=this._state.getEvent(s+n),r=t.State.Stopped;if(o&&(r=o.state,-1===this._nextTick&&r===t.State.Started&&(this._nextTick=o.time,this.isUndef(o.offset)||(this.ticks=o.offset))),r===t.State.Started)for(;s+n>this._nextTick;){
s>this._nextTick+this._threshold&&(this._nextTick=s);var a=this._nextTick;this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),this.callback(a),this.ticks++}else r===t.State.Stopped&&(this._nextTick=-1,this.ticks=0)},t.Clock.prototype.getStateAtTime=function(t){return this._state.getStateAtTime(t)},t.Clock.prototype.dispose=function(){cancelAnimationFrame(this._loopID),t.TimelineState.prototype.dispose.call(this),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=t.noOp,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}),Module(function(t){return t.Emitter=function(){this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var i=t.split(/\W+/),s=0;s<i.length;s++){var n=i[s];this._events.hasOwnProperty(n)||(this._events[n]=[]),this._events[n].push(e)}return this},t.Emitter.prototype.off=function(e,i){for(var s=e.split(/\W+/),n=0;n<s.length;n++)if(e=s[n],this._events.hasOwnProperty(e))if(t.prototype.isUndef(i))this._events[e]=[];else for(var o=this._events[e],r=0;r<o.length;r++)o[r]===i&&o.splice(r,1);return this},t.Emitter.prototype.trigger=function(t){if(this._events){var e=Array.prototype.slice.call(arguments,1);if(this._events.hasOwnProperty(t))for(var i=this._events[t],s=0,n=i.length;n>s;s++)i[s].apply(this,e)}return this},t.Emitter.mixin=function(e){var i=["on","off","trigger"];e._events={};for(var s=0;s<i.length;s++){var n=i[s],o=t.Emitter.prototype[n];e[n]=o}},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}),Module(function(t){t.IntervalTimeline=function(){this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.addEvent=function(t){if(this.isUndef(t.time)||this.isUndef(t.duration))throw new Error("events must have time and duration parameters");var i=new e(t.time,t.time+t.duration,t);for(null===this._root?this._root=i:this._root.insert(i),this._length++;null!==i;)i.updateHeight(),i.updateMax(),this._rebalance(i),i=i.parent;return this},t.IntervalTimeline.prototype.removeEvent=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var i=0;i<e.length;i++){var s=e[i];if(s.event===t){this._removeNode(s),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return t=this.toSeconds(t),this.forEachAfter(t,function(t){this.removeEvent(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,i,s=t.getBalance();if(s>0)if(null===t.left.right)e=t.left,e.right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)e=t.right,e.left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),s=t.right;t.right=s.left,s.left=t,null!==e?i?e.left=s:e.right=s:this._setRoot(s)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),s=t.left;t.left=s.right,s.right=t,null!==e?i?e.left=s:e.right=s:this._setRoot(s)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):-1>e&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.getEvent=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],s=1;s<e.length;s++)e[s].low>i.low&&(i=e[s]);return i.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];null!==this._root&&this._root.traverse(function(t){e.push(t)});for(var i=0;i<e.length;i++){var s=e[i].event;s&&t(s)}}return this},t.IntervalTimeline.prototype.forEachOverlap=function(t,e){if(t=this.toSeconds(t),null!==this._root){var i=[];this._root.search(t,i);for(var s=i.length-1;s>=0;s--){var n=i[s].event;n&&e(n)}}return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){if(t=this.toSeconds(t),null!==this._root){var i=[];this._root.searchAfter(t,i);for(var s=i.length-1;s>=0;s--){var n=i[s].event;n&&e(n)}}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>=t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}),Module(function(t){t.Transport=function(){t.Emitter.call(this),this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._eventID=0,this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._onceEvents=new t.Timeline,this._syncedSignals=[];var i=this.notationToSeconds(e.defaults.swingSubdivision,e.defaults.bpm,e.defaults.timeSignature);this._swingTicks=i/(60/e.defaults.bpm)*this._ppq,this._swingAmount=0},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"16n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:48},t.Transport.prototype._processTick=function(t){this._swingAmount>0&&this._clock.ticks%this._ppq!==0&&this._clock.ticks%this._swingTicks===0&&(t+=this.ticksToSeconds(this._swingTicks)*this._swingAmount),this.loop&&this._clock.ticks===this._loopEnd&&(this.ticks=this._loopStart,this.trigger("loop",t));var e=this._clock.ticks;this._timeline.forEachAtTime(e,function(e){e.callback(t)}),this._repeatedEvents.forEachOverlap(e,function(i){(e-i.time)%i.interval===0&&i.callback(t)}),this._onceEvents.forEachBefore(e,function(e){e.callback(t)}),this._onceEvents.cancelBefore(e)},t.Transport.prototype.schedule=function(t,e){var i={time:this.toTicks(e),callback:t},s=this._eventID++;return this._scheduledEvents[s.toString()]={event:i,timeline:this._timeline},this._timeline.addEvent(i),s},t.Transport.prototype.scheduleRepeat=function(t,e,i,s){if(0>=e)throw new Error("repeat events must have an interval larger than 0");var n={time:this.toTicks(i),duration:this.toTicks(this.defaultArg(s,1/0)),interval:this.toTicks(e),callback:t},o=this._eventID++;return this._scheduledEvents[o.toString()]={event:n,timeline:this._repeatedEvents},this._repeatedEvents.addEvent(n),o},t.Transport.prototype.scheduleOnce=function(t,e){var i={time:this.toTicks(e),callback:t},s=this._eventID++;return this._scheduledEvents[s.toString()]={event:i,timeline:this._onceEvents},this._onceEvents.addEvent(i),s},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.removeEvent(e.event),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype.cancel=function(t){return t=this.defaultArg(t,0),t=this.toTicks(t),this._timeline.cancel(t),this._onceEvents.cancel(t),this._repeatedEvents.cancel(t),this},t.Transport.prototype.quantize=function(e,i){i=this.defaultArg(i,"4n");var s=this.toTicks(e);i=this.toTicks(i);var n=i-s%i;n===i&&(n=0);var o=this.now();return this.state===t.State.Started&&(o=this._clock._nextTick),this.toSeconds(e,o)+this.ticksToSeconds(n)},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(t,e){return t=this.toSeconds(t),e=this.isUndef(e)?this.defaultArg(e,this._clock.ticks):this.toTicks(e),this._clock.start(t,e),this.trigger("start",t,this.ticksToSeconds(e)),this},t.Transport.prototype.stop=function(t){return t=this.toSeconds(t),this._clock.stop(t),this.trigger("stop",t),this},t.Transport.prototype.pause=function(t){return t=this.toSeconds(t),this._clock.pause(t),this.trigger("pause",t),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){this.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return this.ticksToSeconds(this._loopStart)},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return this.ticksToSeconds(this._loopEnd)},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return 2*this._swingAmount},set:function(t){this._swingAmount=.5*t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return this.toNotation(this._swingTicks+"i")},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){var t=this.ticks/this._ppq,e=Math.floor(t/this._timeSignature),i=t%1*4;i%1>0&&(i=i.toFixed(3)),t=Math.floor(t)%this._timeSignature;var s=[e,t,i];return s.join(":")},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){this._clock.ticks=t}}),Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){this._ppq=t,this.bpm.value=this.bpm.value}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.syncSignal=function(e,i){i||(i=0!==e._param.value?e._param.value/this.bpm._param.value:0);var s=new t.Gain(i);return this.bpm.chain(s,e._param),this._syncedSignals.push({ratio:s,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal._param.value=i.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._onceEvents.dispose(),this._onceEvents=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this},t.Transport.prototype.setInterval=function(e,i){return console.warn("This method is deprecated. Use Tone.Transport.scheduleRepeat instead."),t.Transport.scheduleRepeat(e,i)},t.Transport.prototype.clearInterval=function(e){return console.warn("This method is deprecated. Use Tone.Transport.clear instead."),t.Transport.clear(e)},t.Transport.prototype.setTimeout=function(e,i){return console.warn("This method is deprecated. Use Tone.Transport.scheduleOnce instead."),t.Transport.scheduleOnce(e,i)},t.Transport.prototype.clearTimeout=function(e){return console.warn("This method is deprecated. Use Tone.Transport.clear instead."),t.Transport.clear(e)},t.Transport.prototype.setTimeline=function(e,i){return console.warn("This method is deprecated. Use Tone.Transport.schedule instead."),t.Transport.schedule(e,i)},t.Transport.prototype.clearTimeline=function(e){return console.warn("This method is deprecated. Use Tone.Transport.clear instead."),t.Transport.clear(e)};var e=t.Transport;return t._initAudioContext(function(){if("function"==typeof t.Transport)t.Transport=new t.Transport;else{t.Transport.stop();var i=t.Transport.get();t.Transport.dispose(),e.call(t.Transport),t.Transport.set(i)}}),t.Transport}),Module(function(t){return t.Volume=function(){var e=this.optionsObject(arguments,["volume"],t.Volume.defaults);this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this.volume=this.output.gain,this._readOnly("volume")},t.extend(t.Volume),t.Volume.defaults={volume:0},t.Volume.prototype.dispose=function(){return this.input.dispose(),t.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}),Module(function(t){return t.Source=function(e){t.call(this),e=this.defaultArg(e,t.Source.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._syncStart=function(t,e){t=this.toSeconds(t),t+=this.toSeconds(this._startDelay),this.start(t,e)}.bind(this),this._syncStop=this.stop.bind(this),this._startDelay=0,this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit"},t.extend(t.Source),t.Source.defaults={volume:0},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._state.getStateAtTime(this.now())}}),t.Source.prototype.start=function(e){return e=this.toSeconds(e),(this._state.getStateAtTime(e)!==t.State.Started||this.retrigger)&&(this._state.setStateAtTime(t.State.Started,e),this._start&&this._start.apply(this,arguments)),this},t.Source.prototype.stop=function(e){return e=this.toSeconds(e),this._state.getStateAtTime(e)===t.State.Started&&(this._state.setStateAtTime(t.State.Stopped,e),this._stop&&this._stop.apply(this,arguments)),this},t.Source.prototype.sync=function(e){return this._startDelay=this.defaultArg(e,0),t.Transport.on("start",this._syncStart),t.Transport.on("stop pause",this._syncStop),this},t.Source.prototype.unsync=function(){return this._startDelay=0,t.Transport.off("start",this._syncStart),t.Transport.off("stop pause",this._syncStop),this},t.Source.prototype.dispose=function(){this.stop(),t.prototype.dispose.call(this),this.unsync(),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null,this._syncStart=null,this._syncStart=null},t.Source}),Module(function(t){return t.Oscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.Oscillator.defaults);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=this.defaultArg(e.partials,[1]),this._phase=e.phase,this._type=null,this.type=e.type,this.phase=this._phase,this._readOnly(["frequency","detune"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[]},t.Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},t.Oscillator.prototype._start=function(t){this._oscillator=this.context.createOscillator(),this._oscillator.setPeriodicWave(this._wave),this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(this.toSeconds(t))},t.Oscillator.prototype._stop=function(t){return this._oscillator&&(this._oscillator.stop(this.toSeconds(t)),this._oscillator=null),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e[0],e[1]);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),t.Oscillator.prototype._getRealImaginary=function(e,i){var s=4096,n=s/2,o=new Float32Array(n),r=new Float32Array(n),a=1;if(e===t.Oscillator.Type.Custom)a=this._partials.length+1,n=a;else{var h=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);h&&(a=parseInt(h[2])+1,e=h[1],a=Math.max(a,2),n=a)}for(var l=1;n>l;++l){var c,u=2/(l*Math.PI);switch(e){case t.Oscillator.Type.Sine:c=a>=l?1:0;break;case t.Oscillator.Type.Square:c=1&l?2*u:0;break;case t.Oscillator.Type.Sawtooth:c=u*(1&l?1:-1);break;case t.Oscillator.Type.Triangle:c=1&l?2*(u*u)*(l-1>>1&1?-1:1):0;break;case t.Oscillator.Type.Custom:c=this._partials[l-1];break;default:throw new Error("invalid oscillator type: "+e)}0!==c?(o[l]=-c*Math.sin(i*l),r[l]=c*Math.cos(i*l)):(o[l]=0,r[l]=0)}return[o,r]},t.Oscillator.prototype._inverseFFT=function(t,e,i){for(var s=0,n=t.length,o=0;n>o;o++)s+=t[o]*Math.cos(o*i)+e[o]*Math.sin(o*i);return s},t.Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],i=t[1],s=0,n=2*Math.PI,o=0;8>o;o++)s=Math.max(this._inverseFFT(e,i,o/8*n),s);return-this._inverseFFT(e,i,this._phase)/s},Object.defineProperty(t.Oscillator.prototype,"partials",{get:function(){return this._type!==t.Oscillator.Type.Custom?[]:this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}),Module(function(t){return t.LFO=function(){var e=this.optionsObject(arguments,["frequency","min","max"],t.LFO.defaults);this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._stoppedSignal.connect(this._a2g),this._readOnly(["amplitude","frequency"]),this.phase=e.phase},t.extend(t.LFO,t.Oscillator),t.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(t){return this._oscillator.sync(t),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,i=this.max;this._units=t,this.min=e,this.max=i}}),Object.defineProperty(t.LFO.prototype,"state",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return e.constructor!==t.Signal&&e.constructor!==t.Param&&e.constructor!==t.TimelineSignal||(this.convert=e.convert,this.units=e.units),t.Signal.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["amplitude","frequency"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}),Module(function(t){return t.Limiter=function(){var e=this.optionsObject(arguments,["threshold"],t.Limiter.defaults);this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},t.extend(t.Limiter),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},t.Limiter}),Module(function(t){return t.LowpassCombFilter=function(){t.call(this);var e=this.optionsObject(arguments,["delayTime","resonance","dampening"],t.LowpassCombFilter.defaults);this._delay=this.input=this.context.createDelay(1),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this._lowpass=this.output=this.context.createBiquadFilter(),this._lowpass.Q.value=0,this._lowpass.type="lowpass",this.dampening=new t.Param({param:this._lowpass.frequency,units:t.Type.Frequency,value:e.dampening}),this._feedback=this.context.createGain(),this.resonance=new t.Param({param:this._feedback.gain,units:t.Type.NormalRange,value:e.resonance}),this._delay.chain(this._lowpass,this._feedback,this._delay),this.delayTime.connect(this._delay.delayTime),this._readOnly(["dampening","resonance","delayTime"])},t.extend(t.LowpassCombFilter),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this.dampening.dispose(),this.dampening=null,this.resonance.dispose(),this.resonance=null,this._delay.disconnect(),this._delay=null,this._lowpass.disconnect(),this._lowpass=null,this._feedback.disconnect(),this._feedback=null,this.delayTime.dispose(),this.delayTime=null,this},t.LowpassCombFilter}),Module(function(t){return t.Merge=function(){t.call(this,2,0),this.left=this.input[0]=this.context.createGain(),this.right=this.input[1]=this.context.createGain(),this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode="explicit",this.right.channelCountMode="explicit"},t.extend(t.Merge),t.Merge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.left.disconnect(),this.left=null,this.right.disconnect(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}),Module(function(t){return t.Meter=function(){var e=this.optionsObject(arguments,["channels","smoothing"],t.Meter.defaults);t.call(this),this._channels=e.channels,this.smoothing=e.smoothing,this.clipMemory=e.clipMemory,this.clipLevel=e.clipLevel,this._volume=new Array(this._channels),this._values=new Array(this._channels);for(var i=0;i<this._channels;i++)this._volume[i]=0,this._values[i]=0;this._lastClip=new Array(this._channels);for(var s=0;s<this._lastClip.length;s++)this._lastClip[s]=0;this._jsNode=this.context.createScriptProcessor(e.bufferSize,this._channels,1),this._jsNode.onaudioprocess=this._onprocess.bind(this),this._jsNode.noGC(),this.input.connect(this.output),this.input.connect(this._jsNode)},t.extend(t.Meter),t.Meter.defaults={smoothing:.8,bufferSize:1024,clipMemory:.5,clipLevel:.9,channels:1},t.Meter.prototype._onprocess=function(t){for(var e=this._jsNode.bufferSize,i=this.smoothing,s=0;s<this._channels;s++){for(var n,o=t.inputBuffer.getChannelData(s),r=0,a=0,h=0;e>h;h++)n=o[h],a+=n,r+=n*n;var l=a/e,c=Math.sqrt(r/e);c>.9&&(this._lastClip[s]=Date.now()),this._volume[s]=Math.max(c,this._volume[s]*i),this._values[s]=l}},t.Meter.prototype.getLevel=function(t){t=this.defaultArg(t,0);var e=this._volume[t];return 1e-5>e?0:e},t.Meter.prototype.getValue=function(t){return t=this.defaultArg(t,0),this._values[t]},t.Meter.prototype.getDb=function(t){return this.gainToDb(this.getLevel(t))},t.Meter.prototype.isClipped=function(t){return t=this.defaultArg(t,0),Date.now()-this._lastClip[t]<1e3*this._clipMemory},t.Meter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._jsNode.disconnect(),this._jsNode.onaudioprocess=null,this._jsNode=null,this._volume=null,this._values=null,this._lastClip=null,this},t.Meter}),Module(function(t){return t.Split=function(){t.call(this,0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this.left=this.output[0]=this.context.createGain(),this.right=this.output[1]=this.context.createGain(),this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split),t.Split.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.disconnect(),this.left.disconnect(),this.right.disconnect(),this.left=null,this.right=null,this._splitter=null,this},t.Split}),Module(function(t){t.MidSideSplit=function(){t.call(this,0,2),this._split=this.input=new t.Split,this.mid=this.output[0]=new t.Expr("($0 + $1) * $2"),this.side=this.output[1]=new t.Expr("($0 - $1) * $2"),this._split.connect(this.mid,0,0),this._split.connect(this.mid,1,1),this._split.connect(this.side,0,0),this._split.connect(this.side,1,1),e.connect(this.mid,0,2),e.connect(this.side,0,2)},t.extend(t.MidSideSplit);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}),Module(function(t){t.MidSideMerge=function(){t.call(this,2,0),this.mid=this.input[0]=this.context.createGain(),this._left=new t.Expr("($0 + $1) * $2"),this.side=this.input[1]=this.context.createGain(),this._right=new t.Expr("($0 - $1) * $2"),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._merge,0,0),this._right.connect(this._merge,0,1),e.connect(this._left,0,2),e.connect(this._right,0,2)},t.extend(t.MidSideMerge);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideMerge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.disconnect(),this.mid=null,this.side.disconnect(),this.side=null,this._left.dispose(),this._left=null,this._right.dispose(),this._right=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}),Module(function(t){return t.MidSideCompressor=function(e){e=this.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},t.extend(t.MidSideCompressor),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}),Module(function(t){return t.Mono=function(){t.call(this,1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1),this.input.gain.value=this.dbToGain(-10)},t.extend(t.Mono),t.Mono.prototype.dispose=function(){return t.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}),Module(function(t){return t.MultibandCompressor=function(e){e=this.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=this.context.createGain(),this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandCompressor),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,
this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}),Module(function(t){return t.GainToAudio=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}),Module(function(t){return t.Panner=function(e){t.call(this),this._hasStereoPanner=this.isFunction(this.context.createStereoPanner),this._hasStereoPanner?(this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=new t.Signal(0,t.Type.NormalRange),this._scalePan=new t.GainToAudio,this.pan.chain(this._scalePan,this._panner.pan)):(this._crossFade=new t.CrossFade,this._merger=this.output=new t.Merge,this._splitter=this.input=new t.Split,this.pan=this._crossFade.fade,this._splitter.connect(this._crossFade,0,0),this._splitter.connect(this._crossFade,1,1),this._crossFade.a.connect(this._merger,0,0),this._crossFade.b.connect(this._merger,0,1)),this.pan.value=this.defaultArg(e,.5),this._readOnly("pan")},t.extend(t.Panner),t.Panner.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("pan"),this._hasStereoPanner?(this._panner.disconnect(),this._panner=null,this.pan.dispose(),this.pan=null,this._scalePan.dispose(),this._scalePan=null):(this._crossFade.dispose(),this._crossFade=null,this._splitter.dispose(),this._splitter=null,this._merger.dispose(),this._merger=null,this.pan=null),this},t.Panner}),Module(function(t){return t.PanVol=function(){var e=this.optionsObject(arguments,["pan","volume"],t.PanVol.defaults);this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this._readOnly(["pan","volume"])},t.extend(t.PanVol),t.PanVol.defaults={pan:.5,volume:0},t.PanVol.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}),Module(function(t){return t.CtrlInterpolate=function(){var e=this.optionsObject(arguments,["values","index"],t.CtrlInterpolate.defaults);this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,"value",{get:function(){var t=this.index;t=Math.min(t,this.values.length-1);var e=Math.floor(t),i=this.values[e],s=this.values[Math.ceil(t)];return this._interpolate(t-e,i,s)}}),t.CtrlInterpolate.prototype._interpolate=function(t,e,i){if(this.isArray(e)){for(var s=[],n=0;n<e.length;n++)s[n]=this._interpolate(t,e[n],i[n]);return s}if(this.isObject(e)){var o={};for(var r in e)o[r]=this._interpolate(t,e[r],i[r]);return o}return e=this._toNumber(e),i=this._toNumber(i),(1-t)*e+t*i},t.CtrlInterpolate.prototype._toNumber=function(t){return this.isNumber(t)?t:this.isNote(t)?this.toFrequency(t):this.toSeconds(t)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}),Module(function(t){return t.CtrlMarkov=function(t,e){this.values=this.defaultArg(t,{}),this.value=this.defaultArg(e,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){if(this.values.hasOwnProperty(this.value)){var t=this.values[this.value];if(this.isArray(t))for(var e=this._getProbDistribution(t),i=Math.random(),s=0,n=0;n<e.length;n++){var o=e[n];if(i>s&&s+o>i){var r=t[n];this.isObject(r)?this.value=r.value:this.value=r}s+=o}else this.value=t}return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(t){for(var e=[],i=0,s=!1,n=0;n<t.length;n++){var o=t[n];this.isObject(o)?(s=!0,e[n]=o.probability):e[n]=1/t.length,i+=e[n]}if(s)for(var r=0;r<e.length;r++)e[r]=e[r]/i;return e},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}),Module(function(t){return t.CtrlPattern=function(){var e=this.optionsObject(arguments,["values","type"],t.CtrlPattern.defaults);this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:"up",Down:"down",UpDown:"upDown",DownUp:"downUp",AlternateUp:"alternateUp",AlternateDown:"alternateDown",Random:"random",RandomWalk:"randomWalk",RandomOnce:"randomOnce"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,"value",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==t.CtrlPattern.Type.Down&&this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?(this.index++,this.index>=this.values.length&&(this.index=0)):e===t.CtrlPattern.Type.Down?(this.index--,this.index<0&&(this.index=this.values.length-1)):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?(this.index++,this.index>=this.values.length&&(this.index=0,this._shuffleValues())):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t=[];this._shuffled=[];for(var e=0;e<this.values.length;e++)t[e]=e;for(;t.length>0;){var i=t.splice(Math.floor(t.length*Math.random()),1);this._shuffled.push(i[0])}},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}),Module(function(t){return t.CtrlRandom=function(){var e=this.optionsObject(arguments,["min","max"],t.CtrlRandom.defaults);this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,"value",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),i=Math.random(),s=i*t+(1-i)*e;return this.integer&&(s=Math.floor(s)),s}}),t.CtrlRandom}),Module(function(t){return t.Buffer=function(){var e=this.optionsObject(arguments,["url","onload"],t.Buffer.defaults);this._buffer=null,this._reversed=e.reverse,this.url=void 0,this.loaded=!1,this.onload=e.onload.bind(this,this),e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),this.onload(this)):this.isString(e.url)&&(this.url=e.url,t.Buffer._addToQueue(e.url,this))},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,onload:t.noOp,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this.loaded=!0,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,i){return this.url=e,this.onload=this.defaultArg(i,this.onload),t.Buffer._addToQueue(e,this),this},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),t.Buffer._removeFromQueue(this),this._buffer=null,this.onload=t.Buffer.defaults.onload,this},Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this._buffer.numberOfChannels;t++)Array.prototype.reverse.call(this._buffer.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._queue=[],t.Buffer._currentDownloads=[],t.Buffer._totalDownloads=0,t.Buffer.MAX_SIMULTANEOUS_DOWNLOADS=6,t.Buffer._addToQueue=function(e,i){t.Buffer._queue.push({url:e,Buffer:i,progress:0,xhr:null}),this._totalDownloads++,t.Buffer._next()},t.Buffer._removeFromQueue=function(e){var i;for(i=0;i<t.Buffer._queue.length;i++){var s=t.Buffer._queue[i];s.Buffer===e&&t.Buffer._queue.splice(i,1)}for(i=0;i<t.Buffer._currentDownloads.length;i++){var n=t.Buffer._currentDownloads[i];n.Buffer===e&&(t.Buffer._currentDownloads.splice(i,1),n.xhr.abort(),n.xhr.onprogress=null,n.xhr.onload=null,n.xhr.onerror=null)}},t.Buffer._next=function(){if(t.Buffer._queue.length>0){if(t.Buffer._currentDownloads.length<t.Buffer.MAX_SIMULTANEOUS_DOWNLOADS){var e=t.Buffer._queue.shift();t.Buffer._currentDownloads.push(e),e.xhr=t.Buffer.load(e.url,function(i){var s=t.Buffer._currentDownloads.indexOf(e);t.Buffer._currentDownloads.splice(s,1),e.Buffer.set(i),e.Buffer._reversed&&e.Buffer._reverse(),e.Buffer.onload(e.Buffer),t.Buffer._onprogress(),t.Buffer._next()}),e.xhr.onprogress=function(i){e.progress=i.loaded/i.total,t.Buffer._onprogress()},e.xhr.onerror=function(e){t.Buffer.trigger("error",e)}}}else 0===t.Buffer._currentDownloads.length&&(t.Buffer.trigger("load"),t.Buffer._totalDownloads=0)},t.Buffer._onprogress=function(){var e=0,i=t.Buffer._currentDownloads.length,s=0;if(i>0){for(var n=0;i>n;n++){var o=t.Buffer._currentDownloads[n];e+=o.progress}s=e}var r=i-s,a=t.Buffer._totalDownloads-t.Buffer._queue.length-r;t.Buffer.trigger("progress",a/t.Buffer._totalDownloads)},t.Buffer.load=function(e,i){var s=new XMLHttpRequest;return s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=function(){t.context.decodeAudioData(s.response,function(t){if(!t)throw new Error("could not decode audio data:"+e);i(t)})},s.send(),s},Object.defineProperty(t.Buffer,"onload",{set:function(e){console.warn("Tone.Buffer.onload is deprecated, use Tone.Buffer.on('load', callback)"),t.Buffer.on("load",e)}}),Object.defineProperty(t.Buffer,"onprogress",{set:function(e){console.warn("Tone.Buffer.onprogress is deprecated, use Tone.Buffer.on('progress', callback)"),t.Buffer.on("progress",e)}}),Object.defineProperty(t.Buffer,"onerror",{set:function(e){console.warn("Tone.Buffer.onerror is deprecated, use Tone.Buffer.on('error', callback)"),t.Buffer.on("error",e)}}),t.Buffer}),Module(function(t){var e={};return t.prototype.send=function(t,i){e.hasOwnProperty(t)||(e[t]=this.context.createGain());var s=this.context.createGain();return s.gain.value=this.dbToGain(this.defaultArg(i,1)),this.output.chain(s,e[t]),s},t.prototype.receive=function(t,i){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),this.isUndef(i)&&(i=this.input),e[t].connect(i),this},t}),Module(function(t){return t.Delay=function(){var e=this.optionsObject(arguments,["delayTime","maxDelay"],t.Delay.defaults);this._delayNode=this.input=this.output=this.context.createDelay(this.toSeconds(e.maxDelay)),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly("delayTime")},t.extend(t.Delay),t.Delay.defaults={maxDelay:1,delayTime:0},t.Delay.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable("delayTime"),this.delayTime=null,this},t.Delay}),Module(function(t){t.Master=function(){t.call(this),this._unmutedVolume=1,this._muted=!1,this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination)},t.extend(t.Master),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._muted},set:function(t){!this._muted&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-(1/0)):this._muted&&!t&&(this.volume.value=this._unmutedVolume),this._muted=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.prototype.toMaster=function(){return this.connect(t.Master),this},AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this};var e=t.Master;return t._initAudioContext(function(){t.prototype.isUndef(t.Master)?(e.prototype.dispose.call(t.Master),e.call(t.Master)):t.Master=new e}),t.Master}),Module(function(t){function e(t,e,s){if(i.hasOwnProperty(t))for(var n=i[t],o=0,r=n.length;r>o;o++){var a=n[o];Array.isArray(s)?a.apply(window,[e].concat(s)):a(e,s)}}t.Note=function(e,i,s){this.value=s,this._channel=e,this._timelineID=t.Transport.setTimeline(this._trigger.bind(this),i)},t.Note.prototype._trigger=function(t){e(this._channel,t,this.value)},t.Note.prototype.dispose=function(){return t.Transport.clearTimeline(this._timelineID),this.value=null,this};var i={};return t.Note.route=function(t,e){i.hasOwnProperty(t)?i[t].push(e):i[t]=[e]},t.Note.unroute=function(t,e){if(i.hasOwnProperty(t)){var s=i[t],n=s.indexOf(e);-1!==n&&i[t].splice(n,1)}},t.Note.parseScore=function(e){var i=[];for(var s in e){var n=e[s];if("tempo"===s)t.Transport.bpm.value=n;else if("timeSignature"===s)t.Transport.timeSignature=n[0]/(n[1]/4);else{if(!Array.isArray(n))throw new TypeError("score parts must be Arrays");for(var o=0;o<n.length;o++){var r,a=n[o];if(Array.isArray(a)){var h=a[0],l=a.slice(1);r=new t.Note(s,h,l)}else r="object"==typeof a?new t.Note(s,a.time,a):new t.Note(s,a);i.push(r)}}}return i},t.Note}),Module(function(t){return t.Effect=function(){t.call(this);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=this.context.createGain(),this.effectReturn=this.context.createGain(),this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.Effect),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.disconnect(),this.effectSend=null,this.effectReturn.disconnect(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},t.Effect}),Module(function(t){return t.AutoFilter=function(){var e=this.optionsObject(arguments,["frequency","baseFrequency","octaves"],t.AutoFilter.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly(["frequency","depth"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:"sine",depth:1,baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t)}}),Object.defineProperty(t.AutoFilter.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},t.AutoFilter}),Module(function(t){return t.AutoPanner=function(){var e=this.optionsObject(arguments,["frequency"],t.AutoPanner.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:0,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly(["depth","frequency"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},t.AutoPanner}),Module(function(t){return t.AutoWah=function(){var e=this.optionsObject(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah.defaults);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=this.context.createGain(),this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,"peaking"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly(["gain","Q"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"sensitivity",{get:function(){return this.gainToDb(1/this._inputBoost.gain.value)},set:function(t){this._inputBoost.gain.value=1/this.dbToGain(t)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.disconnect(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},t.AutoWah}),Module(function(t){return t.BitCrusher=function(){var e=this.optionsObject(arguments,["bits"],t.BitCrusher.defaults);t.Effect.call(this,e);var i=1/Math.pow(2,e.bits-1);this._subtract=new t.Subtract,this._modulo=new t.Modulo(i),this._bits=e.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}),Module(function(t){return t.Chebyshev=function(){var e=this.optionsObject(arguments,["order"],t.Chebyshev.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:"none"},t.Chebyshev.prototype._getCoefficient=function(t,e,i){return i.hasOwnProperty(e)?i[e]:(0===e?i[e]=0:1===e?i[e]=t:i[e]=2*t*this._getCoefficient(t,e-1,i)-this._getCoefficient(t,e-2,i),i[e])},Object.defineProperty(t.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t;for(var e=new Array(4096),i=e.length,s=0;i>s;++s){var n=2*s/i-1;0===n?e[s]=0:e[s]=this._getCoefficient(n,t,{})}this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}),Module(function(t){return t.StereoEffect=function(){t.call(this);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},t.StereoEffect}),Module(function(t){return t.FeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"]);e=this.defaultArg(e,t.FeedbackEffect.defaults),t.Effect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackGain=this.context.createGain(),this.effectReturn.chain(this._feedbackGain,this.effectSend),this.feedback.connect(this._feedbackGain.gain),this._readOnly(["feedback"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackGain.disconnect(),this._feedbackGain=null,this},t.FeedbackEffect}),Module(function(t){return t.StereoXFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=this.context.createGain(),this._feedbackRL=this.context.createGain(),this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},t.extend(t.StereoXFeedbackEffect,t.FeedbackEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.disconnect(),this._feedbackLR=null,this._feedbackRL.disconnect(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}),Module(function(t){return t.Chorus=function(){var e=this.optionsObject(arguments,["frequency","delayTime","depth"],t.Chorus.defaults);t.StereoXFeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=this.context.createDelay(),this._delayNodeR=this.context.createDelay(),this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly(["frequency"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoXFeedbackEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,feedback:.1,type:"sine",spread:180},Object.defineProperty(t.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.disconnect(),this._delayNodeL=null,this._delayNodeR.disconnect(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},t.Chorus}),Module(function(t){return t.Convolver=function(){var e=this.optionsObject(arguments,["url"],t.Convolver.defaults);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer(e.url,function(t){this.buffer=t,e.onload()}.bind(this)),this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={url:"",onload:t.noOp},Object.defineProperty(t.Convolver.prototype,"buffer",{get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t),this._convolver.buffer=this._buffer.get()}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this)),this},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this._buffer.dispose(),this._buffer=null,this},t.Convolver}),Module(function(t){return t.Distortion=function(){var e=this.optionsObject(arguments,["distortion"],t.Distortion.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(t.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,i=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*i/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}),Module(function(t){return t.FeedbackDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.FeedbackDelay.defaults);t.FeedbackEffect.call(this,e),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this._delayNode=this.context.createDelay(4),this.connectEffect(this._delayNode),this.delayTime.connect(this._delayNode.delayTime),this._readOnly(["delayTime"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this.delayTime.dispose(),this._delayNode.disconnect(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},t.FeedbackDelay}),Module(function(t){var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],i=[225,556,441,341];return t.Freeverb=function(){var s=this.optionsObject(arguments,["roomSize","dampening"],t.Freeverb.defaults);t.StereoEffect.call(this,s),this.roomSize=new t.Signal(s.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(s.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var n=0;n<i.length;n++){var o=this.context.createBiquadFilter();o.type="allpass",o.frequency.value=i[n],this._allpassFiltersL.push(o)}for(var r=0;r<i.length;r++){var a=this.context.createBiquadFilter();a.type="allpass",a.frequency.value=i[r],this._allpassFiltersR.push(a)}for(var h=0;h<e.length;h++){var l=new t.LowpassCombFilter(e[h]);h<e.length/2?this.effectSendL.chain(l,this._allpassFiltersL[0]):this.effectSendR.chain(l,this._allpassFiltersR[0]),this.roomSize.connect(l.resonance),this.dampening.connect(l.dampening),this._combFilters.push(l)}this.connectSeries.apply(this,this._allpassFiltersL),this.connectSeries.apply(this,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly(["roomSize","dampening"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;this._allpassFiltersL=null;for(var i=0;i<this._allpassFiltersR.length;i++)this._allpassFiltersR[i].disconnect(),this._allpassFiltersR[i]=null;this._allpassFiltersR=null;for(var s=0;s<this._combFilters.length;s++)this._combFilters[s].dispose(),
this._combFilters[s]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}),Module(function(t){var e=[.06748,.06404,.08212,.09004],i=[.773,.802,.753,.733],s=[347,113,37];return t.JCReverb=function(){var n=this.optionsObject(arguments,["roomSize"],t.JCReverb.defaults);t.StereoEffect.call(this,n),this.roomSize=new t.Signal(n.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var o=0;o<s.length;o++){var r=this.context.createBiquadFilter();r.type="allpass",r.frequency.value=s[o],this._allpassFilters.push(r)}for(var a=0;a<e.length;a++){var h=new t.FeedbackCombFilter(e[a],.1);this._scaleRoomSize.connect(h.resonance),h.resonance.value=i[a],this._allpassFilters[this._allpassFilters.length-1].connect(h),a<e.length/2?h.connect(this.effectReturnL):h.connect(this.effectReturnR),this._feedbackCombFilters.push(h)}this.roomSize.connect(this._scaleRoomSize),this.connectSeries.apply(this,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;this._allpassFilters=null;for(var i=0;i<this._feedbackCombFilters.length;i++)this._feedbackCombFilters[i].dispose(),this._feedbackCombFilters[i]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}),Module(function(t){return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}),Module(function(t){return t.Phaser=function(){var e=this.optionsObject(arguments,["frequency","octaves","baseFrequency"],t.Phaser.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(t,e,i){for(var s=new Array(t),n=0;t>n;n++){var o=this.context.createBiquadFilter();o.type="allpass",i.connect(o.Q),e.connect(o.frequency),s[n]=o}return this.connectSeries.apply(this,s),s},Object.defineProperty(t.Phaser.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;this._filtersL=null;for(var i=0;i<this._filtersR.length;i++)this._filtersR[i].disconnect(),this._filtersR[i]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}),Module(function(t){return t.PingPongDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.PingPongDelay.defaults);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=this.context.createDelay(e.maxDelayTime),this._rightDelay=this.context.createDelay(e.maxDelayTime),this._rightPreDelay=this.context.createDelay(e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.disconnect(),this._leftDelay=null,this._rightDelay.disconnect(),this._rightDelay=null,this._rightPreDelay.disconnect(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}),Module(function(t){return t.PitchShift=function(){var e=this.optionsObject(arguments,["pitch"],t.PitchShift.defaults);t.FeedbackEffect.call(this,e),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(e.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly("delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);var i=this.now();this._lfoA.start(i),this._lfoB.start(i),this._crossFadeLFO.start(i),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t;var e=0;0>t?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=this.intervalToFrequencyRatio(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=this.intervalToFrequencyRatio(t)-1),this._frequency.value=e*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable("delayTime"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}),Module(function(t){return t.StereoFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=this.context.createGain(),this._feedbackR=this.context.createGain(),this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},t.extend(t.StereoFeedbackEffect,t.FeedbackEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.disconnect(),this._feedbackL=null,this._feedbackR.disconnect(),this._feedbackR=null,this},t.StereoFeedbackEffect}),Module(function(t){return t.StereoWidener=function(){var e=this.optionsObject(arguments,["width"],t.StereoWidener.defaults);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._midMult=new t.Expr("$0 * ($1 * (1 - $2))"),this._sideMult=new t.Expr("$0 * ($1 * $2)"),this._two=new t.Signal(2),this._two.connect(this._midMult,0,1),this.width.connect(this._midMult,0,2),this._two.connect(this._sideMult,0,1),this.width.connect(this._sideMult,0,2),this.midSend.chain(this._midMult,this.midReturn),this.sideSend.chain(this._sideMult,this.sideReturn),this._readOnly(["width"])},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._two.dispose(),this._two=null,this},t.StereoWidener}),Module(function(t){return t.Tremolo=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Tremolo.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly(["frequency","depth"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:"sine",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(t){return this._lfoL.sync(t),this._lfoR.sync(t),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},Object.defineProperty(t.Tremolo.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}),Module(function(t){return t.Vibrato=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Vibrato.defaults);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly(["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:"sine"},Object.defineProperty(t.Vibrato.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null},t.Vibrato}),Module(function(t){return t.Event=function(){var e=this.optionsObject(arguments,["callback","value"],t.Event.defaults);this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this.probability=e.probability,this.humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=this.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var i;if(e.state===t.State.Started){this.isUndef(e.id)||t.Transport.clear(e.id);var s=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop){i=1/0,this.isNumber(this._loop)&&(i=(this._loop-1)*this._getLoopDuration());var n=this._state.getEventAfter(s);null!==n&&(i=Math.min(i,n.time-s)),i!==1/0&&(this._state.setStateAtTime(t.State.Stopped,s+i+1),i+="i"),e.id=t.Transport.scheduleRepeat(this._tick.bind(this),this._getLoopDuration().toString()+"i",s+"i",i)}else e.id=t.Transport.schedule(this._tick.bind(this),s+"i")}}.bind(this)),this},Object.defineProperty(t.Event.prototype,"state",{get:function(){return this._state.getStateAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Stopped&&(this._state.addEvent({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){if(this.cancel(e),e=this.toTicks(e),this._state.getStateAtTime(e)===t.State.Started){this._state.setStateAtTime(t.State.Stopped,e);var i=this._state.getEventBefore(e),s=e;null!==i&&(s=i.time),this._rescheduleEvents(s)}return this},t.Event.prototype.cancel=function(e){return e=this.defaultArg(e,-(1/0)),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){if(!this.mute&&this._state.getStateAtTime(t.Transport.ticks)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var i=.02;this.isBoolean(this.humanize)||(i=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*i}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopEnd",{get:function(){return this.toNotation(this._loopEnd+"i")},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopStart",{get:function(){return this.toNotation(this._loopStart+"i")},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"progress",{get:function(){if(this._loop){var e=t.Transport.ticks,i=this._state.getEvent(e);if(null!==i&&i.state===t.State.Started){var s=this._getLoopDuration(),n=(e-i.time)%s;return n/s}return 0}return 0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}),Module(function(t){return t.Loop=function(){var e=this.optionsObject(arguments,["callback","interval"],t.Loop.defaults);this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:"4n",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,"state",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,"progress",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,"iterations",{get:function(){return this._event.loop===!0?1/0:this._event.loop},set:function(t){t===1/0?this._event.loop=!0:this._event.loop=t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}),Module(function(t){return t.Part=function(){var e=this.optionsObject(arguments,["callback","events"],t.Part.defaults);this._loop=e.loop,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this._startOffset=0,this._state=new t.TimelineState(t.State.Stopped),this._events=[],this.callback=e.callback,this.mute=e.mute;var i=this.defaultArg(e.events,[]);if(!this.isUndef(e.events))for(var s=0;s<i.length;s++)Array.isArray(i[s])?this.add(i[s][0],i[s][1]):this.add(i[s])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1},t.Part.prototype.start=function(e,i){var s=this.toTicks(e);return this._state.getStateAtTime(s)!==t.State.Started&&(i=this.defaultArg(i,0),i=this.toTicks(i),this._state.addEvent({state:t.State.Started,time:s,offset:i}),this._forEach(function(t){this._startNote(t,s,i)})),this},t.Part.prototype._startNote=function(t,e,i){e-=i,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd&&(t.startOffset<i&&(e+=this._getLoopDuration()),t.start(e+"i")):t.startOffset>=i&&t.start(e+"i")},Object.defineProperty(t.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var i=this.toTicks(e);return this._state.getStateAtTime(i)===t.State.Started&&(this._state.setStateAtTime(t.State.Stopped,i),this._forEach(function(t){t.stop(e)})),this},t.Part.prototype.at=function(t,e){t=this.toTicks(t);for(var i=this.ticksToSeconds(1),s=0;s<this._events.length;s++){var n=this._events[s];if(Math.abs(t-n.startOffset)<i)return this.isUndef(e)||(n.value=e),n}return this.isUndef(e)?null:(this.add(t+"i",e),this._events[this._events.length-1])},t.Part.prototype.add=function(e,i){this.isObject(e)&&e.hasOwnProperty("time")&&(i=e,e=i.time,delete i.time),e=this.toTicks(e);var s;return i instanceof t.Event?(s=i,s.callback=this._tick.bind(this)):s=new t.Event({callback:this._tick.bind(this),value:i}),s.startOffset=e,s.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(s),this._restartEvent(s),this},t.Part.prototype._restartEvent=function(e){var i=this._state.getEvent(this.now());i&&i.state===t.State.Started&&this._startNote(e,i.time,i.offset)},t.Part.prototype.remove=function(e,i){this.isObject(e)&&e.hasOwnProperty("time")&&(i=e,e=i.time),e=this.toTicks(e);for(var s=this._events.length-1;s>=0;s--){var n=this._events[s];n instanceof t.Part?n.remove(e,i):n.startOffset===e&&(this.isUndef(i)||!this.isUndef(i)&&n.value===i)&&(this._events.splice(s,1),n.dispose())}return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return this._forEach(function(e){e.cancel(t)}),this._state.cancel(t),this},t.Part.prototype._forEach=function(e,i){i=this.defaultArg(i,this);for(var s=this._events.length-1;s>=0;s--){var n=this._events[s];n instanceof t.Part?n._forEach(e,i):e.call(i,n)}return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(i){i[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel():e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(t.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(t.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopEnd",{get:function(){return this.toNotation(this._loopEnd+"i")},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopEnd=this.loopEnd,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"loopStart",{get:function(){return this.toNotation(this._loopStart+"i")},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(t.Part.prototype,"length",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return this.removeAll(),this._state.dispose(),this._state=null,this.callback=null,this._events=null,this},t.Part}),Module(function(t){return t.Pattern=function(){var e=this.optionsObject(arguments,["callback","events","pattern"],t.Pattern.defaults);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.events,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,events:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,"index",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,"events",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,"value",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,"pattern",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}),Module(function(t){return t.Sequence=function(){var e=this.optionsObject(arguments,["callback","events","subdivision"],t.Sequence.defaults),i=e.events;if(delete e.events,t.Part.call(this,e),this._subdivision=this.toTicks(e.subdivision),this.isUndef(e.loopEnd)&&!this.isUndef(i)&&(this._loopEnd=i.length*this._subdivision),this._loop=!0,!this.isUndef(i))for(var s=0;s<i.length;s++)this.add(s,i[s])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:"4n"},Object.defineProperty(t.Sequence.prototype,"subdivision",{get:function(){return this.toNotation(this._subdivision+"i")}}),t.Sequence.prototype.at=function(e,i){return this.isArray(i)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),i)},t.Sequence.prototype.add=function(e,i){if(null===i)return this;if(this.isArray(i)){var s=Math.round(this._subdivision/i.length)+"i";i=new t.Sequence(this._tick.bind(this),i,s)}return t.Part.prototype.add.call(this,this._indexTime(e),i),this},t.Sequence.prototype.remove=function(e,i){return t.Part.prototype.remove.call(this,this._indexTime(e),i),this},t.Sequence.prototype._indexTime=function(t){return this.isTicks(t)?t:t*this._subdivision+this.startOffset+"i"},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}),Module(function(t){return t.PulseOscillator=function(){var e=this.optionsObject(arguments,["frequency","width"],t.Oscillator.defaults);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=this.context.createGain(),this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:"sawtooth",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return 0>t?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},t.extend(t.PulseOscillator,t.Oscillator),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},Object.defineProperty(t.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(t.PulseOscillator.prototype,"partials",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.disconnect(),this._widthGate=null,this._widthGate=null,this._thresh.disconnect(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}),Module(function(t){return t.PWMOscillator=function(){var e=this.optionsObject(arguments,["frequency","modulationFrequency"],t.PWMOscillator.defaults);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(1.01),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},t.extend(t.PWMOscillator,t.Oscillator),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},Object.defineProperty(t.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}),Module(function(t){t.OmniOscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.OmniOscillator.defaults);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this.phase=e.phase,this._readOnly(["frequency","detune"]),this.isArray(e.partials)&&(this.partials=e.partials)},t.extend(t.OmniOscillator,t.Oscillator),t.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0,width:.4,modulationFrequency:.4};var e={PulseOscillator:"PulseOscillator",PWMOscillator:"PWMOscillator",Oscillator:"Oscillator"};return t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},Object.defineProperty(t.OmniOscillator.prototype,"type",{get:function(){return this._oscillator.type},set:function(i){if(0===i.indexOf("sine")||0===i.indexOf("square")||0===i.indexOf("triangle")||0===i.indexOf("sawtooth")||i===t.Oscillator.Type.Custom)this._sourceType!==e.Oscillator&&(this._sourceType=e.Oscillator,this._createNewOscillator(t.Oscillator)),this._oscillator.type=i;else if("pwm"===i)this._sourceType!==e.PWMOscillator&&(this._sourceType=e.PWMOscillator,this._createNewOscillator(t.PWMOscillator));else{if("pulse"!==i)throw new Error("Tone.OmniOscillator does not support type "+i);this._sourceType!==e.PulseOscillator&&(this._sourceType=e.PulseOscillator,this._createNewOscillator(t.PulseOscillator))}}}),Object.defineProperty(t.OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(i){this._sourceType!==e.Oscillator&&(this.type=t.Oscillator.Type.Custom),this._oscillator.partials=i}}),t.OmniOscillator.prototype._createNewOscillator=function(e){var i=this.now()+this.blockTime;if(null!==this._oscillator){var s=this._oscillator;s.stop(i),setTimeout(function(){s.dispose(),s=null},1e3*this.blockTime)}this._oscillator=new e,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(i)},Object.defineProperty(t.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}}),Object.defineProperty(t.OmniOscillator.prototype,"width",{get:function(){return this._sourceType===e.PulseOscillator?this._oscillator.width:void 0;
}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationFrequency",{get:function(){return this._sourceType===e.PWMOscillator?this._oscillator.modulationFrequency:void 0}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}),Module(function(t){return t.Instrument=function(e){e=this.defaultArg(e,t.Instrument.defaults),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume")},t.extend(t.Instrument),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.triggerAttackRelease=function(t,e,i,s){return i=this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,s),this.triggerRelease(i+e),this},t.Instrument.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this},t.Instrument}),Module(function(t){return t.Monophonic=function(e){e=this.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,i){return e=this.toSeconds(e),this._triggerEnvelopeAttack(e,i),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0){var i=this.frequency.value;this.frequency.setValueAtTime(i,e);var s=this.toSeconds(this.portamento);this.frequency.exponentialRampToValueAtTime(t,e+s)}else this.frequency.setValueAtTime(t,e);return this},t.Monophonic}),Module(function(t){return t.MonoSynth=function(e){e=this.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.oscillator.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}),Module(function(t){return t.AMSynth=function(e){e=this.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this.carrier=new t.MonoSynth(e.carrier),this.carrier.volume.value=-10,this.modulator=new t.MonoSynth(e.modulator),this.modulator.volume.value=-10,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.modulator.chain(this._modulationScale,this._modulationNode.gain),this.carrier.chain(this._modulationNode,this.output),this._readOnly(["carrier","modulator","frequency","harmonicity"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,carrier:{volume:-10,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5,baseFrequency:2e4,octaves:0},filter:{Q:6,type:"lowpass",rolloff:-24}},modulator:{volume:-10,oscillator:{type:"square"},envelope:{attack:2,decay:0,sustain:1,release:.5},filterEnvelope:{attack:4,decay:.2,sustain:.5,release:.5,baseFrequency:20,octaves:6},filter:{Q:6,type:"lowpass",rolloff:-24}}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this.carrier.filterEnvelope.triggerAttack(t),this.modulator.filterEnvelope.triggerAttack(t),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.AMSynth}),Module(function(t){return t.DrumSynth=function(e){e=this.defaultArg(e,t.DrumSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.Oscillator(e.oscillator).start(),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},t.extend(t.DrumSynth,t.Instrument),t.DrumSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},t.DrumSynth.prototype.triggerAttack=function(t,e,i){e=this.toSeconds(e),t=this.toFrequency(t);var s=t*this.octaves;return this.oscillator.frequency.setValueAtTime(s,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,i),this},t.DrumSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.DrumSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.DrumSynth}),Module(function(t){return t.DuoSynth=function(e){e=this.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=this.context.createGain(),this.vibratoAmount=new t.Param({param:this._vibratoGain.gain,units:t.Type.Positive,value:e.vibratoAmount}),this._vibratoDelay=this.toSeconds(e.vibratoDelay),this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,vibratoDelay:1,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0.envelope.triggerAttack(t,e),this.voice1.envelope.triggerAttack(t,e),this.voice0.filterEnvelope.triggerAttack(t),this.voice1.filterEnvelope.triggerAttack(t),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0.triggerRelease(t),this.voice1.triggerRelease(t),this},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibrato.dispose(),this._vibrato=null,this._vibratoGain.disconnect(),this._vibratoGain=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}),Module(function(t){return t.FMSynth=function(e){e=this.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this.carrier=new t.MonoSynth(e.carrier),this.carrier.volume.value=-10,this.modulator=new t.MonoSynth(e.modulator),this.modulator.volume.value=-10,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.modulator.connect(this._modulationNode.gain),this._modulationNode.gain.value=0,this._modulationNode.connect(this.carrier.frequency),this.carrier.connect(this.output),this._readOnly(["carrier","modulator","frequency","harmonicity","modulationIndex"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,carrier:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:0,sustain:1,release:.5},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5,baseFrequency:200,octaves:8}},modulator:{volume:-10,portamento:0,oscillator:{type:"triangle"},envelope:{attack:.01,decay:0,sustain:1,release:.5},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5,baseFrequency:600,octaves:5}}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this.carrier.filterEnvelope.triggerAttack(t),this.modulator.filterEnvelope.triggerAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity","modulationIndex"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.FMSynth}),Module(function(t){t.Noise=function(){var e=this.optionsObject(arguments,["type"],t.Noise.defaults);t.Source.call(this,e),this._source=null,this._buffer=null,this._playbackRate=e.playbackRate,this.type=e.type},t.extend(t.Noise,t.Source),t.Noise.defaults={type:"white",playbackRate:1},Object.defineProperty(t.Noise.prototype,"type",{get:function(){return this._buffer===s?"white":this._buffer===i?"brown":this._buffer===e?"pink":void 0},set:function(n){if(this.type!==n){switch(n){case"white":this._buffer=s;break;case"pink":this._buffer=e;break;case"brown":this._buffer=i;break;default:throw new Error("invalid noise type: "+n)}if(this.state===t.State.Started){var o=this.now()+this.blockTime;this._stop(o),this._start(o)}}}}),Object.defineProperty(t.Noise.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(t){this._source=this.context.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.connect(this.output),this._source.start(this.toSeconds(t))},t.Noise.prototype._stop=function(t){this._source&&this._source.stop(this.toSeconds(t))},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var e=null,i=null,s=null;return t._initAudioContext(function(t){var n=t.sampleRate,o=4*n;e=function(){for(var e=t.createBuffer(2,o,n),i=0;i<e.numberOfChannels;i++){var s,r,a,h,l,c,u,p=e.getChannelData(i);s=r=a=h=l=c=u=0;for(var d=0;o>d;d++){var f=2*Math.random()-1;s=.99886*s+.0555179*f,r=.99332*r+.0750759*f,a=.969*a+.153852*f,h=.8665*h+.3104856*f,l=.55*l+.5329522*f,c=-.7616*c-.016898*f,p[d]=s+r+a+h+l+c+u+.5362*f,p[d]*=.11,u=.115926*f}}return e}(),i=function(){for(var e=t.createBuffer(2,o,n),i=0;i<e.numberOfChannels;i++)for(var s=e.getChannelData(i),r=0,a=0;o>a;a++){var h=2*Math.random()-1;s[a]=(r+.02*h)/1.02,r=s[a],s[a]*=3.5}return e}(),s=function(){for(var e=t.createBuffer(2,o,n),i=0;i<e.numberOfChannels;i++)for(var s=e.getChannelData(i),r=0;o>r;r++)s[r]=2*Math.random()-1;return e}()}),t.Noise}),Module(function(t){return t.NoiseSynth=function(e){e=this.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.filter,this.envelope,this.output),this.noise.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["noise","filter","filterEnvelope","envelope"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:"white"},filter:{Q:6,type:"highpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:0},filterEnvelope:{attack:.06,decay:.2,sustain:0,release:2,baseFrequency:20,octaves:5}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["noise","filter","filterEnvelope","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this},t.NoiseSynth}),Module(function(t){return t.PluckSynth=function(e){e=this.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise("pink"),this.attackNoise=1,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.9},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var i=1/t;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}),Module(function(t){return t.PolySynth=function(){t.Instrument.call(this);var e=this.optionsObject(arguments,["polyphony","voice"],t.PolySynth.defaults);this.voices=new Array(e.polyphony),this.stealVoices=!0,this._freeVoices=[],this._activeVoices={};for(var i=0;i<e.polyphony;i++){var s=new e.voice(arguments[2],arguments[3]);this.voices[i]=s,s.connect(this.output)}this._freeVoices=this.voices.slice(0)},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,voice:t.MonoSynth},t.PolySynth.prototype.triggerAttack=function(t,e,i){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var n=t[s],o=JSON.stringify(n);if(this._activeVoices.hasOwnProperty(o))this._activeVoices[o].triggerAttack(n,e,i);else if(this._freeVoices.length>0){var r=this._freeVoices.shift();r.triggerAttack(n,e,i),this._activeVoices[o]=r}else if(this.stealVoices)for(var a in this._activeVoices){this._activeVoices[a].triggerAttack(n,e,i);break}}return this},t.PolySynth.prototype.triggerAttackRelease=function(t,e,i,s){return i=this.toSeconds(i),this.triggerAttack(t,i,s),this.triggerRelease(t,i+this.toSeconds(e)),this},t.PolySynth.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var s=JSON.stringify(t[i]),n=this._activeVoices[s];n&&(n.triggerRelease(e),this._freeVoices.push(n),delete this._activeVoices[s],n=null)}return this},t.PolySynth.prototype.set=function(t,e,i){for(var s=0;s<this.voices.length;s++)this.voices[s].set(t,e,i);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){for(var e=0;e<this.voices.length;e++)this.voices[e].triggerRelease(t);return this},t.PolySynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this.voices.length;e++)this.voices[e].dispose(),this.voices[e]=null;return this.voices=null,this._activeVoices=null,this._freeVoices=null,this},t.PolySynth}),Module(function(t){return t.Player=function(e){var i;e instanceof t.Buffer?(e=e.get(),i=t.Player.defaults):i=this.optionsObject(arguments,["url","onload"],t.Player.defaults),t.Source.call(this,i),this._source=null,this.autostart=i.autostart,this._buffer=new t.Buffer({url:i.url,onload:this._onload.bind(this,i.onload),reverse:i.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=i.loop,this._loopStart=i.loopStart,this._loopEnd=i.loopEnd,this._playbackRate=i.playbackRate,this.retrigger=i.retrigger},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e)),this},t.Player.prototype._onload=function(t){t(this),this.autostart&&this.start()},t.Player.prototype._start=function(e,i,s){if(!this._buffer.loaded)throw Error("tried to start Player before the buffer was loaded");return i=this._loop?this.defaultArg(i,this._loopStart):this.defaultArg(i,0),i=this.toSeconds(i),s=this.defaultArg(s,this._buffer.duration-i),e=this.toSeconds(e),s=this.toSeconds(s),this._source=this.context.createBufferSource(),this._source.buffer=this._buffer.get(),this._loop?(this._source.loop=this._loop,this._source.loopStart=this.toSeconds(this._loopStart),this._source.loopEnd=this.toSeconds(this._loopEnd)):this._state.setStateAtTime(t.State.Stopped,e+s),this._source.playbackRate.value=this._playbackRate,this._source.connect(this.output),this._loop?this._source.start(e,i):this._source.start(e,i,s),this},t.Player.prototype._stop=function(t){return this._source&&(this._source.stop(this.toSeconds(t)),this._source=null),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}),Module(function(t){return t.Sampler=function(e,i){i=this.defaultArg(i,t.Sampler.defaults),t.Instrument.call(this,i),this.player=new t.Player(i.player),this.player.retrigger=!0,this._buffers={},this.envelope=new t.AmplitudeEnvelope(i.envelope),this.filterEnvelope=new t.FrequencyEnvelope(i.filterEnvelope),this._sample=i.sample,this._pitch=i.pitch,this.filter=new t.Filter(i.filter),this._loadBuffers(e),this.pitch=i.pitch,this.player.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["player","filterEnvelope","envelope","filter"])},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={sample:0,pitch:0,player:{loop:!1},envelope:{attack:.001,decay:0,sustain:1,release:.1},filterEnvelope:{attack:.001,decay:.001,sustain:1,release:.5,baseFrequency:20,octaves:10},filter:{type:"lowpass"}},t.Sampler.prototype._loadBuffers=function(e){if(this.isString(e))this._buffers[0]=new t.Buffer(e,function(){this.sample="0"}.bind(this));else{e=this._flattenUrls(e);for(var i in e){this._sample=i;var s=e[i];this._buffers[i]=new t.Buffer(s)}}},t.Sampler.prototype._flattenUrls=function(t){var e={};for(var i in t)if(t.hasOwnProperty(i))if(this.isObject(t[i])){var s=this._flattenUrls(t[i]);for(var n in s)s.hasOwnProperty(n)&&(e[i+"."+n]=s[n])}else e[i]=t[i];return e},t.Sampler.prototype.triggerAttack=function(t,e,i){return e=this.toSeconds(e),t&&(this.sample=t),this.player.start(e),this.envelope.triggerAttack(e,i),this.filterEnvelope.triggerAttack(e),this},t.Sampler.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.filterEnvelope.triggerRelease(t),this.envelope.triggerRelease(t),this.player.stop(this.toSeconds(this.envelope.release)+t),this},Object.defineProperty(t.Sampler.prototype,"sample",{get:function(){return this._sample},set:function(t){if(!this._buffers.hasOwnProperty(t))throw new Error("Sampler does not have a sample named "+t);this._sample=t,this.player.buffer=this._buffers[t]}}),Object.defineProperty(t.Sampler.prototype,"reverse",{get:function(){for(var t in this._buffers)return this._buffers[t].reverse},set:function(t){for(var e in this._buffers)this._buffers[e].reverse=t}}),Object.defineProperty(t.Sampler.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t,this.player.playbackRate=this.intervalToFrequencyRatio(t)}}),t.Sampler.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this),this._writable(["player","filterEnvelope","envelope","filter"]),this.player.dispose(),this.filterEnvelope.dispose(),this.envelope.dispose(),this.filter.dispose(),this.player=null,this.filterEnvelope=null,this.envelope=null,this.filter=null;for(var e in this._buffers)this._buffers[e].dispose(),this._buffers[e]=null;return this._buffers=null,this},t.Sampler}),Module(function(t){return t.SimpleSynth=function(e){e=this.defaultArg(e,t.SimpleSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this.oscillator.start(),this._readOnly(["oscillator","frequency","detune","envelope"])},t.extend(t.SimpleSynth,t.Monophonic),t.SimpleSynth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.SimpleSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.SimpleSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this},t.SimpleSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.SimpleSynth}),Module(function(t){return t.SimpleAM=function(e){e=this.defaultArg(e,t.SimpleAM.defaults),t.Monophonic.call(this,e),this.carrier=new t.SimpleSynth(e.carrier),this.modulator=new t.SimpleSynth(e.modulator),this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.modulator.chain(this._modulationScale,this._modulationNode.gain),this.carrier.chain(this._modulationNode,this.output),this._readOnly(["carrier","modulator","frequency","harmonicity"])},t.extend(t.SimpleAM,t.Monophonic),t.SimpleAM.defaults={harmonicity:3,carrier:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5}},modulator:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.5,decay:.1,sustain:1,release:.5}}},t.SimpleAM.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this},t.SimpleAM.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.SimpleAM.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.SimpleAM}),Module(function(t){return t.SimpleFM=function(e){e=this.defaultArg(e,t.SimpleFM.defaults),t.Monophonic.call(this,e),this.carrier=new t.SimpleSynth(e.carrier),this.carrier.volume.value=-10,this.modulator=new t.SimpleSynth(e.modulator),this.modulator.volume.value=-10,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.modulator.connect(this._modulationNode.gain),this._modulationNode.gain.value=0,this._modulationNode.connect(this.carrier.frequency),this.carrier.connect(this.output),this._readOnly(["carrier","modulator","frequency","harmonicity","modulationIndex"])},t.extend(t.SimpleFM,t.Monophonic),t.SimpleFM.defaults={harmonicity:3,modulationIndex:10,carrier:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:0,sustain:1,release:.5}},modulator:{volume:-10,portamento:0,oscillator:{type:"triangle"},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.SimpleFM.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this},t.SimpleFM.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.SimpleFM.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity","modulationIndex"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.SimpleFM}),Module(function(t){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t.ExternalInput=function(){var e=this.optionsObject(arguments,["inputNum"],t.ExternalInput.defaults);t.Source.call(this,e),this._mediaStream=null,this._stream=null,this._constraints={audio:!0},this._inputNum=e.inputNum,this._gate=new t.Gain(0).connect(this.output)},t.extend(t.ExternalInput,t.Source),t.ExternalInput.defaults={inputNum:0},t.ExternalInput.prototype._getUserMedia=function(e){if(!t.ExternalInput.supported)throw new Error("browser does not support 'getUserMedia'");t.ExternalInput.sources[this._inputNum]&&(this._constraints={audio:{optional:[{sourceId:t.ExternalInput.sources[this._inputNum].id}]}}),navigator.getUserMedia(this._constraints,function(t){this._onStream(t),e()}.bind(this),function(t){e(t)})},t.ExternalInput.prototype._onStream=function(t){if(!this.isFunction(this.context.createMediaStreamSource))throw new Error("browser does not support the 'MediaStreamSourceNode'");this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this._gate))},t.ExternalInput.prototype.open=function(e){return e=this.defaultArg(e,t.noOp),t.ExternalInput.getSources(function(){this._getUserMedia(e)}.bind(this)),this},t.ExternalInput.prototype.close=function(){if(this._stream){var t=this._stream.getTracks()[this._inputNum];this.isUndef(t)||t.stop(),this._stream=null}return this},t.ExternalInput.prototype._start=function(t){return t=this.toSeconds(t),this._gate.gain.setValueAtTime(1,t),this},t.ExternalInput.prototype._stop=function(t){return t=this.toSeconds(t),this._gate.gain.setValueAtTime(0,t),this},t.ExternalInput.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.close(),this._mediaStream&&(this._mediaStream.disconnect(),this._mediaStream=null),this._constraints=null,this._gate.dispose(),this._gate=null,this},t.ExternalInput.sources=[],t.ExternalInput._canGetSources=!t.prototype.isUndef(window.MediaStreamTrack)&&t.prototype.isFunction(MediaStreamTrack.getSources),Object.defineProperty(t.ExternalInput,"supported",{get:function(){return t.prototype.isFunction(navigator.getUserMedia)}}),t.ExternalInput.getSources=function(e){return 0===t.ExternalInput.sources.length&&t.ExternalInput._canGetSources?MediaStreamTrack.getSources(function(i){for(var s=0;s<i.length;s++)"audio"===i[s].kind&&(t.ExternalInput.sources[s]=i[s]);e(t.ExternalInput.sources)}):e(t.ExternalInput.sources),this},t.ExternalInput}),Module(function(t){return t.Microphone=function(){t.ExternalInput.call(this,0)},t.extend(t.Microphone,t.ExternalInput),Object.defineProperty(t.Microphone,"supported",{get:function(){
return t.ExternalInput.supported}}),t.Microphone}),Module(function(t){return t.Clip=function(e,i){if(e>i){var s=e;e=i,i=s}this.min=this.input=new t.Min(i),this._readOnly("min"),this.max=this.output=new t.Max(e),this._readOnly("max"),this.min.connect(this.max)},t.extend(t.Clip,t.SignalBase),t.Clip.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("min"),this.min.dispose(),this.min=null,this._writable("max"),this.max.dispose(),this.max=null,this},t.Clip}),Module(function(t){return t.Normalize=function(e,i){this._inputMin=this.defaultArg(e,0),this._inputMax=this.defaultArg(i,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,"min",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}),Module(function(t){t.Route=function(i){i=this.defaultArg(i,2),t.call(this,1,i),this.gate=new t.Signal(0),this._readOnly("gate");for(var s=0;i>s;s++){var n=new e(s);this.output[s]=n,this.gate.connect(n.selecter),this.input.connect(n)}},t.extend(t.Route,t.SignalBase),t.Route.prototype.select=function(t,e){return t=Math.floor(t),this.gate.setValueAtTime(t,this.toSeconds(e)),this},t.Route.prototype.dispose=function(){this._writable("gate"),this.gate.dispose(),this.gate=null;for(var e=0;e<this.output.length;e++)this.output[e].dispose(),this.output[e]=null;return t.prototype.dispose.call(this),this};var e=function(e){this.selecter=new t.Equal(e),this.gate=this.input=this.output=this.context.createGain(),this.selecter.connect(this.gate.gain)};return t.extend(e),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.selecter.dispose(),this.selecter=null,this.gate.disconnect(),this.gate=null},t.Route}),Module(function(t){return t.Switch=function(e){e=this.defaultArg(e,!1),t.call(this),this.gate=new t.Signal(0),this._readOnly("gate"),this._thresh=new t.GreaterThan(.5),this.input.connect(this.output),this.gate.chain(this._thresh,this.output.gain),e&&this.open()},t.extend(t.Switch,t.SignalBase),t.Switch.prototype.open=function(t){return this.gate.setValueAtTime(1,this.toSeconds(t)),this},t.Switch.prototype.close=function(t){return this.gate.setValueAtTime(0,this.toSeconds(t)),this},t.Switch.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("gate"),this.gate.dispose(),this.gate=null,this._thresh.dispose(),this._thresh=null,this},t.Switch}),__WEBPACK_AMD_DEFINE_RESULT__=function(){return Tone}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,i){function s(t,e){return t*Math.pow(2,e)}var n={65:261.626,87:277.183,83:293.665,69:311.127,68:329.628,70:349.228,84:369.994,71:391.995,89:415.305,72:440,85:466.164,74:493.883,75:523.251,79:554.365,76:587.33,80:622.254,186:659.255,59:659.255,222:698.456,221:739.989,13:783.991},r={};(0,o["default"])(window).keydown(function(o){var a=o.keyCode;if(!r[a]){r[a]=!0;var h=n[a];h&&(o.preventDefault(),t.triggerAttack(s(h,i.synth1.octave)),e.triggerAttack(s(h,i.synth2.octave)))}}).keyup(function(o){var a=o.keyCode,h=n[a];t.triggerRelease(s(h,i.synth1.octave)),e.triggerRelease(s(h,i.synth2.octave)),delete r[o.keyCode]})};var n=i(1),o=s(n)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e,i,s,n,o,r){function a(a){switch(a.data[0]){case 157:t.triggerAttack(h(a.data[1],r.synth1)),e.triggerAttack(h(a.data[1],r.synth2));break;case 141:t.triggerRelease(h(a.data[1],r.synth1)),e.triggerRelease(h(a.data[1],r.synth2));break;case 189:1===a.data[1]&&i.set({value:a.data[2]/127},!0),2===a.data[1]&&s.set({value:a.data[2]/127},!0),3===a.data[1]&&n.set({value:a.data[2]/127},!0),4===a.data[1]&&o.set({value:a.data[2]/127},!0),5===a.data[1]&&o.set({value:a.data[2]/127},!0)}}function h(t,e){var i=440*Math.pow(2,(t-69)/12);return i*=Math.pow(2,e.octave)}var l=void 0,c=void 0;navigator.requestMIDIAccess().then(function(t){for(l=t.inputs.values(),c=l.next();c&&!c.done;c=l.next())c.value.onmidimessage=a}).then(null,console.error.bind(console))}},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=new o["default"].PolySynth(6,o["default"].SimpleSynth);return e.set({oscillator:{type:"sine"},volume:-15}),e};var n=i(2),o=s(n)},function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}var n=i(1),o=s(n),r=i(12),a=(s(r),i(9)),h=(s(a),i(2)),l=s(h),c=i(5),u=s(c),p=i(4),d=s(p),f=i(3),y=s(f);i(11),nx.onload=function(){function t(t,e){(0,o["default"])(t).on("click","a",function(i){(0,o["default"])(this).hasClass("dec-octave")?e.octave--:e.octave++,(0,o["default"])(t+" .octave-num").text(e.octave)})}function e(t,e,i){(0,o["default"])(t).on("click","a",function(s){(0,o["default"])(this).hasClass("dec-detune")?e.detune--:e.detune++,(0,o["default"])(t+" .detune-num").text(e.detune),i.set({oscillator:{detune:r.synth1.detune}})})}function i(t,e){(0,o["default"])(t).on("click","button",function(i){(0,o["default"])(t+" button").removeClass("active"),(0,o["default"])(this).addClass("active"),e.set({oscillator:{type:(0,o["default"])(this).data("wave")}})})}function s(t,e){t.on("*",function(t){e.set({oscillator:{volume:n(t.value,-40,16)}})})}function n(t,e,i){var s=e,n=i,o=0,r=1,a=(t-o)/(r-o);return a*(n-s)+s}var r={synth1:{octave:0,detune:0},synth2:{octave:0,detune:0}},a="#2C2D34",h="#E94822";ampdial.colors.accent=h,amp2dial.colors.fill=a,amp2dial.init(),ampdial.init(),cutoffdial.colors.accent=a,cutoffdial.init();var c=(0,u["default"])(),p=(0,u["default"])();(0,y["default"])(c,p,r);var f=new l["default"].Filter(12e3,"lowpass",-24),m=new l["default"].PingPongDelay,v=new l["default"].Freeverb,g=new l["default"].BitCrusher(4).toMaster(),w=new l["default"].LFO(5,400,4e3);w.connect(f.frequency),c.connect(f),p.connect(f),f.connect(m),m.connect(v),v.connect(g),c.set({envelope:{attack:.1}});(0,d["default"])(c,p,cutoffdial,lforate,verbwet,pingwet,r);v.wet.value=0,m.wet.value=0,g.wet.value=0,f.frequency.value=12e3,envadsr.sliders=4,envadsr.colors.accent=a,envadsr.init(),verbroom.colors.accent="#E6E6E6",verbroom.colors.fill=a,verbwet.colors.accent="#E6E6E6",verbwet.colors.fill=a,verbroom.init(),verbwet.init(),pingfb.colors.fill=a,pingwet.colors.fill=a,pingfb.init(),pingwet.init(),lfotoggle.colors.accent=a,lfotoggle.init(),envadsr.set({0:.1,1:.1,2:.3,3:1/8}),cutoffdial.set({value:1}),ampdial.set({value:.75},!0),amp2dial.set({value:.75},!0),s(ampdial,c),s(amp2dial,p),crushbits.on("*",function(t){g.bits=Math.floor(8*t.value)}),crushwet.on("*",function(t){g.wet.value=t.value}),envadsr.on("*",function(t){c.set({envelope:{attack:t.list[0],decay:t.list[1],sustain:t.list[2],release:8*t.list[3]}})}),verbwet.on("*",function(t){v.wet.value=t.value}),verbroom.on("*",function(t){v.roomSize.value=t.value}),pingfb.on("*",function(t){m.feedback.value=t.value}),pingwet.on("*",function(t){m.wet.value=t.value}),lforate.on("*",function(t){w.frequency.value=10*t.value}),lfotoggle.on("*",function(t){t.value?w.start():w.stop()}),cutoffdial.on("*",function(t){f.frequency.value=12e3*t.value}),t(".octave-contain",r.synth1),t(".octave-contain-2",r.synth2),e(".detune-contain",r.synth1,c),e(".detune-contain-2",r.synth2,p),i(".waves",c),i(".waves-2",p),(0,o["default"])(".filters").on("click","button",function(t){(0,o["default"])(".filters button").removeClass("active"),(0,o["default"])(this).addClass("active"),f.type=(0,o["default"])(this).data("filter")}),(0,o["default"])(".osc2-up").click(function(t){(0,o["default"])(".osc-2-contain").removeClass("slide-down"),(0,o["default"])(".osc-2-contain").addClass("slide-up")}),(0,o["default"])(".osc1-up").click(function(t){(0,o["default"])(".osc-2-contain").removeClass("slide-up"),(0,o["default"])(".osc-2-contain").addClass("slide-down")}),(0,o["default"])(".close-overlay").click(function(t){t.preventDefault(),(0,o["default"])(".overlay").removeClass("open"),(0,o["default"])(".overlay").addClass("close")})}},function(t,e,i){e=t.exports=i(8)(),e.push([t.id,'.clearfix:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}.clearfix{display:inline-block}* html .clearfix{height:1%}.clearfix{display:block}/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*{box-sizing:border-box}body,html{height:100%;font-family:proxima-nova,sans-serif}.modules{height:100%;margin:0;padding:0}.modules .waves{margin-bottom:1em}.modules h2{color:#fff;text-align:center;text-transform:uppercase}.modules li{display:inline-block;float:left;height:100%;width:25%}.modules button{text-align:center;margin:0 auto;display:block;font-family:inherit;font-size:inherit;color:inherit;background:none;cursor:pointer;padding:15px 70px;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative;-webkit-transition:all .3s;transition:all .3s;border:3px solid #fff;color:#fff;width:60%;margin-bottom:1em}.modules .osc{overflow:hidden}.modules .slide-up{transform:translateY(-100%)}.modules .slide-down{transform:translateY(100%)}.modules .osc-1-contain,.modules .osc-2-contain{-webkit-transition:-webkit-transform .5s ease-in-out;color:#fff;height:100vh;text-align:center;background-color:#2c2d34}.modules .osc-1-contain h2,.modules .osc-2-contain h2{margin:0;padding-top:20px;padding-bottom:20px}.modules .osc-1-contain button.active,.modules .osc-1-contain button:hover,.modules .osc-2-contain button.active,.modules .osc-2-contain button:hover{color:#2c2d34;background:#fff}.modules .osc-1-contain h3,.modules .osc-2-contain h3{text-transform:uppercase;font-weight:400;margin-top:0}.modules .osc-1-contain .dec-detune,.modules .osc-1-contain .dec-octave,.modules .osc-1-contain .inc-detune,.modules .osc-1-contain .inc-octave,.modules .osc-2-contain .dec-detune,.modules .osc-2-contain .dec-octave,.modules .osc-2-contain .inc-detune,.modules .osc-2-contain .inc-octave{color:#fff}.modules .osc-1-contain .detune-contain,.modules .osc-1-contain .detune-contain-2,.modules .osc-1-contain .octave-contain,.modules .osc-1-contain .octave-contain-2,.modules .osc-2-contain .detune-contain,.modules .osc-2-contain .detune-contain-2,.modules .osc-2-contain .octave-contain,.modules .osc-2-contain .octave-contain-2{width:50%;float:left;font-size:1em}.modules .osc-1-contain .detune-contain-2 span,.modules .osc-1-contain .detune-contain span,.modules .osc-1-contain .octave-contain-2 span,.modules .osc-1-contain .octave-contain span,.modules .osc-2-contain .detune-contain-2 span,.modules .osc-2-contain .detune-contain span,.modules .osc-2-contain .octave-contain-2 span,.modules .osc-2-contain .octave-contain span{font-weight:700;font-size:1.5em;padding:0 10px;position:relative;top:2px}.modules .osc-1-contain .amp-contain-2,.modules .osc-2-contain .amp-contain-2{clear:both;padding-top:1.5em}.modules .osc-2-contain{background-color:#e6e6e6;color:#2c2d34}.modules .osc-2-contain h2,.modules .osc-2-contain h3{color:#2c2d34}.modules .osc-2-contain button{color:#2c2d34;border:3px solid #2c2d34}.modules .osc-2-contain button.active,.modules .osc-2-contain button:hover{color:#e6e6e6;background:#2c2d34}.modules .osc-2-contain .dec-detune,.modules .osc-2-contain .dec-octave,.modules .osc-2-contain .inc-detune,.modules .osc-2-contain .inc-octave{color:#2c2d34;display:inline-block}.modules .osc-2-contain .amp-contain{clear:both}.modules .osc1-up,.modules .osc2-up{margin-top:1em}.modules .filter{color:#fff;text-align:center;background-color:#e94822}.modules .filter button.active,.modules .filter button:hover{color:#e94822;background:#fff}.modules .filter .filter-knob-contain{margin:0 auto}.modules .envelope h2{margin:0;padding-top:20px;padding-bottom:20px}.modules .envelope .env-contain{height:50%;background-color:#f2910a}.modules .envelope .adsr{margin-top:1em;color:#fff;text-align:center}.modules .envelope .adsr span{margin-left:3em;font-weight:700}.modules .envelope .adsr span:first-of-type{margin-left:0}.modules .envelope .lfo-contain{height:50%;background-color:#a64942;position:relative}.modules .envelope .toggle-contain canvas{position:absolute;top:10px;left:10px}.modules .envelope .lfo-inner-contain{text-align:center}.modules .envelope .lfo-inner-contain span{font-weight:700;text-align:center;color:#e6e6e6;position:relative;top:10px}.modules .envelope .lfo-inner-contain canvas,.modules .envelope .multi-contain canvas{padding-left:0;padding-right:0;margin-left:auto;margin-right:auto;display:block}.modules .effects{text-transform:uppercase;text-align:center;background-color:#efd510;color:#2c2d34}.modules .effects h2{color:#2c2d34}.modules .effects .verb-contain{background-color:#e94822;border-radius:8px;overflow:hidden;margin:0 1em;padding-bottom:2em}.modules .effects .ping-pong-contain{background-color:#e6e6e6}.modules .effects .bit-crush-contain,.modules .effects .ping-pong-contain{clear:both;border-radius:8px;overflow:hidden;margin:0 1em;margin-top:1em;padding-bottom:2em}.modules .effects .bit-crush-contain{background-color:#55e9bc}.modules .effects .knob-contain{display:inline-block;float:left;width:50%}.modules .effects .knob-contain canvas{padding-left:0;padding-right:0;margin-left:auto;margin-right:auto;display:block}.modules .effects .knob-contain span{font-weight:700;position:relative;top:10px}.modules .effects .distortion-contain{clear:both}.overlay{position:fixed;width:100%;height:100%;top:0;left:0;color:#fff;background:rgba(44,45,52,.95)}.overlay .overlay-close{width:80px;height:80px;position:absolute;right:20px;top:20px;overflow:hidden;border:none;text-indent:200%;color:transparent;outline:none;z-index:100}.overlay .overlay-content{text-align:center;position:relative;-webkit-transform:translateY(-50%);transform:translateY(-50%);top:20%}.overlay .overlay-content h3{margin:0;font-weight:700;font-size:8em}.overlay .overlay-content p{font-weight:400;font-size:1.2em;width:500px;display:inline-block}.overlay .overlay-content button{display:block;margin:0 auto;width:200px;text-align:center;font-family:inherit;font-size:inherit;background:none;cursor:pointer;padding:15px 70px;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative;-webkit-transition:all .3s;transition:all .3s;border:3px solid #fff;color:#fff;margin-top:2em}.overlay .overlay-content button.active,.overlay .overlay-content button:hover{color:#2c2d34;background:#fff}.overlay-hugeinc{opacity:0;visibility:hidden;-webkit-transition:opacity .5s,visibility 0s .5s;transition:opacity .5s,visibility 0s .5s}.overlay-hugeinc.open{opacity:1;visibility:visible;-webkit-transition:opacity .5s;transition:opacity .5s}.overlay-hugeinc .overlay-content{-webkit-perspective:1200px;perspective:1200px;opacity:.4;-webkit-transform:translateY(-25%) rotateX(35deg);transform:translateY(-25%) rotateX(35deg);-webkit-transition:-webkit-transform .5s,opacity .5s;transition:transform .5s,opacity .5s}.overlay-hugeinc.open .overlay-content{opacity:1;-webkit-transform:rotateX(0deg);transform:rotateX(0deg)}.overlay-hugeinc.close .overlay-content{-webkit-transform:translateY(25%) rotateX(-35deg);transform:translateY(25%) rotateX(-35deg)}@media screen and (max-height:30.5em){.overlay .overlay-content{height:70%;font-size:34px}}',""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var s={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(s[o]=!0)}for(n=0;n<e.length;n++){var r=e[n];"number"==typeof r[0]&&s[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),t.push(r))}},t}},function(module,exports,__webpack_require__){var require,require;(function(global){!function t(e,i,s){function n(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return require(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return n(i?i:t)},c,c.exports,t,e,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(t,e,s){var n=t("./lib/core/manager"),o=t("./lib/utils/dom"),r=t("./lib/utils/drawing"),a=t("./lib/utils/math"),h=t("extend");window.nx=new n,window.nx.onload=function(){},window.nx=h(window.nx,o),window.nx=h(window.nx,r),window.nx=h(window.nx,a),window.onload=function(){nx.addStylesheet();var t=document.getElementsByTagName("canvas");for(i=0;i<t.length;i++)nx.transform(t[i]);nx.isTouchDevice&&(document.addEventListener("touchmove",nx.blockMove,!0),document.addEventListener("touchstart",nx.blockMove,!0)),nx.onload(),nx.startPulse()}},{"./lib/core/manager":2,"./lib/utils/dom":4,"./lib/utils/drawing":5,"./lib/utils/math":6,extend:48}],2:[function(t,e,s){/** 
	  @title NexusUI API
	  @overview NexusUI is a JavaScript toolkit for easily creating musical interfaces in web browsers. Interfaces are rendered on HTML5 canvases and are ideal for web audio projects, mobile apps, or for sending OSC to external audio applications like Max.
	  @author Ben Taylor, Jesse Allison, Yemin Oh, Sébastien Piquemal
	  @copyright &copy; 2011-2014
	  @license MIT
	 */
var n=(t("../utils/timing"),t("events").EventEmitter),o=t("util"),r=t("../utils/transmit"),a=e.exports=function(){n.apply(this),this.widgets=new Object,this.elemTypeArr=new Array,this.aniItems=new Array,this.showLabels=!1,this.starttime=(new Date).getTime(),r&&(this.sendsTo=r.setGlobalTransmit,this.setAjaxPath=r.setAjaxPath,this.destination="js",this.ajaxPath="lib/nexusOSCRelay.php"),this.isTouchDevice="ontouchstart"in document.documentElement,this.metas=document.getElementsByTagName("meta"),this.globalWidgets=!0,this.font="gill sans",this.fontSize=14,this.fontWeight="bold",this.context=new(window.AudioContext||window.webkitAudioContext),this.sys=navigator.userAgent.toLowerCase(),this.isAndroid=this.sys.indexOf("android")>-1,this.isMobile=this.sys.indexOf("mobile")>-1,this.throttlePeriod=20};o.inherits(a,n),a.prototype.add=function(t,e){if(t){var i=document.createElement("canvas");if(i.setAttribute("nx",t),e){if((e.x||e.y)&&(i.style.position="absolute"),e.x&&(i.style.left=e.x+"px"),e.y&&(i.style.top=e.y+"px"),e.w&&(i.style.width=e.w,"string"!=typeof e.w&&(i.width=e.w)),e.h&&(i.style.height=e.h,"string"!=typeof e.h&&(i.height=e.h)),e.parent){var s;"string"==typeof e.parent?s=document.getElementById(e.parent):e.parent instanceof HTMLElement?s=e.parent:e.parent instanceof jQuery&&(s=e.parent[0])}e.name&&(i.id=e.name)}if(!s)var s=document.body;return s.appendChild(i),this.transform(i)}},a.prototype.transform=function(e,i){for(var s in nx.widgets)if(nx.widgets[s].canvasID==e.id)return;if(i)var n=i;else var n=e.getAttribute("nx");if(n){var o,r=0;for(j=0;j<this.elemTypeArr.length;j++)this.elemTypeArr[j]===n&&r++;if(this.elemTypeArr.push(n),!e.id){var a=r+1;e.id=n+a}if(n)try{var o=new(t("../widgets")[n])(e.id)}catch(h){return void console.log("creation of "+n+" failed")}return o.type=n,this.widgets[o.canvasID]=o,this.globalWidgets&&(window[o.canvasID]=this.widgets[o.canvasID]),o.init(),o}},a.prototype.transmit=function(t,e){this.makeOSC(this.emit,t,e),this.emit("*",t,e)},a.prototype.colorize=function(t,e){e||(e=t,t="accent"),this.colors[t]=e;for(var i in this.widgets)this.widgets[i].colors[t]=e,this.widgets[i].draw()},a.prototype.setThrottlePeriod=function(t){this.throttlePeriod=t;for(var e in this.widgets)this.widgets[e].throttlePeriod=this.throttlePeriod},a.prototype.colors={accent:"#ff5500",fill:"#eeeeee",border:"#bbbbbb",black:"#000000",white:"#FFFFFF"},a.prototype.startPulse=function(){this.pulseInt=setInterval("nx.pulse()",30)},a.prototype.stopPulse=function(){clearInterval(this.pulseInt)},a.prototype.pulse=function(){for(var t=0;t<this.aniItems.length;t++)this.aniItems[t]()},a.prototype.addAni=function(t){},a.prototype.removeAni=function(t){this.aniItems.splice(this.aniItems.indexOf(t))},a.prototype.addStylesheet=function(){var t="<style>select {width: 150px;padding: 5px 5px;font-size: 16px;color:#666666;border: solid 0px #CCC;border-radius: 5;outline: black;cursor:pointer;background-color:#EEE;font-family:gill sans;}input[type=text]::-moz-selection { background: transparent; }input[type=text]::selection { background: transparent; }input[type=text]::-webkit-selection { background: transparent; }canvas { cursor:pointer;border-radius:5px;moz-border-radius:5px;webkit-border-radius:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}input[type=text] { cursor:pointer;border-radius:5px;moz-border-radius:5px;webkit-border-radius:5px;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}</style>";document.head.innerHTML=document.head.innerHTML+t},a.prototype.setViewport=function(t){for(i=0;i<this.metas.length;i++)"viewport"==this.metas[i].name&&(this.metas[i].content="minimum-scale="+t+", maximum-scale="+t)},a.prototype.setLabels=function(t){"on"==t?this.showLabels=!0:this.showLabels=!1;for(var e in this.widgets)this.widgets[e].draw()},a.prototype.setProp=function(t,e){if(t&&e){nx[t]=e;for(var i in this.widgets)this.widgets[i][t]=e,this.widgets[i].draw()}},a.prototype.blockMove=function(t){t.target.attributes.nx&&(t.preventDefault(),this.isAndroid&&(t.stopPropagation?t.stopPropagation():!1))}},{"../utils/timing":7,"../utils/transmit":8,"../widgets":17,events:43,util:47}],3:[function(require,module,exports){var EventEmitter=require("events").EventEmitter,util=require("util"),domUtils=require("../utils/dom"),drawingUtils=require("../utils/drawing"),timingUtils=require("../utils/timing"),transmit=require("../utils/transmit"),widget=module.exports=function(t){if(EventEmitter.apply(this),this.preClick=this.preClick.bind(this),this.preMove=this.preMove.bind(this),this.preRelease=this.preRelease.bind(this),this.preTouch=this.preTouch.bind(this),this.preTouchMove=this.preTouchMove.bind(this),this.preTouchRelease=this.preTouchRelease.bind(this),this.canvasID=t,this.oscPath="/"+t,!document.getElementById(t)){var e=document.createElement("canvas");e.id=t,document.body.appendChild(e)}if(this.type=void 0,this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.checkPercentage(),this.canvas.className=this.canvas.className?this.canvas.className+=" nx":"nx",this.canvas.height=window.getComputedStyle(document.getElementById(t),null).getPropertyValue("height").replace("px",""),this.canvas.width=window.getComputedStyle(document.getElementById(t),null).getPropertyValue("width").replace("px",""),this.height=parseInt(window.getComputedStyle(document.getElementById(t),null).getPropertyValue("height").replace("px","")),this.width=parseInt(window.getComputedStyle(document.getElementById(t),null).getPropertyValue("width").replace("px","")),this.defaultSize||(this.defaultSize={width:100,height:100}),300==this.width&&150==this.height)this.canvas.width=2*this.defaultSize.width,this.canvas.height=2*this.defaultSize.height,this.width=this.defaultSize.width,this.height=this.defaultSize.height;else{var i=this.width,s=this.height;this.canvas.width=2*i,this.canvas.height=2*s,this.width=i,this.height=s}this.canvas.style.width=this.canvas.width/2+"px",this.canvas.style.height=this.canvas.height/2+"px",this.context.scale(2,2),this.offset=domUtils.findPosition(this.canvas),this.center={x:this.width/2,y:this.height/2},this.lineWidth=2,this.context.lineWidth=this.lineWidth,this.colors=new Object,this.colors.accent=nx.colors.accent,this.colors.fill=nx.colors.fill,this.colors.border=nx.colors.border,this.colors.accentborder=nx.colors.accentborder,this.colors.black=nx.colors.black,this.colors.white=nx.colors.white,this.colors.highlight=nx.colors.highlight,this.clickPos={x:0,y:0},this.clickPos.touches=new Array,this.clicked=!1,this.value=0,this.val=new Object,this.pval=new Object,this.nodePos=new Array,this.deltaMove=new Object,this.throttlePeriod=nx.throttlePeriod,this.throttle=timingUtils.throttle,this.label=!1,this.hasMoved=!1,this.isRecording=!1,this.tapeNum=0,this.recorder=null,transmit&&(this.sendsTo=transmit.setWidgetTransmit,this.destination="js"),this.events=new Object,nx.isTouchDevice?(this.canvas.ontouchstart=this.preTouch,this.canvas.ontouchmove=this.preTouchMove,this.canvas.ontouchend=this.preTouchRelease):this.canvas.addEventListener("mousedown",this.preClick,!1),this.fontSize=nx.fontSize,this.fontWeight=nx.fontWeight,this.font=nx.font,this.clickCB=!1,this.releaseCB=!1,this.actuated=!0};util.inherits(widget,EventEmitter),widget.prototype.transmit=nx.transmit,widget.prototype.makeOSC=function(t,e){if(this.action=t,"object"==typeof e&&null!==e)for(var i in e)if("object"==typeof e[i]&&null!==e[i])for(var s in e[i])this.action(i+"/"+s,e[i][s]);else this.action(i,e[i]);else"number"!=typeof e&&"string"!=typeof e||this.action("value",e)},widget.prototype.getOffset=function(){this.offset=domUtils.findPosition(this.canvas)},widget.prototype.preClick=function(t){this.actuated=!0,this.offset=domUtils.findPosition(this.canvas),document.addEventListener("mousemove",this.preMove,!1),document.addEventListener("mouseup",this.preRelease,!1),this.clickPos=domUtils.getCursorPosition(t,this.offset),this.clicked=!0,this.deltaMove.x=0,this.deltaMove.y=0,this.hasMoved=!1,this.clickCB?this.clickCB():null,this.click(t),document.body.style.userSelect="none",document.body.style.mozUserSelect="none",document.body.style.webkitUserSelect="none"},widget.prototype.preMove=function(t){this.actuated=!0;var e=domUtils.getCursorPosition(t,this.offset);this.deltaMove.y=e.y-this.clickPos.y,this.deltaMove.x=e.x-this.clickPos.x,this.clickPos=e,this.hasMoved=!0,this.move(t)},widget.prototype.preRelease=function(t){this.actuated=!0,document.removeEventListener("mousemove",this.preMove,!1),document.removeEventListener("mouseup",this.preRelease,!1),this.clicked=!1,this.releaseCB?this.releaseCB():null,this.release(),document.body.style.userSelect="text",document.body.style.mozUserSelect="text",document.body.style.webkitUserSelect="text"},widget.prototype.preTouch=function(t){this.actuated=!0,this.clickPos=domUtils.getTouchPosition(t,this.offset),this.clicked=!0,this.deltaMove.x=0,this.deltaMove.y=0,this.hasMoved=!1,this.touch(t)},widget.prototype.preTouchMove=function(t){if(this.clicked){this.actuated=!0;var e=domUtils.getTouchPosition(t,this.offset);this.deltaMove.y=e.y-this.clickPos.y,this.deltaMove.x=e.x-this.clickPos.x,this.clickPos=e,this.hasMoved=!0,this.touchMove(t)}},widget.prototype.preTouchRelease=function(t){if(this.actuated=!0,t.targetTouches.length>=1){var e=domUtils.getTouchPosition(t,this.offset);this.clickPos=e}else this.clicked=!1;this.touchRelease()},widget.prototype.draw=function(){},widget.prototype.click=function(){},widget.prototype.move=function(){},widget.prototype.release=function(){},widget.prototype.touch=function(){this.click()},widget.prototype.touchMove=function(){this.move()},widget.prototype.touchRelease=function(){this.release()},widget.prototype.adjustSizeIfDefault=function(){300==this.width&&150==this.height&&(this.canvas.width=this.defaultSize.width,this.canvas.height=this.defaultSize.height,this.width=this.defaultSize.width,this.height=this.defaultSize.height)},widget.prototype.makeRoundedBG=function(){this.bgLeft=this.lineWidth,this.bgRight=this.width-this.lineWidth,this.bgTop=this.lineWidth,this.bgBottom=this.height-this.lineWidth,this.bgHeight=this.bgBottom-this.lineWidth,this.bgWidth=this.bgRight-this.lineWidth,drawingUtils.makeRoundRect(this.context,this.bgLeft,this.bgTop,this.bgWidth,this.bgHeight)},widget.prototype.erase=function(){this.context.clearRect(0,0,this.width,this.height)},widget.prototype.hideCursor=function(){this.canvas.style.cursor="none"},widget.prototype.showCursor=function(){this.canvas.style.cursor="auto"},widget.prototype.getName=function(){return"deprecated -- use widget.type instead"},widget.prototype.set=function(t,e){if(this.actuated=!1,"object"==typeof this.val&&"null"!==this.val){if("object"==typeof t&&"null"!==t)for(var i in t)this.val[i]=t[i]}else"string"!=typeof this.val&&"number"!=typeof this.val||("object"==typeof t&&"null"!==t?(this.val=t.value,this.draw()):"string"!=typeof t&&"number"!=typeof t||(this.val=t));this.draw(),e&&this.transmit(this.val,!0)},widget.prototype.destroy=function(){var t=nx.elemTypeArr.indexOf(this.getName());nx.elemTypeArr.splice(t,1),this.canvas.ontouchmove=null,this.canvas.ontouchend=null,this.canvas.onclick=null,this.canvas.onmousemove=null,this.canvas.onmouseoff=null,document.removeEventListener("mousemove",this.preMove,!1),document.removeEventListener("mouseup",this.preRelease,!1);var e=document.getElementById(this.canvasID);e&&e.parentNode.removeChild(e),this.customDestroy();var i=this.canvasID;delete nx.widgets[i],delete window[i]},widget.prototype.customDestroy=function(){},widget.prototype.wrapText=function(t,e,i,s,n){if(t){for(var o=t.split(" "),r="",a=0;a<o.length;a++){var h=r+o[a]+" ",l=this.context.measureText(h),c=l.width;c>s&&a>0?(this.context.fillText(r,e,i),r=o[a]+" ",i+=n):r=h}this.context.fillText(r,e,i)}},widget.prototype.drawLabel=function(){if(this.showLabels)with(this.context)globalAlpha=.9,fillStyle=this.colors.fill,fillRect(this.width-100,this.height-20,100,20),globalAlpha=1,beginPath(),fillStyle=this.colors.border,font="bold 15px courier",textAlign="center",fillText(this.oscPath,this.width-50,this.height-5),textAlign="left",closePath()},widget.prototype.saveCanv=function(){var t=this.canvas.toDataURL("image/png").replace("image/png","image/octet-stream");window.location.href=t},widget.prototype.setFont=function(){with(this.context)textAlign="center",textBaseline="middle",font=this.fontWeight+" "+this.fontSize+"px "+this.font,fillStyle=this.colors.black,globalAlpha=.7},widget.prototype.checkPercentage=function(){var t=this.canvas.style.width,e=this.canvas.style.height;(t.indexOf("%")>=0||e.indexOf("%")>=0)&&(this.percent={w:t.indexOf("%")>=0?t.replace("%",""):!1,h:e.indexOf("%")>=0?e.replace("%",""):!1},this.stretch())},widget.prototype.stretch=function(){window.addEventListener("resize",function(t){if(this.percent.w){var e=window.getComputedStyle(this.canvas.parentNode,null).getPropertyValue("width").replace("px","");e*=this.percent.w/100}else var e=!1;if(this.percent.h){var i=window.getComputedStyle(this.canvas.parentNode,null).getPropertyValue("height").replace("px","");i*=this.percent.h/100}else var i=!1;this.resize(e,i)}.bind(this))},widget.prototype.resize=function(t,e){this.canvas.width=t?2*t:this.canvas.width,this.canvas.height=e?2*e:this.canvas.height,this.width=t?t:this.width,this.height=e?e:this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.context.scale(2,2),this.center={x:this.width/2,y:this.height/2},this.init(),this.draw()}},{"../utils/dom":4,"../utils/drawing":5,"../utils/timing":7,"../utils/transmit":8,events:43,util:47}],4:[function(t,e,i){i.findPosition=function(t){var e=document.body,i=document.defaultView,s=document.documentElement,n=document.createElement("div");n.style.paddingLeft=n.style.width="1px",e.appendChild(n);var o=2==n.offsetWidth;e.removeChild(n),n=t.getBoundingClientRect();var r=s.clientTop||e.clientTop||0,a=s.clientLeft||e.clientLeft||0,h=i.pageYOffset||o&&s.scrollTop||e.scrollTop,l=i.pageXOffset||o&&s.scrollLeft||e.scrollLeft;return{top:n.top+h-r,left:n.left+l-a}},i.getCursorPosition=function(t,e){var i,s;void 0!=t.pageX&&void 0!=t.pageY?(i=t.pageX,s=t.pageY):(i=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,s=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),i-=e.left,s-=e.top;var n={x:i,y:s};return n.touches=[{x:i,y:s}],n},i.getTouchPosition=function(t,e){var i,s;i=t.targetTouches[0].pageX,s=t.targetTouches[0].pageY,i-=e.left,s-=e.top;var n={x:i,y:s};n.touches=new Array;for(var o=0;o<t.targetTouches.length;o++)n.touches.push({x:t.targetTouches[o].pageX-e.left,y:t.targetTouches[o].pageY-e.top});n.changed=new Array;for(var o=0;o<t.changedTouches.length;o++)n.changed.push({x:t.changedTouches[o].pageX-e.left,y:t.changedTouches[o].pageY-e.top});return n}},{}],5:[function(require,module,exports){var math=require("./math");exports.randomColor=function(){return"rgb("+math.random(250)+","+math.random(250)+","+math.random(250)+")"},exports.hexToRgb=function(t,e){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(i,function(t,e,i,s){return e+e+i+i+s+s});var s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);e||(e=.5);var n=parseInt(s[1],16),o=parseInt(s[2],16),r=parseInt(s[3],16);return"rgba("+n+","+o+","+r+","+e+")"},exports.isInside=function(t,e){return t.x>e.x&&t.x<e.x+e.w&&t.y>e.y&&t.y<e.y+e.h},exports.makeRoundRect=function(t,e,i,s,n,o){var r=e,a=i,h=s+r,l=n+a;o||(o=2),t.beginPath(),t.moveTo(r+o,a),t.lineTo(h-o,a),t.quadraticCurveTo(h,a,h,a+o),t.lineTo(h,l-o),t.quadraticCurveTo(h,l,h-o,l),t.lineTo(r+o,l),t.quadraticCurveTo(r,l,r,l-o),t.lineTo(r,a+o),t.quadraticCurveTo(r,a,r+o,a),t.closePath()},exports.text=function(context,text,position){with(position||(position=[10,10]),context)beginPath(),font="bold 12px sans-serif",fillText(text,position[0],position[1]),closePath()}},{"./math":6}],6:[function(t,e,i){i.toPolar=function(t,e){var i=Math.sqrt(t*t+e*e),s=Math.atan2(e,t);return 0>s&&(s+=2*Math.PI),{radius:i,angle:s}},i.toCartesian=function(t,e){var i=Math.cos(e),s=Math.sin(e);return{x:t*i,y:t*s*-1}},i.clip=function(t,e,i){return Math.min(i,Math.max(e,t))},i.prune=function(t,e){if("number"==typeof t)t=parseFloat(t.toFixed(e));else if(t instanceof Array)for(var i=0;i<t.length;i++)"number"==typeof t[i]&&(t[i]=parseFloat(t[i].toFixed(e)));return t},i.scale=function(t,e,i,s,n){return(t-e)*(n-s)/(i-e)+s},i.invert=function(t){return i.scale(t,1,0,0,1)},i.bounce=function(t,e,i,s){return t>e&&i>t?s:e>=t?Math.abs(s):t>=i?-1*Math.abs(s):void 0},i.mtof=function(t){return 440*Math.pow(2,(t-69)/12)},i.random=function(t){return Math.floor(Math.random()*t)},i.interp=function(t,e,i){return t*(i-e)+e},i.lphistory={},i.lp=function(t,e,i){this.lphistory[t]||(this.lphistory[t]=[]);var s=0;this.lphistory[t].push(e),this.lphistory[t].length>i&&this.lphistory[t].splice(0,1);for(var n=0;n<this.lphistory[t].length;n++)s+=this.lphistory[t][n];var o=s/this.lphistory[t].length;return o},i.lp2=function(t,e){for(var i=0,s=0;s<this.lphistory.length;s++)i+=this.lphistory[s];i+=t;var n=i/(this.lphistory.length+1);return this.lphistory.push(n),this.lphistory.length>e&&this.lphistory.splice(0,1),n},i.lp3=function(t,e,i){var s=t+e*i;return newvalue=s/(i+1),newvalue}},{}],7:[function(t,e,i){i.throttle=function(t,e){var i;return function(){var s=this,n=arguments;i||(i=setTimeout(function(){i=null;try{t.apply(s,n)}catch(e){console.log(e)}},e))}}},{}],8:[function(t,e,i){i.defineTransmit=function(t){var e;if("function"==typeof t)return t;switch(t){case"js":return e=function(t,e){this.makeOSC(this.emit,t,e),this.emit("*",t,e)};case"ajax":return e=function(t){this.makeOSC(i.ajaxTransmit,t)};case"node":return e=function(t){this.makeOSC(i.nodeTransmit,t)};case"ios":return e=function(t){};case"max":return e=function(t){this.makeOSC(i.maxTransmit,t)};case"wc":return e=function(t,e){this.emit("internal",t,e)}}},i.setGlobalTransmit=function(t){var e=i.defineTransmit(t);this.transmit=e,this.destination=t;for(var s in nx.widgets)this.widgets[s].transmit=e,this.widgets[s].destination=t},i.setWidgetTransmit=function(t){var e=i.defineTransmit(t);this.transmit=e,this.destination=t},i.ajaxTransmit=function(t,e){var i="value"==t?this.oscPath:this.oscPath+"/"+t;xmlhttp=new XMLHttpRequest,xmlhttp.open("POST",nx.ajaxPath,!0),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.send("oscName="+i+"&data="+e)},i.setAjaxPath=function(t){this.ajaxPath=t},i.nodeTransmit=function(t,e){var i={oscName:"value"==t?this.oscPath:this.oscPath+"/"+t,value:e};socket.emit("nx",i)},i.maxTransmit=function(t,e){var i="value"==t?this.oscPath:this.oscPath+"/"+t;window.max.outlet(i+" "+e)}},{}],9:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),banner=module.exports=function(t){this.defaultSize={width:100,height:40},widget.call(this,t),this.message1="Powered By",this.message2="NexusUI",this.link="http://www.nexusosc.com",this.isLink=!0};util.inherits(banner,widget),banner.prototype.init=function(){this.draw()},banner.prototype.draw=function(){with(this.context)globalAlpha=.1,fillStyle=this.colors.accent,beginPath(),moveTo(0,10),lineTo(10,this.height/2+5),lineTo(0,this.height),lineTo(30,this.height),lineTo(30,10),fill(),moveTo(this.width-30,10),lineTo(this.width-30,this.height),lineTo(this.width,this.height),lineTo(this.width-10,this.height/2+5),lineTo(this.width,10),fill(),closePath(),globalAlpha=1,fillStyle=this.colors.accent,fillRect(15,0,this.width-30,this.height-10),fillStyle=this.colors.white,font=this.fontWeight+" "+this.height/5+"px "+this.font,textAlign="center",fillText(this.message1,this.width/2,this.height/3.3),fillText(this.message2,this.width/2,this.height/3.3*2),fillStyle=this.colors.black,beginPath(),moveTo(15,this.height-10),lineTo(30,this.height),lineTo(30,this.height-10),lineTo(15,this.height-10),fill(),moveTo(this.width-15,this.height-10),lineTo(this.width-30,this.height),lineTo(this.width-30,this.height-10),lineTo(this.width-15,this.height-10),fill(),closePath()},banner.prototype.click=function(){this.isLink&&(window.location=this.link)}},{"../core/widget":3,util:47}],10:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),drawing=require("../utils/drawing"),button=module.exports=function(t){this.defaultSize={width:50,height:50},widget.call(this,t),this.val={press:0},this.mode="aftertouch",this.lockResize=!0,this.image=null,this.imageHover=null,this.imageTouch=null,this.subval=new Object,this.init()};util.inherits(button,widget),button.prototype.init=function(){this.center={x:this.width/2,y:this.height/2},this.radius=Math.min(this.center.x,this.center.y)-this.lineWidth/2,this.draw()},button.prototype.draw=function(){with(this.erase(),this.context){if(null!==this.image)this.val.press?this.imageTouch?drawImage(this.imageTouch,0,0):(drawImage(this.image,0,0),globalAlpha=.5,fillStyle=this.colors.accent,fillRect(0,0,this.width,this.height),globalAlpha=1):drawImage(this.image,0,0);else if(this.val.press?this.val.press&&(fillStyle=this.colors.accent):fillStyle=this.colors.fill,beginPath(),arc(this.center.x,this.center.y,this.radius,0,2*Math.PI,!0),fill(),closePath(),this.val.press&&"aftertouch"==this.mode){var x=nx.clip(this.clickPos.x,.2*this.width,this.width/1.3),y=nx.clip(this.clickPos.y,.2*this.height,this.height/1.3),gradient=this.context.createRadialGradient(x,y,this.width/6,this.center.x,this.center.y,1.3*this.radius);gradient.addColorStop(0,this.colors.accent),gradient.addColorStop(1,"white"),strokeStyle=gradient,lineWidth=this.width/20,beginPath(),arc(this.center.x,this.center.y,this.radius-this.width/40,0,2*Math.PI,!0),stroke(),closePath()}this.drawLabel()}},button.prototype.click=function(t){drawing.isInside(this.clickPos,{x:this.center.x-this.radius,y:this.center.y-this.radius,w:2*this.radius,h:2*this.radius})&&(this.val.press=1,"aftertouch"==this.mode&&(this.val.x=this.clickPos.x,this.val.y=this.clickPos.y),this.transmit(this.val),this.draw())},button.prototype.move=function(){"aftertouch"==this.mode&&(this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.subval.x=this.clickPos.x,this.subval.y=this.clickPos.y,this.transmit(this.subval),this.draw())},button.prototype.release=function(){this.val.press=0,"toggle"!=this.mode&&"aftertouch"!=this.mode||this.transmit(this.val),this.draw()},button.prototype.setImage=function(t){this.image=new Image,this.image.onload=function(){this.draw()},this.image.src=t},button.prototype.setHoverImage=function(t){this.imageHover=new Image,this.imageHover.onload=function(){this.draw()},this.imageHover.src=t},button.prototype.setTouchImage=function(t){this.imageTouch=new Image,this.imageTouch.onload=this.draw(),this.imageTouch.src=t}},{"../core/widget":3,"../utils/drawing":5,util:47}],11:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),colors=module.exports=function(t){this.defaultSize={width:100,height:100},widget.call(this,t),this.init()};util.inherits(colors,widget),colors.prototype.init=function(){this.gradient1=this.context.createLinearGradient(0,0,this.width,0),this.gradient1.addColorStop(0,"#F00"),this.gradient1.addColorStop(.17,"#FF0"),this.gradient1.addColorStop(.34,"#0F0"),this.gradient1.addColorStop(.51,"#0FF"),this.gradient1.addColorStop(.68,"#00F"),this.gradient1.addColorStop(.85,"#F0F"),this.gradient1.addColorStop(1,"#F00"),this.gradient2=this.context.createLinearGradient(0,0,0,this.height),this.gradient2.addColorStop(0,"rgba(0,0,0,255)"),this.gradient2.addColorStop(.49,"rgba(0,0,0,0)"),this.gradient2.addColorStop(.51,"rgba(255,255,255,0)"),this.gradient2.addColorStop(.95,"rgba(255,255,255,255)"),this.draw()},colors.prototype.draw=function(){with(this.erase(),this.context)fillStyle=this.gradient1,fillRect(0,0,this.width,this.height),fillStyle=this.gradient2,fillRect(0,0,this.width,this.height);this.drawLabel()},colors.prototype.drawColor=function(){with(this.context)fillStyle="rgb("+this.val.r+","+this.val.g+","+this.val.b+")",fillRect(0,.95*this.height,this.width,.05*this.height)},colors.prototype.click=function(t){if(this.clickPos.x>0&&this.clickPos.y>0&&this.clickPos.x<this.width&&this.clickPos.y<this.height){var e=this.context.getImageData(2*this.clickPos.x,2*this.clickPos.y,1,1);this.val={r:e.data[0],g:e.data[1],b:e.data[2]},this.transmit(this.val),this.drawColor()}},colors.prototype.move=function(t){this.click(t)}},{"../core/widget":3,util:47}],12:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),comment=module.exports=function(t){this.defaultSize={width:75,height:25},widget.call(this,t),this.val={text:"comment"},this.sizeSet=!1,this.init()};util.inherits(comment,widget),comment.prototype.setSize=function(t){this.size=t,this.sizeSet=!0,this.draw()},comment.prototype.init=function(){this.draw()},comment.prototype.draw=function(){with(this.sizeSet||(this.size=Math.sqrt(this.width*this.height/this.val.text.length)),this.erase(),this.context)fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),beginPath(),moveTo(0,this.height),lineTo(this.width,this.height),closePath(),fillStyle=this.colors.black,textAlign="left",font=this.size+"px Gill Sans";this.wrapText(this.val.text,6,3+this.size,this.width-6,this.size)}},{"../core/widget":3,util:47}],13:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),crossfade=module.exports=function(t){this.defaultSize={width:100,height:30},widget.call(this,t),this.val.value=.7,this.label="",this.init()};util.inherits(crossfade,widget),crossfade.prototype.init=function(){null!=this.canvas.getAttribute("label")&&(this.label=this.canvas.getAttribute("label")),this.draw()},crossfade.prototype.draw=function(){with(this.erase(),this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),nx.showLabels&&(this.setFont(),fillText(this.label,this.width/2,this.height/2),globalAlpha=1);var x1=this.width/2,y1=0,x2=this.val.value/2*this.width,y2=this.height;fillStyle=this.colors.accent,fillRect(x1,y1,x2,y2),fillRect(x1-1,y1,2,y2)}},crossfade.prototype.click=function(){this.move()},crossfade.prototype.move=function(){var t=nx.scale(this.clickPos.x/this.width,0,1,-1,1);this.val.value=math.prune(math.clip(t,-1,1),3),this.draw(),this.transmit(this.val)}},{"../core/widget":3,"../utils/math":6,util:47}],14:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),dial=module.exports=function(t){this.defaultSize={width:50,height:50},widget.call(this,t),this.circleSize,this.handleLength,this.val={value:0},this.responsivity=.004,this.aniStart=0,this.aniStop=1,this.aniMove=.01,this.lockResize=!0,this.init()};util.inherits(dial,widget),dial.prototype.init=function(){return this.circleSize=Math.min(this.center.x,this.center.y),this.handleLength=this.circleSize,this.mindim=Math.min(this.width,this.height),this.mindim<101&&this.handleLength--,this.mindim<101||this.mindim<101?this.accentWidth=1*this.lineWidth:this.accentWidth=2*this.lineWidth,this.draw(),1},dial.prototype.draw=function(){var dial_angle=2*(1-this.val.value)*Math.PI+1.5*Math.PI,dial_position=2*(this.val.value+.25)*Math.PI,point=math.toCartesian(this.handleLength,dial_angle);with(this.erase(),this.context)fillStyle=this.colors.fill,beginPath(),arc(this.center.x,this.center.y,this.circleSize-1,0,2*Math.PI,!0),fill(),closePath(),beginPath(),lineWidth=this.accentWidth,arc(this.center.x,this.center.y,this.circleSize,.5*Math.PI,dial_position,!1),lineTo(this.center.x,this.center.y),globalAlpha=.1,fillStyle=this.colors.accent,fill(),globalAlpha=1,closePath(),beginPath(),lineWidth=this.accentWidth,arc(this.center.x,this.center.y,this.circleSize-this.lineWidth,.5*Math.PI,dial_position,!1),strokeStyle=this.colors.accent,stroke(),closePath(),beginPath(),lineWidth=this.accentWidth,strokeStyle=this.colors.accent,moveTo(this.center.x,this.center.y),lineTo(point.x+this.center.x,point.y+this.center.y),stroke(),closePath(),beginPath(),fillStyle=this.colors.accent,arc(this.center.x,this.center.y,this.circleSize/8,0,2*Math.PI,!1),fill(),closePath();this.drawLabel()},dial.prototype.click=function(t){this.val.value=math.prune(this.val.value,4),this.transmit(this.val),this.draw(),this.aniStart=this.val.value},dial.prototype.move=function(){this.val.value=math.clip(this.val.value-this.deltaMove.y*this.responsivity,0,1),this.val.value=math.prune(this.val.value,4),this.transmit(this.val),this.draw()},dial.prototype.release=function(){this.aniStop=this.val.value},dial.prototype.animate=function(t){switch(t){case"bounce":nx.aniItems.push(this.aniBounce.bind(this));break;case"none":nx.aniItems.splice(nx.aniItems.indexOf(this.aniBounce))}},dial.prototype.aniBounce=function(){this.clicked||(this.val.value+=this.aniMove,this.aniStop<this.aniStart&&(this.stopPlaceholder=this.aniStop,this.aniStop=this.aniStart,this.aniStart=this.stopPlaceholder),this.aniMove=math.bounce(this.val.value,this.aniStart,this.aniStop,this.aniMove),this.draw(),this.val.value=math.prune(this.val.value,4),this.transmit(this.val))}},{"../core/widget":3,"../utils/math":6,util:47}],15:[function(require,module,exports){var startTime=0,math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),envelope=module.exports=function(t){this.defaultSize={width:200,height:100},widget.call(this,t),this.nodeSize=1,this.active=!1,this.duration=1e3,this.looping=!1,this.scanIndex=0,this.val={index:0,amp:0,points:[{x:.1,y:.4},{x:.35,y:.6},{x:.65,y:.2},{x:.9,y:.4}]};nx.aniItems.push(this.pulse.bind(this)),this.init()};util.inherits(envelope,widget),envelope.prototype.init=function(){this.mindim=this.width<this.height?this.width:this.height,this.draw()},envelope.prototype.draw=function(){with(this.erase(),this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),fillStyle=this.colors.accent;var centerx=this.mindim/10,centery=this.height-this.mindim/10;beginPath(),moveTo(centerx,centery),arc(centerx,centery,this.mindim/10,1.5*Math.PI,2*Math.PI*this.val.index+1.5*Math.PI,!1),fill(),closePath();for(var drawingX=[],drawingY=[],i=0;i<this.val.points.length;i++)drawingX[i]=this.val.points[i].x*this.width,drawingY[i]=(1-this.val.points[i].y)*this.height,drawingX[i]<this.bgLeft+this.nodeSize?drawingX[i]=this.bgLeft+this.nodeSize:drawingX[i]>this.bgRight-this.nodeSize&&(drawingX[i]=this.bgRight-this.nodeSize),drawingY[i]<this.bgTop+this.nodeSize?drawingY[i]=this.bgTop+this.nodeSize:drawingY[i]>this.bgBottom-this.nodeSize&&(drawingY[i]=this.bgBottom-this.nodeSize);for(var j=0;j<drawingX.length;j++){var size=this.mindim/25;beginPath(),arc(drawingX[j],drawingY[j],size,0,2*Math.PI,!1),fillStyle=this.colors.accent,fill(),closePath()}beginPath(),strokeStyle=this.colors.accent,moveTo(-5,this.height),lineTo(-5,(1-this.val.points[0].y)*this.height);for(var j=0;j<drawingX.length;j++)lineTo(drawingX[j],drawingY[j]);lineTo(this.width+5,(1-this.val.points[this.val.points.length-1].y)*this.height),lineTo(this.width+5,this.height),stroke(),globalAlpha=.2,fillStyle=this.colors.accent,fill(),globalAlpha=1,closePath()}this.drawLabel()},envelope.prototype.scaleNode=function(t){var e=t,i=0,s=this.width,n=this.val.points[e].x,o=this.height-this.val.points[e].y,r=math.clip(n/this.width,0,1),a=math.clip(o/this.height,0,1);this.val.points[e].x=math.prune(r,3),this.val.points[e].y=math.prune(a,3),e>0&&(i=this.val.points[e-1].x),this.val.points.length>e+1&&(s=this.val.points[e+1].x),this.val.points[e].x<i&&(this.val.points.splice(e-1,0,this.val.points.splice(e,1)[0]),e-=1,selectedNode=e),this.val.points[e].x>s&&(this.val.points.splice(e+1,0,this.val.points.splice(e,1)[0]),e+=1,selectedNode=e)},envelope.prototype.click=function(){selectedNode=this.findNearestNode(this.clickPos.x/this.width,this.clickPos.y/this.height,this.val.points),this.transmit(this.val),this.draw()},envelope.prototype.move=function(){
this.clicked&&(this.val.points[selectedNode].x=this.clickPos.x,this.val.points[selectedNode].y=this.clickPos.y,this.scaleNode(selectedNode),this.transmit(this.val),this.draw())},envelope.prototype.release=function(){this.hasMoved||this.val.points.splice(selectedNode,1),this.draw(),selectedNode=null},envelope.prototype.pulse=function(){if(this.active){var t=(nx.context.currentTime-startTime)/(this.duration/1e3);if(t>=1&&(this.looping?(t-=1,startTime+=this.duration/1e3,this.val.index=0,this.scanIndex=0):this.stop()),this.val.index=t,this.val.index>this.val.points[this.val.points.length-1].x)this.val.amp=this.val.points[this.val.points.length-1].y;else if(this.val.index<this.val.points[0].x)this.val.amp=this.val.points[0].y;else{for(;t>this.val.points[this.scanIndex].x;)this.scanIndex++;var e=this.val.points[this.scanIndex].x,i=this.val.points[this.scanIndex-1].x,s=this.val.points[this.scanIndex].y,n=this.val.points[this.scanIndex-1].y;this.val.amp=math.interp((this.val.index-i)/(e-i),n,s)}this.transmit(this.val),this.draw()}},envelope.prototype.start=function(){this.active=!0,this.val.index=0,startTime=nx.context.currentTime},envelope.prototype.stop=function(){this.active=!1,this.val.index=0,this.draw()},envelope.prototype.findNearestNode=function(t,e,i){var s=null,n=1e3,o=!1;e=1-e;for(var r=0;r<i.length;r++){var a=Math.sqrt(Math.pow(i[r].x-t,2),Math.pow(i[r].y- -e,2));n>a&&(n=a,s=r,o=t>i[r].x)}return n>.1&&(o&&s++,this.val.points.splice(s,0,{x:this.clickPos.x/this.width,y:(this.height-this.clickPos.y)/this.height})),s}},{"../core/widget":3,"../utils/math":6,util:47}],16:[function(require,module,exports){var util=(require("../utils/math"),require("util")),widget=require("../core/widget"),ghost=module.exports=function(t){this.defaultSize={width:100,height:50},widget.call(this,t),this.recording=!1,this.playing=!1,this.maxLength=2e3,this.components=new Array,this.buffer=new Array,this.moment=0,this.needle=0,this.val=new Object,this.rate=1,this.start=0,this.end=1,this.size=0,this.looping=!0,this.boundLog=this.log.bind(this),this.direction=1,this.noise=0,this.loopstart=0,this.loopend=0,this.mode="linear",this.init(),this.boundAdv=this.advance.bind(this),nx.aniItems.push(this.boundAdv)};util.inherits(ghost,widget),ghost.prototype.init=function(){this.draw()},ghost.prototype.watch=function(){},ghost.prototype.connect=function(t){var e=this.components.length;this.components.push(t),t.tapeNum=e,t.isRecording=!0,t.recorder=this,this.buffer[e]=new Object;for(var i in t.val)this.buffer[e][i]=new Array},ghost.prototype.write=function(t,e){this.moment>=this.maxLength&&this.stop();for(var i in e)if(this.buffer[t][i])if("object"==typeof e[i])if(Array.isArray(e[i]))this.buffer[t][i][this.moment]=JSON.parse(JSON.stringify(e[i]));else{this.buffer[t][i][this.moment]={};for(var s in e[i])this.buffer[t][i][this.moment][s]=e[i][s]}else this.buffer[t][i][this.moment]=e[i];this.draw()},ghost.prototype.draw=function(){with(this.context)fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height);var quad=this.width/4,quad2=this.width-quad;if(this.recording)with(this.context)fillStyle="#e33",fillRect(.4*quad,.4*quad,1.2*quad,1.2*quad);else with(this.context)fillStyle="#e33",beginPath(),arc(quad,this.height/2,.8*quad,0,2*Math.PI),fill(),closePath(),textAlign="center",textBaseline="middle",font="normal "+this.height/6+"px courier",fillStyle=this.colors.fill,fillText("rec",quad,this.height/2);if(this.playing)with(this.context){strokeStyle=this.colors.border,lineWidth=this.width/30,beginPath(),arc(quad2,this.height/2,.8*quad,0,2*Math.PI),stroke(),closePath();var sec=~~(this.needle/30);textAlign="center",textBaseline="middle",font="normal "+this.height/3+"px courier",fillStyle=this.colors.border,fillText(sec,quad2,this.height/2+2)}else with(this.context)fillStyle=this.colors.border,beginPath(),arc(quad2,this.height/2,.8*quad,0,2*Math.PI),fill(),closePath(),textAlign="center",textBaseline="middle",font="normal "+this.height/6+"px courier",fillStyle=this.colors.fill,fillText("play",quad2,this.height/2)},ghost.prototype.record=function(){if(!this.playing){this.components=new Array;for(var t in nx.widgets)this.connect(nx.widgets[t])}this.moment=0,nx.aniItems.push(this.boundLog),this.recording=!0},ghost.prototype.log=function(){for(var t=0;t<this.components.length;t++){this.components[t];this.write(this.components[t].tapeNum,this.components[t].val)}this.moment++},ghost.prototype.stop=function(){nx.removeAni(this.boundLog),this.size=this.moment,this.recording=!1,this.draw()},ghost.prototype.scan=function(t){for(var e=0;e<this.components.length;e++){var i=this.components[e];for(var s in this.buffer[i.tapeNum])if(this.buffer[i.tapeNum][s]){var n=new Object,o=this.buffer[i.tapeNum][s][~~this.needle+1]?this.buffer[i.tapeNum][s][~~this.needle+1]:this.buffer[i.tapeNum][s][~~this.needle];void 0!=this.buffer[i.tapeNum][s][~~this.needle-this.direction]&&this.buffer[i.tapeNum][s][~~this.needle]!=this.buffer[i.tapeNum][s][~~this.needle-this.direction]&&("number"==typeof this.buffer[i.tapeNum][s][~~this.needle]?(n[s]=nx.interp(this.needle-~~this.needle,this.buffer[i.tapeNum][s][~~this.needle],o),n[s]+=Math.random()*this.noise-this.noise/2,n[s]=nx.clip(n[s],0,1),i.set(n,!0)):(n[s]=this.buffer[i.tapeNum][s][~~this.needle],i.set(n,!0)))}}},ghost.prototype.play=function(t,e,i){t?this.rate=t:!1,e?(this.needle=this.moment-1,this.start=e):(this.needle=this.moment-1,this.start=0),"linear"==this.mode&&(this.direction=1),i?this.end=i:this.end=1,this.playing=!0},ghost.prototype.pause=function(){this.playing=!1},ghost.prototype.loop=function(){},ghost.prototype.advance=function(){if(this.playing){if("linear"==this.mode||"bounce"==this.mode)this.needle+=this.rate*this.direction;else if("random"==this.mode)this.needle=nx.random((this.end-this.start)*this.size)+this.start*this.size;else if("wander"==this.mode){var t=3;this.needle>.75*this.size?t--:null,this.needle<.25*this.size?t++:null,this.needle+=this.rate*this.direction*(nx.random(t)-1)}this.needle/this.size<this.end&&this.needle/this.size>this.start?this.scan():this.looping?"linear"==this.mode?this.needle=this.start*this.size+1:this.direction=-1*this.direction:this.playing=!1,this.draw()}},ghost.prototype.click=function(t){this.clickPos.x<this.width/2?this.recording?this.stop():this.record():(this.playing?this.pause():this.play(),this.draw())}},{"../core/widget":3,"../utils/math":6,util:47}],17:[function(t,e,i){e.exports={banner:t("./banner"),button:t("./button"),colors:t("./colors"),comment:t("./comment"),crossfade:t("./crossfade"),dial:t("./dial"),envelope:t("./envelope"),ghost:t("./ghost"),joints:t("./joints"),keyboard:t("./keyboard"),matrix:t("./matrix"),message:t("./message"),meter:t("./meter"),metro:t("./metro"),metroball:t("./metroball"),motion:t("./motion"),mouse:t("./mouse"),multislider:t("./multislider"),multitouch:t("./multitouch"),number:t("./number"),position:t("./position"),range:t("./range"),select:t("./select"),slider:t("./slider"),string:t("./string"),tabs:t("./tabs"),text:t("./text"),tilt:t("./tilt"),toggle:t("./toggle"),typewriter:t("./typewriter"),vinyl:t("./vinyl"),waveform:t("./waveform"),windows:t("./windows")}},{"./banner":9,"./button":10,"./colors":11,"./comment":12,"./crossfade":13,"./dial":14,"./envelope":15,"./ghost":16,"./joints":18,"./keyboard":19,"./matrix":20,"./message":21,"./meter":22,"./metro":23,"./metroball":24,"./motion":25,"./mouse":26,"./multislider":27,"./multitouch":28,"./number":29,"./position":30,"./range":31,"./select":32,"./slider":33,"./string":34,"./tabs":35,"./text":36,"./tilt":37,"./toggle":38,"./typewriter":39,"./vinyl":40,"./waveform":41,"./windows":42}],18:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),joints=module.exports=function(t){this.defaultSize={width:150,height:150},widget.call(this,t),this.nodeSize=this.width/14,this.values=[0,0],this.val={x:.35,y:.35,node1:0},this.joints=[{x:this.width/1.2,y:this.height/1.2},{x:this.width/2,y:this.height/1.3},{x:this.width/4.2,y:this.height/1.1},{x:this.width/1.4,y:this.height/2.2},{x:this.width/2.1,y:this.height/1.8},{x:this.width/5,y:this.height/2.4},{x:this.width/2.8,y:this.height/6},{x:this.width/6,y:this.height/3.7}],this.threshold=this.width/3};util.inherits(joints,widget),joints.prototype.init=function(){this.draw()},joints.prototype.draw=function(){with(this.erase(),this.drawingX=this.val.x*this.width,this.drawingY=this.val.y*this.height,this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),null!=this.val.x?this.drawNode():(fillStyle=this.colors.border,font="14px courier",fillText(this.default_text,10,20)),fillStyle=this.colors.accent,strokeStyle=this.colors.border;for(var i in this.joints){beginPath(),arc(this.joints[i].x,this.joints[i].y,this.nodeSize/2,0,2*Math.PI,!0),fill(),closePath();var cnctX=Math.abs(this.joints[i].x-this.drawingX),cnctY=Math.abs(this.joints[i].y-this.drawingY),strength=cnctX+cnctY;if(strength<this.threshold){beginPath(),moveTo(this.joints[i].x,this.joints[i].y),lineTo(this.drawingX,this.drawingY),strokeStyle=this.colors.accent,lineWidth=math.scale(strength,0,this.threshold,this.nodeSize/2,5),stroke(),closePath();var scaledstrength=math.scale(strength,0,this.threshold,1,0);this.val["node"+i]=scaledstrength}}}this.drawLabel()},joints.prototype.drawNode=function(){with(this.drawingX<this.nodeSize?this.drawingX=this.nodeSize:this.drawingX>this.width-this.nodeSize&&(this.drawingX=this.width-this.nodeSize),this.drawingY<this.nodeSize?this.drawingY=this.nodeSize:this.drawingY>this.height-this.nodeSize&&(this.drawingY=this.height-this.nodeSize),this.context)globalAlpha=1,beginPath(),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=this.lineWidth,arc(this.drawingX,this.drawingY,this.nodeSize,0,2*Math.PI,!0),fill(),closePath()},joints.prototype.click=function(){this.val=new Object,this.val.x=this.clickPos.x/this.width,this.val.y=this.clickPos.y/this.height,this.draw(),this.transmit(this.val),this.connections=new Array},joints.prototype.move=function(){this.val=new Object,this.clicked&&(this.val.x=this.clickPos.x/this.width,this.val.y=this.clickPos.y/this.height,this.draw(),this.transmit(this.val),this.connections=new Array)},joints.prototype.release=function(){this.anix=this.deltaMove.x/this.width,this.aniy=this.deltaMove.y/this.height},joints.prototype.animate=function(t){switch(t){case"bounce":nx.aniItems.push(this.aniBounce.bind(this));break;case"none":nx.aniItems.splice(nx.aniItems.indexOf(this.aniBounce))}},joints.prototype.anix=0,joints.prototype.aniy=0,joints.prototype.aniBounce=function(){!this.clicked&&this.val.x&&(this.val.x+=this.anix,this.val.y+=this.aniy,this.anix=math.bounce(this.val.x,.1,.9,this.anix),this.aniy=math.bounce(this.val.y,.1,.9,this.aniy),this.draw(),this.transmit(this.val))}},{"../core/widget":3,"../utils/math":6,util:47}],19:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),drawing=require("../utils/drawing"),math=require("../utils/math"),keyboard=module.exports=function(t){this.defaultSize={width:300,height:75},widget.call(this,t),this.octaves=3,this.white={width:0,height:0},this.black={width:0,height:0},this.wkeys=new Array,this.bkeys=new Array,this.keypattern=["w","b","w","b","w","w","b","w","b","w","b","w"],this.keys=new Array,this.midibase=48,this.lineWidth=1,this.fingers=[{key:-1,pkey:-1}],this.multitouch=!1,this.oneleft=!1,this.mode="button",this.val={on:0,note:0,midi:"0 0"},this.init()};util.inherits(keyboard,widget),keyboard.prototype.init=function(){this.white={width:0,height:0},this.black={width:0,height:0},this.wkeys=new Array,this.bkeys=new Array,this.keys=new Array,this.white.num=0;for(var t=0;t<this.keypattern.length;t++)"w"==this.keypattern[t]?this.white.num++:null;this.white.num*=this.octaves,this.white.width=this.width/this.white.num,this.white.height=this.height,this.black.width=.6*this.white.width,this.black.height=.6*this.height;for(var t=0;t<this.keypattern.length*this.octaves;t++)switch(this.keys[t]={note:t+this.midibase,on:!1},this.keypattern[t%this.keypattern.length]){case"w":this.keys[t].x=this.wkeys.length*this.white.width,this.keys[t].y=0,this.keys[t].w=this.white.width,this.keys[t].h=this.white.height,this.keys[t].type="w",this.keys[t].index=t,this.wkeys.push(this.keys[t]);break;case"b":this.keys[t].x=this.wkeys.length*this.white.width-this.black.width/2,this.keys[t].y=0,this.keys[t].w=this.black.width,this.keys[t].h=this.black.height,this.keys[t].type="b",this.keys[t].index=t,this.bkeys.push(this.keys[t])}this.draw()},keyboard.prototype.draw=function(){with(this.context){strokeStyle=this.colors.border,lineWidth=1;for(var i in this.wkeys)fillStyle=this.wkeys[i].on?this.colors.border:this.colors.fill,strokeRect(this.wkeys[i].x,0,this.white.width,this.white.height),fillRect(this.wkeys[i].x,0,this.white.width,this.white.height);for(var i in this.bkeys)fillStyle=this.bkeys[i].on?this.colors.border:this.colors.black,fillRect(this.bkeys[i].x,0,this.black.width,this.black.height)}this.drawLabel()},keyboard.prototype.toggle=function(t,e){if("button"==this.mode){if(t){e?t.on=e:t.on=!t.on;var i=t.on?1:0,s=128*math.invert(this.clickPos.y/this.height);s=math.prune(math.clip(s,5,128),0),this.val={on:i*s,note:t.note,midi:t.note+" "+i},this.transmit(this.val),this.draw()}}else if("sustain"==this.mode&&t){e?t.on=e:t.on=!t.on;var i=t.on?1:0,s=128*math.invert(this.clickPos.y/this.height);s=math.prune(math.clip(s,5,128),0),this.val={on:i*s,note:t.note,midi:t.note+" "+i},this.transmit(this.val),this.draw()}},keyboard.prototype.whichKey=function(t,e){for(var i in this.bkeys)if(drawing.isInside({x:t,y:e},this.bkeys[i]))return this.bkeys[i];var s=~~(t/this.white.width);return s>=this.wkeys.length&&(s=this.wkeys.length-1),0>s&&(s=0),this.wkeys[s]},keyboard.prototype.click=function(t){if(this.clickPos.touches.length>1||this.multitouch){this.multitouch=!0,this.clickPos.touches.length>=2&&this.oneleft&&(this.oneleft=!1),this.keysinuse=new Array;for(var e=0;e<this.clickPos.touches.length;e++)this.fingers[e]={key:this.whichKey(this.clickPos.touches[e].x,this.clickPos.touches[e].y)},this.fingers[e].key.on||this.toggle(this.fingers[e].key,!0),this.keysinuse.push(this.fingers[e].key.index);for(var e=0;e<this.keys.length;e++)this.keys[e].on&&this.keysinuse.indexOf(this.keys[e].index)<0&&this.toggle(this.keys[e],!1)}else this.fingers[0].pkey=this.fingers[0].key,this.fingers[0].key=this.whichKey(this.clickPos.x,this.clickPos.y),this.toggle(this.fingers[0].key)},keyboard.prototype.move=function(t){if(this.clickPos.touches.length>1||this.multitouch){this.keysinuse=new Array;for(var e=0;e<this.clickPos.touches.length;e++)this.fingers[e]={key:this.whichKey(this.clickPos.touches[e].x,this.clickPos.touches[e].y)},this.fingers[e].key.on||this.toggle(this.fingers[e].key,!0),this.keysinuse.push(this.fingers[e].key.index);for(var e=0;e<this.keys.length;e++)this.keys[e].on&&this.keysinuse.indexOf(this.keys[e].index)<0&&this.toggle(this.keys[e],!1)}else this.fingers[0].pkey=this.fingers[0].key,this.fingers[0].key=this.whichKey(this.clickPos.x,this.clickPos.y),this.fingers[0].key&&this.fingers[0].key.index!=this.fingers[0].pkey.index&&(this.toggle(this.fingers[0].pkey,!1),this.toggle(this.fingers[0].key,!0))},keyboard.prototype.release=function(t){if(this.clickPos.touches.length>1||this.multitouch){this.keysinuse=new Array;for(var e=0;e<this.clickPos.touches.length&&(!this.oneleft||1!=this.clickPos.touches.length);e++)this.fingers[e]={key:this.whichKey(this.clickPos.touches[e].x,this.clickPos.touches[e].y)},this.keysinuse.push(this.fingers[e].key.index);for(var e=0;e<this.keys.length;e++)this.keys[e].on&&this.keysinuse.indexOf(this.keys[e].index)<0&&this.toggle(this.keys[e],!1);1==this.clickPos.touches.length&&(this.oneleft=!0)}else"button"==this.mode&&this.toggle(this.fingers[0].key,!1)}},{"../core/widget":3,"../utils/drawing":5,"../utils/math":6,util:47}],20:[function(require,module,exports){var math=require("../utils/math"),util=(require("../utils/drawing"),require("util")),widget=require("../core/widget"),matrix=module.exports=function(t){this.defaultSize={width:100,height:100},widget.call(this,t),this.row=4,this.col=4,this.cellHgt,this.cellWid,this.matrix,this.val={row:0,col:0,level:0,list:new Array},this.cur,this.prev,this.erasing=!1,this.place=null,this.starttime,this.lastbeat,this.thisframe=0,this.lastframe=0,this.context.lineWidth=1,this.sequencing=!1,this.cellBuffer=4,this.sequenceMode="linear",this.bpm=120,this.pbpm=this.bpm,this.starttime=nx.starttime,this.init()};util.inherits(matrix,widget),matrix.prototype.init=function(){this.pmatrix=this.matrix?this.matrix:!1,this.matrix=null,this.matrix=new Array(this.col);for(var t=0;t<this.col;t++){this.matrix[t]=new Array(this.row);for(var e=0;e<this.row;e++)this.matrix[t][e]=this.pmatrix&&this.pmatrix[t]?this.pmatrix[t][e]:0}this.draw(),this.life=this.unboundlife.bind(this)},matrix.prototype.draw=function(){this.erase(),this.cellWid=this.width/this.col,this.cellHgt=this.height/this.row;for(var i=0;i<this.row;i++)for(var j=0;j<this.col;j++){var st_x=j*this.cellWid;0==j?st_x+=0:null;var st_y=i*this.cellHgt;0==i?st_y+=0:null;var boxwid=this.cellWid,boxhgt=this.cellHgt;with(this.context)strokeStyle=this.colors.border,lineWidth=this.cellBuffer,this.matrix[j][i]>0?fillStyle=this.colors.accent:fillStyle=this.colors.fill,fillRect(st_x+this.cellBuffer/2,st_y+this.cellBuffer/2,boxwid-this.cellBuffer,boxhgt-this.cellBuffer),this.place==j&&(globalAlpha=.4,fillStyle=this.colors.border,fillRect(st_x,st_y,boxwid,boxhgt),globalAlpha=1)}this.drawLabel()},matrix.prototype.click=function(t){this.cur={col:~~(this.clickPos.x/this.cellWid),row:~~(this.clickPos.y/this.cellHgt)},this.matrix[this.cur.col][this.cur.row]?(this.matrix[this.cur.col][this.cur.row]=0,this.erasing=!0):(this.matrix[this.cur.col][this.cur.row]=1,this.erasing=!1),this.cur.value=this.matrix[this.cur.col][this.cur.row],this.prev=this.cur,this.val={row:this.cur.row,col:this.cur.col,level:this.cur.value},this.transmit(this.val),this.draw()},matrix.prototype.move=function(t){this.clicked&&(this.cur={col:~~(this.clickPos.x/this.cellWid),row:~~(this.clickPos.y/this.cellHgt)},this.cur.row<this.row&&this.cur.col<this.col&&this.cur.row>=0&&this.cur.col>=0&&(this.cur.col==this.prev.col&&this.cur.row==this.prev.row||(this.erasing?this.matrix[this.cur.col][this.cur.row]=0:this.matrix[this.cur.col][this.cur.row]=1,this.cur.value=this.matrix[this.cur.col][this.cur.row],this.prev=this.cur,this.val={row:this.cur.row,col:this.cur.col,level:this.cur.value},this.transmit(this.val),this.draw())))},matrix.prototype.setCell=function(t,e,i){var s=i?1:0;this.matrix[t][e]=s,this.val={row:e,col:t,level:s},this.transmit(this.val),this.draw()},matrix.prototype.sequence=function(t){t&&(this.bpm=t),this.sequencing=!0,requestAnimationFrame(this.seqStep.bind(this))},matrix.prototype.setBPM=function(t){this.bpm=t},matrix.prototype.stop=function(){this.sequencing=!1},matrix.prototype.seqStep=function(){0==this.bpm&&(this.bpm=1);var t=(new Date).getTime(),e=t-this.starttime;if(this.bpm!=this.pbpm){var i=e/(6e4/this.pbpm);e=i*(6e4/this.bpm),this.starttime=t-e,this.thisframe=~~(e/(6e4/this.bpm))}else this.thisframe=~~(e/(6e4/this.bpm));this.pbpm=this.bpm,this.thisframe!=this.lastframe&&(this.lastbeat=t,"linear"==this.sequenceMode?this.place++:"random"==this.sequenceMode&&(this.place=math.random(this.col)),this.place>=this.col&&(this.place=0),null==this.place&&(this.place=0),this.jumpToCol(this.place)),this.lastframe=this.thisframe,this.sequencing&&requestAnimationFrame(this.seqStep.bind(this))},matrix.prototype.jumpToCol=function(t){this.place=t,this.val={list:this.matrix[this.place]},this.transmit(this.val),this.draw()},matrix.prototype.customDestroy=function(){this.stop()},matrix.prototype.unboundlife=function(){if(!this.clicked){this.newmatrix=[];for(var t=0;t<this.col;t++){this.newmatrix[t]=[];for(var e=0;e<this.row;e++){var i=0;t-1>=0&&(i+=this.matrix[t-1][e-1]?this.matrix[t-1][e-1]:0,i+=this.matrix[t-1][e]?this.matrix[t-1][e]:0,i+=this.matrix[t-1][e+1]?this.matrix[t-1][e+1]:0),i+=this.matrix[t][e-1]?this.matrix[t][e-1]:0,i+=this.matrix[t][e+1]?this.matrix[t][e+1]:0,t+1<this.col&&(i+=this.matrix[t+1][e-1]?this.matrix[t+1][e-1]:0,i+=this.matrix[t+1][e]?this.matrix[t+1][e]:0,i+=this.matrix[t+1][e+1]?this.matrix[t+1][e+1]:0),this.matrix[t][e]?2>i?this.newmatrix[t][e]=0:2==i||3==i?this.newmatrix[t][e]=1:i>3&&(this.newmatrix[t][e]=0):this.matrix[t][e]||3!=i?this.newmatrix[t][e]=this.matrix[t][e]:this.newmatrix[t][e]=1}}this.matrix=this.newmatrix}this.transmit({grid:this.matrix}),this.draw()},matrix.prototype.life=function(){return!1}},{"../core/widget":3,"../utils/drawing":5,"../utils/math":6,util:47}],21:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),message=module.exports=function(t){this.defaultSize={width:100,height:30},widget.call(this,t),this.val={value:"send a message"},this.size=14};util.inherits(message,widget),message.prototype.init=function(){this.canvas.getAttribute("label")&&(this.val.value=this.canvas.getAttribute("label")),this.draw()},message.prototype.draw=function(){with(this.erase(),this.context)this.clicked?fillStyle=this.colors.border:fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),this.clicked?fillStyle=this.colors.black:fillStyle=this.colors.black,textAlign="left",font=this.size+"px "+nx.font;this.wrapText(this.val.value,5,1+this.size,this.width-6,this.size)},message.prototype.click=function(t){this.draw(),this.transmit(this.val)},message.prototype.release=function(t){this.draw()}},{"../core/widget":3,util:47}],22:[function(require,module,exports){var util=require("util"),widget=(require("../utils/drawing"),require("../core/widget")),meter=module.exports=function(t){this.defaultSize={width:20,height:50},widget.call(this,t),this.val={level:0},this.dataArray,this.bars=10,this.init()};util.inherits(meter,widget),meter.prototype.init=function(){with(this.bar={x:0,y:0,w:this.width,h:this.height/this.bars},this.context)fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height)},meter.prototype.setup=function(t,e){this.actx=t,this.source=e,this.analyser=this.actx.createAnalyser(),this.analyser.smoothingTimeConstant=.85,this.analyser.fftsize=1024,this.bufferLength=this.analyser.frequencyBinCount,this.dataArray=new Uint8Array(this.bufferLength),this.source.connect(this.analyser),this.draw()},meter.prototype.draw=function(){if(this.dataArray){this.analyser.getByteTimeDomainData(this.dataArray);var max=Math.max.apply(null,this.dataArray),min=Math.min.apply(null,this.dataArray),amp=max-min;amp/=240;var db=20*(Math.log(amp)/Math.log(10));with(this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height);for(var dboffset=Math.floor((db+40)/(50/this.bars)),i=0;i<this.bars;i++)i>=.8*this.bars?fillStyle="rgb(255,0,0)":i<.8*this.bars&&i>=.69*this.bars?fillStyle="rgb(255,255,0)":i<.69*this.bars&&(fillStyle="rgb(0,255,0)"),dboffset>i&&fillRect(1,this.height-this.bar.h*i,this.width-2,this.bar.h-1)}}window.requestAnimationFrame(this.draw.bind(this))}},{"../core/widget":3,"../utils/drawing":5,util:47}],23:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),metro=module.exports=function(t){this.defaultSize={width:100,height:20},widget.call(this,t),this.val={beat:0},this.x=10,this.y=10,this.loc=10,this.nodeSize=10,this.speed=1,this.direction=1,this.orientation="horizontal",this.boundary=this.width,nx.aniItems.push(this.advance.bind(this)),this.active=!0,this.init()};util.inherits(metro,widget),metro.prototype.init=function(){this.nodeSize=Math.min(this.width,this.height)/2,this.width<this.height?(this.orientation="vertical",this.boundary=this.height):(this.orientation="horizontal",this.boundary=this.width),this.x=this.nodeSize,this.y=this.nodeSize,this.loc=this.nodeSize,this.draw()},metro.prototype.draw=function(){with(this.erase(),this.context)fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),beginPath(),fillStyle=this.colors.accent,arc(this.x,this.y,this.nodeSize,0,2*Math.PI,!0),fill(),closePath();this.drawLabel()},metro.prototype.click=function(){},metro.prototype.move=function(){this.clicked&&(this.speed-=this.deltaMove.y/50)},metro.prototype.release=function(){},metro.prototype.advance=function(){this.speed>=0?this.loc+=this.speed*this.direction:this.loc+=this.speed*this.direction,(this.loc-this.nodeSize<0||this.loc+this.nodeSize>this.boundary)&&(this.val.beat=math.scale(this.direction,-1,1,0,1),this.transmit(this.val),this.direction*=-1),"vertical"==this.orientation?this.y=this.loc:this.x=this.loc,this.draw()},metro.prototype.customDestroy=function(){nx.removeAni(this.advance.bind(this))}},{"../core/widget":3,"../utils/math":6,util:47}],24:[function(require,module,exports){var math=require("../utils/math"),util=(require("../utils/drawing"),require("util")),widget=require("../core/widget"),metroball=module.exports=function(t){this.defaultSize={width:300,height:200},widget.call(this,t),this.CurrentBalls=new Array,this.ballpos=new Object,this.clickField=null,this.globalMetro,this.tempo=1,this.tempoMarker=150,this.quantize=!1,this.tiltLR,this.tiltFB,this.z,this.val={x:!1,side:!1,ball:!1,all:!1},nx.aniItems.push(this.metro.bind(this)),this.init()};util.inherits(metroball,widget),metroball.prototype.init=function(){this.draw()},metroball.prototype.metro=function(){with(this.context)clearRect(0,0,this.width,this.height);this.drawSpaces(),this.drawBalls(),this.drawLabel()},metroball.prototype.drawSpaces=function(){with(this.context)fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),fillStyle=this.colors.border,fillRect(0,0,this.width,this.height/4),font="normal "+this.height/8+"px "+nx.font,textAlign="center",textBaseline="middle",fillText("add",this.width/2,this.height/1.66),fillStyle=this.colors.fill,fillText("delete",this.width/2,this.height/8)},metroball.prototype.drawBalls=function(){with(this.context)for(var i=0;i<this.CurrentBalls.length;i++)this.CurrentBalls[i].move(),this.CurrentBalls[i].draw()},metroball.prototype.click=function(t){this.ballpos=this.clickPos,this.clickPos.y<this.height/4?this.deleteMB(this.ballpos):this.addNewMB(this.ballpos)},metroball.prototype.move=function(t){this.ballpos=this.clickPos,this.clickPos.y<this.height/4?this.deleteMB(this.ballpos):this.addNewMB(this.ballpos)},metroball.prototype.release=function(t){this.clickField=null},metroball.prototype.deleteMB=function(t){for(var e=this.CurrentBalls.length-1;e>=0;e--)Math.abs(this.CurrentBalls[e].xpos-t.x)<10&&this.CurrentBalls[e].kill();for(var e=0;e<this.CurrentBalls.length;e++)this.CurrentBalls[e].thisIndex=e},metroball.prototype.addNewMB=function(t){var e=this.CurrentBalls.length;this.CurrentBalls[e]=new this.Ball(e,t.x,t.y,this)},metroball.prototype.toggleQuantization=function(){this.quantize?this.quantize=!1:this.quantize=!0},metroball.prototype.tilt=function(t){var e=math.prune(this.tiltLR/90,3),i=math.prune(this.tiltFB/90,3);math.prune(this.z,3);tilt=10*e,this.tempo=Math.pow(i+1,3)},metroball.prototype.Ball=function(thisIndex,thisX,thisY,parent){this.thisIndex=thisIndex,this.color=parent.colors.accent,this.space={ypos1:0,ypos2:parent.height,xpos1:0,xpos2:parent.width,hgt:parent.height,wid:parent.width},this.xpos=thisX,this.ypos=thisY,this.size=10,this.direction=1,this.speed=(parent.height-this.ypos)/20,this.speedQ=5,this.quantize&&(this.ypos=parent.height-13),this.move=function(){this.quantize?this.ypos=this.ypos+this.speedQ*this.direction*parent.tempo:this.ypos=this.ypos+this.speed*this.direction*parent.tempo,(this.ypos>parent.height-this.size-2||this.ypos<this.size+2)&&this.bounce(),this.ypos<this.space.ypos+this.size?this.ypos=this.space.ypos+this.size+5:this.ypos>this.space.ypos+this.space.hgt-this.size&&(this.ypos=this.space.ypos+this.space.hgt-this.size-5),this.xpos<this.space.xpos?this.xpos=this.space.xpos2:this.xpos>this.space.xpos2&&(this.xpos=this.space.xpos)},this.bounce=function(){this.direction/2+1;this.bounceside=(this.direction+1)/2,this.direction=-1*this.direction;var t=math.prune(this.xpos/this.space.wid,3);this.val={x:t,side:this.bounceside,ball:this.thisIndex,all:t+" "+this.bounceside+" "+this.thisIndex},parent.transmit(this.val)},this.kill=function(){parent.CurrentBalls.splice(this.thisIndex,1)},this.draw=function(){with(parent.context)beginPath(),fillStyle=this.color,1==this.direction?(this.radius=this.size*Math.abs((this.ypos-this.space.ypos-this.space.hgt/2)/(this.space.hgt-this.space.ypos)*2),this.radius=this.radius/2+this.size/2,this.radius=this.size,this.radius=this.speed,this.radius=Math.abs(15-this.speed)):(this.radius=this.size*Math.abs(2-Math.abs((this.ypos-this.space.ypos-this.space.hgt/2)/(this.space.hgt-this.space.ypos)*2)),this.radius=this.radius/2+this.size/2,this.radius=this.size,this.radius=Math.abs(15-this.speed)),arc(this.xpos,this.ypos,this.radius,0,2*Math.PI,!0),fill()}}},{"../core/widget":3,"../utils/drawing":5,"../utils/math":6,util:47}],25:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),motion=module.exports=function(target){if(this.defaultSize={width:75,height:75},widget.call(this,target),this.motionLR,this.motionFB,this.z,this.active=!0,this.px=0,this.py=0,this.pz=0,this.val={x:0,y:0,z:0},this.text="Motion",this.init(),this.boundMotion=this.motionlistener.bind(this),window.DeviceMotionEvent)window.addEventListener("devicemotion",this.boundMotion,!1);else with(this.context)fillText("incompatible",0,0),this.active=!1};util.inherits(motion,widget),motion.prototype.deviceMotionHandler=function(){this.val={x:math.prune(this.motionLR/10,4),y:math.prune(this.motionFB/10,4),z:math.prune(this.z/10,4)},this.transmit(this.val)},motion.prototype.motionlistener=function(e){var data=e.acceleration;if(this.active&&(this.motionLR=nx.lp(this.canvasID+"motionx",data.x,20),this.motionFB=nx.lp(this.canvasID+"motiony",data.y,20),this.z=nx.lp(this.canvasID+"motionz",data.z,20),this.deviceMotionHandler(),this.draw(),null===data.x||void 0===data.x)){with(this.erase(),this.context)fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),fillStyle=this.colors.black,font="12px courier",textAlign="center",fillText("no data",this.width/2,this.height/2);this.active=!1}},motion.prototype.init=function(){this.draw()},motion.prototype.draw=function(){with(this.erase(),this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),fillStyle=this.colors.accent;var eighth=Math.PI/4;this.motionFB<0?(beginPath(),moveTo(this.width/2,this.height/2),arc(this.width/2,this.height/2,this.width/2,5*eighth,7*eighth,!1),globalAlpha=Math.pow(this.motionFB,2),fill(),closePath()):(beginPath(),moveTo(this.width/2,this.height/2),arc(this.width/2,this.height/2,this.width/2,1*eighth,3*eighth,!1),globalAlpha=Math.pow(this.motionFB,2),fill(),closePath()),this.motionLR<0?(beginPath(),moveTo(this.width/2,this.height/2),arc(this.width/2,this.height/2,this.width/2,7*eighth,1*eighth,!1),globalAlpha=Math.pow(this.motionLR,2),fill(),closePath()):(beginPath(),moveTo(this.width/2,this.height/2),arc(this.width/2,this.height/2,this.width/2,3*eighth,5*eighth,!1),globalAlpha=Math.pow(this.motionLR,2),fill(),closePath()),beginPath(),moveTo(this.width/2,this.height/2),arc(this.width/2,this.height/2,this.width/6,0,2*Math.PI,!1),globalAlpha=Math.pow(this.z,2),fill(),closePath(),globalAlpha=1}this.drawLabel()},motion.prototype.click=function(){this.active=!this.active,this.draw()},motion.prototype.customDestroy=function(){this.active=!1,window.removeEventListener("devicemotion",this.motionlistener,!1)}},{"../core/widget":3,"../utils/math":6,util:47}],26:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),math=require("../utils/math"),mouse=module.exports=function(t){this.defaultSize={width:98,height:100},widget.call(this,t),this.val={x:0,y:0,deltax:0,deltay:0},this.inside=new Object,
this.boundmove=this.preMove.bind(this),this.mousing=window.addEventListener("mousemove",this.boundmove,!1),this.init()};util.inherits(mouse,widget),mouse.prototype.init=function(){this.inside.height=this.height,this.inside.width=this.width,this.inside.left=0,this.inside.top=0,this.inside.quarterwid=this.inside.width/4,this.draw()},mouse.prototype.draw=function(){with(this.erase(),this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height);var scaledx=-this.val.x*this.height,scaledy=-this.val.y*this.height,scaleddx=-this.val.deltax*this.height-this.height/2,scaleddy=-this.val.deltay*this.height-this.height/2;fillStyle=this.colors.accent,fillRect(this.inside.left,this.inside.height,this.inside.quarterwid,scaledx),fillRect(this.inside.quarterwid,this.inside.height,this.inside.quarterwid,scaledy),fillRect(2*this.inside.quarterwid,this.inside.height,this.inside.quarterwid,scaleddx),fillRect(3*this.inside.quarterwid,this.inside.height,this.inside.quarterwid,scaleddy),globalAlpha=1,fillStyle=this.colors.fill,textAlign="center",font=this.width/7+"px "+this.font,fillText("x",0*this.inside.quarterwid+this.inside.quarterwid/2,this.height-7),fillText("y",1*this.inside.quarterwid+this.inside.quarterwid/2,this.height-7),fillText("dx",2*this.inside.quarterwid+this.inside.quarterwid/2,this.height-7),fillText("dy",3*this.inside.quarterwid+this.inside.quarterwid/2,this.height-7),globalAlpha=1}this.drawLabel()},mouse.prototype.move=function(t){this.val={deltax:t.clientX/window.innerWidth-this.val.x,deltay:math.invert(t.clientY/window.innerHeight)-this.val.y,x:t.clientX/window.innerWidth,y:math.invert(t.clientY/window.innerHeight)},this.draw(),this.transmit(this.val)},mouse.prototype.customDestroy=function(){window.removeEventListener("mousemove",this.boundmove,!1)}},{"../core/widget":3,"../utils/math":6,util:47}],27:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),multislider=module.exports=function(t){this.defaultSize={width:100,height:75},widget.call(this,t),this.sliders=15,this.val=new Object;for(var e=0;e<this.sliders;e++)this.val[e]=.7;this.sliderClicked=0,this.oldSliderToMove,this.init()};util.inherits(multislider,widget),multislider.prototype.init=function(){this.val=new Object;for(var t=0;t<this.sliders;t++)this.val[t]=.7;this.realSpace={x:this.width,y:this.height},this.sliderWidth=this.realSpace.x/this.sliders,this.draw()},multislider.prototype.draw=function(){with(this.erase(),this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),strokeStyle=this.colors.accent,fillStyle=this.colors.accent,lineWidth=5;for(var i=0;i<this.sliders;i++)beginPath(),moveTo(i*this.sliderWidth,this.height-this.val[i]*this.height),lineTo(i*this.sliderWidth+this.sliderWidth,this.height-this.val[i]*this.height),stroke(),lineTo(i*this.sliderWidth+this.sliderWidth,this.height),lineTo(i*this.sliderWidth,this.height),globalAlpha=.3-i%3*.1,fill(),closePath(),globalAlpha=1}this.drawLabel()},multislider.prototype.click=function(){this.oldSliderToMove=!1,this.move(!0)},multislider.prototype.move=function(t){if(this.clicked){if(this.clickPos.touches.length>1)for(var e=0;e<this.clickPos.touches.length;e++){var i=Math.floor(this.clickPos.touches[e].x/this.sliderWidth);i=math.clip(i,0,this.sliders-1),this.val[i]=math.clip(math.invert(this.clickPos.touches[e].y/this.height),0,1)}else{var i=Math.floor(this.clickPos.x/this.sliderWidth);if(i=math.clip(i,0,this.sliders-1),this.val[i]=math.clip(math.invert(this.clickPos.y/this.height),0,1),this.oldSliderToMove&&this.oldSliderToMove>i+1)for(var s=this.oldSliderToMove-i-1,e=1;s>=e;e++)this.val[i+e]=this.val[i]+(this.val[this.oldSliderToMove]-this.val[i])*(e/(s+1));else if(this.oldSliderToMove&&i>this.oldSliderToMove+1)for(var s=i-this.oldSliderToMove-1,e=1;s>=e;e++)this.val[this.oldSliderToMove+e]=this.val[this.oldSliderToMove]+(this.val[i]-this.val[this.oldSliderToMove])*(e/(s+1))}this.draw()}var n=new Object;if(n[i]=this.val[i],"js"==this.destination||"node"==this.destination)n.list=this.val;else{n.list=new String;for(var o in this.val)n.list+=this.val[o]+" "}this.transmit(n),this.oldSliderToMove=i},multislider.prototype.setNumberOfSliders=function(t){this.sliders=t,this.val=new Array;for(var e=0;e<this.sliders;e++)this.val.push(.7);this.sliderWidth=this.realSpace.x/this.sliders,this.init()},multislider.prototype.setSliderValue=function(t,e){this.val[t]=e,this.draw();var i=new Object;if(i[t]=this.val[t],"js"==this.destination||"node"==this.destination)i.list=this.val;else{i.list=new String;for(var s in this.val)i.list+=this.val[s]+" "}this.transmit(i)}},{"../core/widget":3,"../utils/math":6,util:47}],28:[function(require,module,exports){var math=require("../utils/math"),drawing=require("../utils/drawing"),util=require("util"),widget=require("../core/widget"),multitouch=module.exports=function(t){this.defaultSize={width:200,height:200},widget.call(this,t),this.nodeSize=this.width/10,this.val={touch1:{x:0,y:0}},this.nodes=new Array,this.text="multitouch",this.rainbow=["#00f","#04f","#08F","0AF","0FF"],this.mode="normal",this.rows=10,this.cols=10,this.matrixLabels=!1,this.init()};util.inherits(multitouch,widget),multitouch.prototype.init=function(){this.nodeSize=this.width/10,this.draw()},multitouch.prototype.draw=function(){with(this.erase(),this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height);var count=0;if("matrix"==this.mode)for(var j=0;j<this.rows;j++)for(var i=0;i<this.cols;i++)with(this.context){beginPath(),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=1;var circx=i*this.width/this.cols+this.width/this.cols/2,circy=j*this.height/this.rows+this.height/this.rows/2;arc(circx,circy,this.height/this.rows/2,0,2*Math.PI,!0),stroke(),fillStyle=this.colors.border,textAlign="center",textBaseline="middle",this.matrixLabels&&(fillText(this.matrixLabels[count%this.matrixLabels.length],circx,circy),count++);var thisarea={x:i*this.width/this.cols,y:j*this.height/this.rows,w:this.width/this.cols,h:this.height/this.rows};if(this.clickPos.touches.length>=1)for(var k=0;k<this.clickPos.touches.length;k++)drawing.isInside(this.clickPos.touches[k],thisarea)&&(globalAlpha=.5,fillStyle=this.colors.accent,fill(),globalAlpha=.3,fillStyle=this.rainbow[k],fill(),globalAlpha=1);closePath()}else if(this.clickPos.touches.length>=1)for(var i=0;i<this.clickPos.touches.length;i++)with(this.context)globalAlpha=.5,beginPath(),fillStyle=this.colors.accent,strokeStyle=this.colors.border,lineWidth=this.lineWidth,arc(this.clickPos.touches[i].x,this.clickPos.touches[i].y,this.nodeSize,0,2*Math.PI,!0),fill(),closePath(),globalAlpha=.3,beginPath(),fillStyle=this.rainbow[i],strokeStyle=this.colors.border,lineWidth=this.lineWidth,arc(this.clickPos.touches[i].x,this.clickPos.touches[i].y,this.nodeSize,0,2*Math.PI,!0),fill(),closePath(),globalAlpha=1;else this.setFont(),fillStyle=this.colors.border,fillText(this.text,this.width/2,this.height/2),globalAlpha=1}this.drawLabel()},multitouch.prototype.click=function(){this.draw(),this.sendit()},multitouch.prototype.move=function(){this.clicked&&(this.draw(),this.sendit())},multitouch.prototype.release=function(){if(!this.clicked){this.clickPos.touches=new Array;for(var t=0;5>t;t++)this.val["touch"+t]={x:0,y:0};this.transmit(this.val)}this.draw(),this.sendit()},multitouch.prototype.sendit=function(){this.val=new Object;for(var t=0;t<this.clickPos.touches.length;t++)this.val["touch"+t]={x:this.clickPos.touches[t].x/this.canvas.width,y:math.invert(this.clickPos.touches[t].y/this.canvas.height)};this.transmit(this.val)}},{"../core/widget":3,"../utils/drawing":5,"../utils/math":6,util:47}],29:[function(t,e,i){var s=t("../utils/math"),n=t("util"),o=t("../core/widget"),r=e.exports=function(t){this.defaultSize={width:50,height:20},o.call(this,t),this.val={value:0},this.min=-2e4,this.max=2e4,this.step=1,this.rate=.25,this.decimalPlaces=3,this.lostdata=0,this.actual=0,this.init()};n.inherits(r,o),r.prototype.init=function(){this.canvas.ontouchstart=null,this.canvas.ontouchmove=null,this.canvas.ontouchend=null;var t='<input type="text" class="nx" nx="number" id="'+this.canvasID+'" style="height:'+this.height+"px;width:"+this.width+"px;font-size:"+this.height/2+'px;"></input><canvas height="1px" width="1px" style="display:none"></canvas>',e=this.canvas,i=this.canvas.style,n=e.parentNode,o=document.createElement("span");o.innerHTML=t,n.replaceChild(o,e),this.el=document.getElementById(this.canvasID);for(var r in i)this.el.style[r]=i[r];this.canvas=document.getElementById(this.canvasID),this.canvas.style.fontSize=.6*this.height+"px",this.canvas.style.textAlign="left",this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.highlight=this.colors.fill,this.canvas.style.border="none",this.canvas.style.outline="none",this.canvas.style.padding="4px 10px",this.canvas.style.cursor="pointer",this.canvas.style.display="block",this.canvas.addEventListener("blur",function(){this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black,this.canvas.value!=this.val.value&&(this.actual=parseFloat(this.canvas.value),this.actual=s.clip(this.actual,this.min,this.max),this.actual=s.prune(this.actual,this.decimalPlaces),this.set({value:this.actual},!0))}.bind(this)),this.canvas.addEventListener("keydown",function(t){(t.which<48||t.which>57)&&189!=t.which&&190!=t.which&&8!=t.which&&t.preventDefault(),13==t.which&&this.canvas.blur()}.bind(this)),nx.isTouchDevice?(this.canvas.ontouchstart=this.preTouch,this.canvas.ontouchmove=this.preTouchMove,this.canvas.ontouchend=this.preTouchRelease):this.canvas.addEventListener("mousedown",this.preClick,!1),this.canvas.style.userSelect="none !important",this.canvas.style.mozUserSelect="none !important",this.canvas.style.webkitUserSelect="none !important",this.draw()},r.prototype.draw=function(){this.canvas.value=this.val.value},r.prototype.click=function(t){this.canvas.readOnly=!0,this.actual=this.val.value},r.prototype.move=function(t){this.clicked&&(this.canvas.style.border="none",this.actual-=this.deltaMove.y*(this.rate*this.step),this.actual=s.clip(this.actual,this.min,this.max),this.val.value=Math.floor(this.actual/this.step)*this.step,this.val.value=s.prune(this.val.value,this.decimalPlaces),this.draw(),this.transmit(this.val))},r.prototype.release=function(t){!this.hasMoved&&this.canvas.readOnly&&(this.canvas.readOnly=!1,this.canvas.focus(),this.canvas.setSelectionRange(0,this.canvas.value.length),this.canvas.style.backgroundColor=this.colors.accent,this.canvas.style.color=this.colors.fill)}},{"../core/widget":3,"../utils/math":6,util:47}],30:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),position=module.exports=function(t){this.defaultSize={width:150,height:100},widget.call(this,t),this.nodeSize=15,this.val={x:.5,y:.5},this.init()};util.inherits(position,widget),position.prototype.init=function(){this.nodeSize=Math.min(this.height,this.width)/10,this.nodeSize=Math.max(this.nodeSize,10),this.actualWid=this.width-2*this.nodeSize,this.actualHgt=this.height-2*this.nodeSize,this.draw()},position.prototype.draw=function(){with(this.erase(),this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height);var drawingX=this.val.x*this.actualWid+this.nodeSize,drawingY=math.invert(this.val.y)*this.actualHgt+this.nodeSize;with(drawingX<this.nodeSize?drawingX=this.nodeSize:drawingX>this.width-this.nodeSize&&(drawingX=this.width-this.nodeSize),drawingY<this.nodeSize?drawingY=this.nodeSize:drawingY>this.height-this.nodeSize&&(drawingY=this.height-this.nodeSize),this.context)beginPath(),fillStyle=this.colors.accent,arc(drawingX,drawingY,this.nodeSize,0,2*Math.PI,!0),fill(),closePath(),this.clicked&&(beginPath(),fillStyle=this.colors.accent,arc(drawingX,drawingY,2*this.nodeSize,0,2*Math.PI,!0),fill(),closePath())}this.drawLabel()},position.prototype.click=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.val.state="click",this.transmit(this.val),this.draw()},position.prototype.move=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.val.state="move",this.transmit(this.val),this.draw()},position.prototype.release=function(){this.val.x=this.clickPos.x,this.val.y=this.clickPos.y,this.scaleNode(),this.val.state="release",this.transmit(this.val),this.draw()},position.prototype.scaleNode=function(){var t=this.val.x-this.nodeSize,e=this.val.y-this.nodeSize,i=math.clip(t/this.actualWid,0,1),s=math.clip(e/this.actualHgt,0,1);this.val.x=math.prune(i,3),this.val.y=math.prune(s,3),this.val.y=math.invert(this.val.y)},position.prototype.animate=function(t){switch(t){case"bounce":nx.aniItems.push(this.aniBounce.bind(this));break;case"none":nx.aniItems.splice(nx.aniItems.indexOf(this.aniBounce))}},position.prototype.aniBounce=function(){!this.clicked&&this.val.x&&(this.val.x+=this.deltaMove.x/2/this.width,this.val.y-=this.deltaMove.y/2/this.height,this.val.state="animated",math.bounce(this.val.x,0,1,this.deltaMove.x)!=this.deltaMove.x&&(this.deltaMove.x=math.bounce(this.val.x,0,1,this.deltaMove.x),this.val.state="bounce"),(this.val.y>=1||this.val.y<=0)&&(this.deltaMove.y=-1*math.bounce(this.val.y,0,1,this.deltaMove.y),this.val.state="bounce"),this.transmit(this.val),this.draw())},position.prototype.customDestroy=function(){nx.removeAni(this.aniBounce)}},{"../core/widget":3,"../utils/math":6,util:47}],31:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),math=require("../utils/math"),range=module.exports=function(t){this.defaultSize={width:100,height:30},widget.call(this,t),this.val={start:.3,stop:.7,size:.4},this.hslider=!1,this.handle,this.relhandle,this.cap,this.firsttouch="start",this.mode="area",this.touchdown=new Object,this.init()};util.inherits(range,widget),range.prototype.init=function(){this.height>=this.width?this.hslider=!1:this.hslider=!0,null!=this.canvas.getAttribute("label")&&(this.label=this.canvas.getAttribute("label")),this.draw()},range.prototype.draw=function(){with(this.erase(),this.context)if(fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),this.hslider){nx.showLabels&&this.label&&(this.setFont(),fillText(this.label,this.width/2,this.height/2),globalAlpha=1);var x1=this.val.start*this.width,y1=0,x2=this.val.stop*this.width,y2=this.height;fillStyle=this.colors.accent,fillRect(x1,y1,x2-x1,y2-y1)}else{nx.showLabels&&this.label&&(save(),translate(this.width/2,0),rotate(Math.PI/2),this.setFont(),fillText(this.label,this.height/2,0),globalAlpha=1,restore());var x1=0,y1=this.height-this.val.stop*this.height,x2=this.width,y2=this.height-this.val.start*this.height;fillStyle=this.colors.accent,fillRect(x1,y1,x2-x1,y2-y1)}},range.prototype.click=function(){"edge"==this.mode?this.hslider?Math.abs(this.clickPos.x-this.val.start*this.width)<Math.abs(this.clickPos.x-this.val.stop*this.width)?this.firsttouch="start":this.firsttouch="stop":Math.abs(Math.abs(this.clickPos.y-this.height)-this.val.start*this.height)<Math.abs(Math.abs(this.clickPos.y-this.height)-this.val.stop*this.height)?this.firsttouch="start":this.firsttouch="stop":"area"==this.mode&&(this.touchdown={x:this.clickPos.x,y:this.clickPos.y},this.startval=new Object,this.startval.size=this.val.stop-this.val.start,this.startval.loc=this.val.start+this.startval.size/2),this.move()},range.prototype.move=function(){if("edge"==this.mode)this.hslider?"start"==this.firsttouch?(this.val.start=this.clickPos.x/this.width,this.clickPos.touches.length>1&&(this.val.stop=this.clickPos.touches[1].x/this.width)):(this.val.stop=this.clickPos.x/this.width,this.clickPos.touches.length>1&&(this.val.start=this.clickPos.touches[1].x/this.width)):"start"==this.firsttouch?(this.val.start=math.invert(this.clickPos.y/this.height),this.clickPos.touches.length>1&&(this.val.stop=math.invert(this.clickPos.touches[1].y/this.height))):(this.val.stop=math.invert(this.clickPos.y/this.height),this.clickPos.touches.length>1&&(this.val.start=math.invert(this.clickPos.touches[1].y/this.height))),this.val.stop<this.val.start&&(this.tempstart=this.val.start,this.val.start=this.val.stop,this.val.stop=this.tempstart,"start"==this.firsttouch?this.firsttouch="stop":this.firsttouch="start"),this.val={start:math.clip(this.val.start,0,1),stop:math.clip(this.val.stop,0,1)},this.val.size=math.prune(math.clip(Math.abs(this.val.stop-this.val.start),0,1),3),this.draw(),this.transmit(this.val);else if("area"==this.mode){if(this.hslider)var t=this.clickPos.x/this.width,e=(this.touchdown.y-this.clickPos.y)/this.height;else{var t=nx.invert(this.clickPos.y/this.height),e=(this.touchdown.x-this.clickPos.x)/this.width;e*=-1}e/=3;var i=this.startval.size+e;i=math.clip(i,.001,1),this.val={start:t-i/2,stop:t+i/2},this.val.start=math.clip(this.val.start,0,1),this.val.stop=math.clip(this.val.stop,0,1),this.draw(),this.transmit(this.val)}}},{"../core/widget":3,"../utils/math":6,util:47}],32:[function(t,e,i){var s=t("util"),n=t("../core/widget"),o=e.exports=function(t){this.defaultSize={width:200,height:30},n.call(this,t),this.choices=[],this.val=new Object,this.canvas.ontouchstart=null,this.canvas.ontouchmove=null,this.canvas.ontouchend=null,this.canvas.getAttribute("choices")&&(this.choices=this.canvas.getAttribute("choices"),this.choices=this.choices.split(","));var e='<select id="'+this.canvasID+'" class="nx" nx="select" style="height:'+this.height+"px;width:"+this.width+"px;font-size:"+this.height/2+'px;" onchange="'+this.canvasID+'.change(this)"></select><canvas height="1px" width="1px" style="display:none"></canvas>',i=this.canvas,s=this.canvas.style,o=i.parentNode,r=document.createElement("span");r.innerHTML=e,o.replaceChild(r,i),this.sel=document.getElementById(this.canvasID),this.sel.style["float"]="left",this.sel.style.display="block";for(var a in s)this.sel.style[a]=s[a];this.canvas=document.getElementById(this.canvasID),this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black;for(var h=0;h<this.choices.length;h++){var l=document.createElement("option");l.text=this.choices[h],l.value=this.choices[h],this.canvas.add(l,null)}};s.inherits(o,n),o.prototype.init=function(){this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black;for(var t=0;t<this.choices.length;t++){var e=document.createElement("option");e.text=this.choices[t],e.value=this.choices[t],this.canvas.add(e,null)}},o.prototype.change=function(t){this.val.text=t.value,this.transmit(this.val)},o.prototype.draw=function(){this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black}},{"../core/widget":3,util:47}],33:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),slider=module.exports=function(t){this.defaultSize={width:30,height:100},widget.call(this,t),this.val.value=.7,this.mode="absolute",this.hslider=!1,this.label="",this.handle,this.relhandle,this.cap,this.init()};util.inherits(slider,widget),slider.prototype.init=function(){this.height>=this.width?this.hslider=!1:this.hslider=!0,null!=this.canvas.getAttribute("label")&&(this.label=this.canvas.getAttribute("label")),this.draw()},slider.prototype.draw=function(){with(this.erase(),this.context)if(fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),this.hslider){nx.showLabels&&(this.setFont(),fillText(this.label,this.width/2,this.height/2),globalAlpha=1);var x1=0,y1=0,x2=this.val.value*this.width,y2=this.height;fillStyle=this.colors.accent,this.val.value>.01&&fillRect(x1,y1,x2-x1,y2-y1)}else{nx.showLabels&&(save(),translate(this.width/2,0),rotate(Math.PI/2),this.setFont(),fillText(this.label,this.height/2,0),globalAlpha=1,restore());var x1=0,y1=this.height-this.val.value*this.height,x2=this.width,y2=this.height;fillStyle=this.colors.accent,this.val.value>.01&&fillRect(x1,y1,x2-x1,y2-y1)}},slider.prototype.click=function(){this.move()},slider.prototype.move=function(){this.hslider?(this.handle=this.clickPos.x,this.relhandle=this.deltaMove.x,this.cap=this.width):(this.handle=this.clickPos.y,this.relhandle=-1*this.deltaMove.y,this.cap=this.height),"absolute"==this.mode?this.clicked&&(this.hslider?this.val.value=math.prune(math.clip(this.clickPos.x/this.width,0,1),3):this.val.value=math.prune(Math.abs(math.clip(this.clickPos.y/this.height,0,1)-1),3),this.draw()):"relative"==this.mode&&this.clicked&&(this.hslider?this.val.value=math.clip(this.val.value+this.deltaMove.x/this.width,0,1):this.val.value=math.clip(this.val.value+-1*this.deltaMove.y/this.height,0,1),this.draw()),this.transmit(this.val)}},{"../core/widget":3,"../utils/math":6,util:47}],34:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),string=module.exports=function(t){this.defaultSize={width:150,height:75},widget.call(this,t),this.val={string:0,x:0},this.numberOfStrings=10,this.strings=new Array,this.abovestring=new Array,this.friction=1;this.init(),nx.aniItems.push(this.draw.bind(this))};util.inherits(string,widget),string.prototype.init=function(){stringdiv=this.height/(this.numberOfStrings+1);for(var t=0;t<this.numberOfStrings;t++)this.strings[t]={x1:this.lineWidth,y1:stringdiv*(1+t),x2:this.width-this.lineWidth,y2:stringdiv*(t+1),held:!1,vibrating:!1,force:0,maxstretch:0,stretch:0,direction:0,above:!1};this.draw()},string.prototype.pulse=function(){this.draw()},string.prototype.setStrings=function(t){this.numberOfStrings=t,this.strings=new Array,this.init()},string.prototype.draw=function(){with(this.erase(),this.makeRoundedBG(),this.context){strokeStyle=this.colors.border,fillStyle=this.colors.fill,lineWidth=this.lineWidth,fill(),strokeStyle=this.colors.accent;for(var i=0;i<this.strings.length;i++){var st=this.strings[i];st.vibrating?(st.maxstretch<0&&(st.vibrating=!1,st.held=!1),st.stretch=st.stretch+st.direction,Math.abs(st.stretch)>st.maxstretch&&(st.direction*=-1,st.stretch=st.stretch+st.direction,st.maxstretch=st.maxstretch-this.friction,st.direction=st.direction/Math.abs(st.direction)*(st.maxstretch/1)),beginPath(),moveTo(st.x1,st.y1),quadraticCurveTo(this.width/2,st.y1+st.stretch,st.x2,st.y2),stroke(),closePath(),st.on=!0):st.held?(beginPath(),moveTo(st.x1,st.y1),quadraticCurveTo(this.clickPos.x,this.clickPos.y,st.x2,st.y2),stroke(),closePath(),st.on=!0):(beginPath(),moveTo(st.x1,st.y1),lineTo(st.x2,st.y2),stroke(),closePath(),st.on&&(st.on=!1))}}this.drawLabel()},string.prototype.click=function(){for(var t=0;t<this.numberOfStrings;t++)this.strings[t].above=this.clickPos.y<this.strings[t].y1;this.draw()},string.prototype.move=function(){if(this.clicked)for(var t=0;t<this.strings.length;t++)this.strings[t].above!=this.clickPos.y<this.strings[t].y1&&(this.strings[t].held=!0,this.strings[t].above^=!0),this.strings[t].held&&Math.abs(this.clickPos.y-this.strings[t].y1)>this.height/(3*this.strings.length)&&this.pluck(t)},string.prototype.release=function(){for(var t=0;t<this.strings.length;t++)this.strings[t].held&&this.pluck(t)},string.prototype.pluck=function(t){var e=t;this.val={string:e,x:this.clickPos.x/this.width},this.transmit(this.val),this.strings[e].held=!1,this.strings[e].force=this.clickPos.y-this.strings[e].y1,this.strings[e].maxstretch=Math.abs(this.clickPos.y-this.strings[e].y1),this.strings[e].stretch=this.clickPos.y-this.strings[e].y1,this.strings[e].vibrating=!0,this.strings[e].direction=(this.clickPos.y-this.strings[e].y1)/Math.abs(this.clickPos.y-this.strings[e].y1)*((this.clickPos.y-this.strings[e].y1)/-1.2)},string.prototype.customDestroy=function(){nx.removeAni(this.draw.bind(this))}},{"../core/widget":3,util:47}],35:[function(require,module,exports){var util=(require("../utils/math"),require("util")),widget=require("../core/widget"),tabs=module.exports=function(t){this.defaultSize={width:150,height:50},widget.call(this,t),this.choice=0,this.val={index:0,text:""},this.tabwid=0,this.options=["one","two","three"],this.init()};util.inherits(tabs,widget),tabs.prototype.init=function(){this.draw()},tabs.prototype.draw=function(){with(this.context)fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),textAlign="center",textBaseline="middle",font="normal "+this.height/5+"px courier";this.tabwid=this.width/this.options.length;for(var i=0;i<this.options.length;i++){if(i==this.choice)var tabcol=this.colors.accent,textcol=this.colors.white;else{var tabcol=this.colors.fill,textcol=this.colors.black;globalAlpha=.7}with(this.context)fillStyle=tabcol,fillRect(this.tabwid*i,0,this.tabwid,this.height),i!=this.options.length-1&&(beginPath(),moveTo(this.tabwid*(i+1),0),lineTo(this.tabwid*(i+1),this.height),lineWidth=1,strokeStyle=this.colors.border,stroke(),closePath()),fillStyle=textcol,font=this.fontSize+"px "+this.font,fillText(this.options[i],this.tabwid*i+this.tabwid/2,this.height/2)}},tabs.prototype.click=function(){this.choice=~~(this.clickPos.x/this.tabwid),this.val={index:this.choice,text:this.options[this.choice]},this.transmit(this.val),this.draw()}},{"../core/widget":3,"../utils/math":6,util:47}],36:[function(t,e,i){var s=t("util"),n=t("../core/widget"),o=e.exports=function(t){this.defaultSize={width:200,height:100},n.call(this,t),this.val={text:""};var e='<textarea id="'+this.canvasID+'" style="height:'+this.height+"px;width:"+this.width+'px;" onkeydown="'+this.canvasID+'.change(event,this)"></textarea><canvas height="1px" width="1px" style="display:none"></canvas>',i=this.canvas,s=this.canvas.style,o=i.parentNode,r=document.createElement("span");r.innerHTML=e,o.replaceChild(r,i),this.el=document.getElementById(this.canvasID);for(var a in s)this.el.style[a]=s[a];this.el.style.display="block",this.el.style.backgroundColor=this.colors.fill,this.el.style.border="none",this.el.style.color=this.colors.black,this.el.style.outline="none",this.el.style.resize="none",this.el.style.boxSizing="border-box",this.el.style.padding="5px",this.el.style.fontFamily=nx.font,this.el.style.fontSize="16px",this.canvas=document.getElementById(this.canvasID)};s.inherits(o,n),o.prototype.init=function(){this.canvas.ontouchstart=null,this.canvas.ontouchmove=null,this.canvas.ontouchend=null,this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black},o.prototype.change=function(t,e){this.val.text=e.value,"13"==t.which&&(this.transmit(this.val),this.val.text="",this.draw(),t.preventDefault())},o.prototype.draw=function(){this.el.value=this.val.text,this.canvas.style.backgroundColor=this.colors.fill,this.canvas.style.color=this.colors.black}},{"../core/widget":3,util:47}],37:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),tilt=module.exports=function(t){this.defaultSize={width:50,height:50},widget.call(this,t),this.tiltLR,this.tiltFB,this.z,this.active=!0,this.val={x:0,y:0,z:0},this.text="TILT",this.init(),this.boundChromeTilt=this.chromeTilt.bind(this),this.boundMozTilt=this.mozTilt.bind(this),window.DeviceOrientationEvent?window.addEventListener("deviceorientation",this.boundChromeTilt,!1):window.OrientationEvent?window.addEventListener("MozOrientation",this.boundMozTilt,!1):console.log("Not supported on your device or browser.")};util.inherits(tilt,widget),tilt.prototype.deviceOrientationHandler=function(){this.val={x:math.prune(this.tiltLR/90,3),y:math.prune(this.tiltFB/90,3),z:math.prune(this.z,3)},this.active&&this.transmit(this.val)},tilt.prototype.chromeTilt=function(t){this.tiltLR=t.gamma,this.tiltFB=t.beta,this.z=t.alpha,this.deviceOrientationHandler(),this.draw()},tilt.prototype.mozTilt=function(t){this.tiltLR=90*t.x,this.tiltFB=-90*t.y,this.z=t.z,this.deviceOrientationHandler(),this.draw()},tilt.prototype.init=function(){this.draw()},tilt.prototype.draw=function(){with(this.erase(),this.context)fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),save(),translate(this.width/2,this.height/2),rotate(-this.val.x*Math.PI/2),translate(-this.width/2,-this.height/2),globalAlpha=.4,this.active?fillStyle=this.colors.accent:fillStyle=this.colors.border,fillRect(-this.width,this.height*(this.val.y/2)+this.height/2,3*this.width,2*this.height),font="bold "+this.height/5+"px "+this.font,textAlign="center",fillText(this.text,this.width/2,this.height*(this.val.y/2)+this.height/2+this.height/15),globalAlpha=1,restore();this.drawLabel()},tilt.prototype.click=function(){this.active=!this.active},tilt.prototype.customDestroy=function(){this.active=!1,window.removeEventListener("deviceorientation",this.boundChromeTilt,!1),window.removeEventListener("mozOrientation",this.boundMozTilt,!1)}},{"../core/widget":3,"../utils/math":6,util:47}],38:[function(require,module,exports){var util=(require("../utils/drawing"),require("util")),widget=require("../core/widget"),toggle=module.exports=function(t){this.defaultSize={width:50,height:50},widget.call(this,t),this.mindim=this.height>this.width?this.width:this.height,this.val={value:0},this.init()};util.inherits(toggle,widget),toggle.prototype.init=function(){this.fontsize=this.mindim/4,this.draw()},toggle.prototype.draw=function(){with(this.erase(),this.context)this.val.value?fillStyle=this.colors.accent:fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),this.val.value?(this.setFont(),fillStyle=this.colors.white,globalAlpha=1,fillText("on",this.width/2,this.height/2)):(this.setFont(),fillText("off",this.width/2,this.height/2),globalAlpha=1);this.drawLabel()},toggle.prototype.click=function(){this.val.value?this.val.value=0:this.val.value=1,this.draw(),this.transmit(this.val)}},{"../core/widget":3,"../utils/drawing":5,util:47}],39:[function(require,module,exports){var drawing=require("../utils/drawing"),util=require("util"),widget=require("../core/widget"),typewriter=module.exports=function(t){this.defaultSize={width:300,height:100},widget.call(this,t),this.letter="",this.keywid=this.width/14.5,this.keyhgt=this.height/5,this.active=!0,this.val={key:"",ascii:0,on:0},this.rows=[[{symbol:"`",value:192,width:1,on:!1},{symbol:"1",value:49,width:1,on:!1},{symbol:"2",value:50,width:1,on:!1},{symbol:"3",value:51,width:1,on:!1},{symbol:"4",value:52,width:1,on:!1},{symbol:"5",value:53,width:1,on:!1},{symbol:"6",value:54,width:1,on:!1},{symbol:"7",value:55,width:1,on:!1},{symbol:"8",value:56,width:1,on:!1},{symbol:"9",value:57,width:1,on:!1},{symbol:"0",value:48,width:1,on:!1},{symbol:"-",value:189,width:1,on:!1},{symbol:"=",value:187,width:1,on:!1},{symbol:"delete",value:46,width:1.5,on:!1}],[{symbol:"tab",value:9,width:1.5,on:!1},{symbol:"q",value:81,width:1,on:!1},{symbol:"w",value:87,width:1,on:!1},{symbol:"e",value:69,width:1,on:!1},{symbol:"r",value:82,width:1,on:!1},{symbol:"t",value:84,width:1,on:!1},{symbol:"y",value:89,width:1,on:!1},{symbol:"u",value:85,width:1,on:!1},{symbol:"i",value:73,width:1,on:!1},{symbol:"o",value:79,width:1,on:!1},{symbol:"p",value:80,width:1,on:!1},{symbol:"[",value:219,width:1,on:!1},{symbol:"]",value:221,width:1,on:!1},{symbol:"\\",value:220,width:1,on:!1}],[{symbol:"caps",value:20,width:1.75,on:!1},{symbol:"a",value:65,width:1,on:!1},{symbol:"s",value:83,width:1,on:!1},{symbol:"d",value:68,width:1,on:!1},{symbol:"f",value:70,width:1,on:!1},{symbol:"g",value:71,width:1,on:!1},{symbol:"h",value:72,width:1,on:!1},{symbol:"j",value:74,width:1,on:!1},{symbol:"k",value:75,width:1,on:!1},{symbol:"l",value:76,width:1,on:!1},{symbol:";",value:186,width:1,on:!1},{symbol:"'",value:222,width:1,on:!1},{symbol:"enter",value:13,width:1.75,on:!1}],[{symbol:"shift",value:16,width:2.25,on:!1},{symbol:"z",value:90,width:1,on:!1},{symbol:"x",value:88,width:1,on:!1},{symbol:"c",value:67,width:1,on:!1},{symbol:"v",value:86,width:1,on:!1},{symbol:"b",value:66,width:1,on:!1},{symbol:"n",value:78,width:1,on:!1},{symbol:"m",value:77,width:1,on:!1},{symbol:",",value:188,width:1,on:!1},{symbol:".",value:190,width:1,on:!1},{symbol:"/",value:191,width:1,on:!1},{symbol:"shift",value:16,width:2.25,on:!1}],[{symbol:"fn",value:10,
width:1,on:!1},{symbol:"ctrl",value:17,width:1,on:!1},{symbol:"opt",value:10,width:1,on:!1},{symbol:"cmd",value:10,width:1.25,on:!1},{symbol:"space",value:32,width:5,on:!1},{symbol:"cmd",value:10,width:1,on:!1},{symbol:"opt",value:10,width:1,on:!1},{symbol:"left",value:37,width:.81,on:!1},{symbol:"up",value:38,width:.81,on:!1},{symbol:"down",value:40,width:.81,on:!1},{symbol:"right",value:39,width:.81,on:!1}]],this.boundType=this.typekey.bind(this),this.boundUntype=this.untype.bind(this),window.addEventListener("keydown",this.boundType),window.addEventListener("keyup",this.boundUntype),this.init()};util.inherits(typewriter,widget),typewriter.prototype.init=function(){this.keywid=this.width/14.5,this.keyhgt=this.height/5,this.draw()},typewriter.prototype.draw=function(){with(this.erase(),this.active?this.context.globalAlpha=1:this.context.globalAlpha=.4,this.context){strokeStyle=this.colors.border,fillStyle=this.colors.accent,lineWidth=1;for(var i=0;i<this.rows.length;i++)for(var currkeyL=0,j=0;j<this.rows[i].length;j++)this.val.key==this.rows[i][j].symbol&&(this.val.on?this.rows[i][j].on=!0:this.rows[i][j].on=!1),drawing.makeRoundRect(this.context,currkeyL,i*this.keyhgt,this.keywid*this.rows[i][j].width,this.keyhgt,4),this.rows[i][j].on?(fillStyle=this.colors.accent,strokeStyle=this.colors.accent,fill(),stroke()):(fillStyle=this.colors.fill,strokeStyle=this.colors.border,fill(),stroke()),currkeyL+=this.keywid*this.rows[i][j].width;this.val.on&&(this.setFont(),fillStyle=this.colors.border,font=this.height+"px "+this.font,fillText(this.val.key,this.width/2,this.height/2),globalAlpha=1),this.active||(globalAlpha=.7,fillStyle=this.colors.border,font=this.height/2+"px courier",textAlign="center",textBaseline="middle",fillText("inactive",this.width/2,this.height/2))}this.drawLabel()},typewriter.prototype.click=function(t){this.active=!this.active,this.draw()},typewriter.prototype.typekey=function(t){if(this.active){for(var e=t.which,i=0;i<this.rows.length;i++)for(var s=0;s<this.rows[i].length;s++)if(e==this.rows[i][s].value){this.val.key=this.rows[i][s].symbol,this.val.on=1,this.val.ascii=t.which,this.transmit(this.val);break}this.draw()}},typewriter.prototype.untype=function(t){if(this.active){for(var e=t.which,i=0;i<this.rows.length;i++)for(var s=0;s<this.rows[i].length;s++)if(e==this.rows[i][s].value){this.val.key=this.rows[i][s].symbol,this.val.on=0,this.val.ascii=t.which,this.transmit(this.val);break}this.draw()}},typewriter.prototype.customDestroy=function(){window.removeEventListener("keydown",this.boundType),window.removeEventListener("keyup",this.boundUntype)}},{"../core/widget":3,"../utils/drawing":5,util:47}],40:[function(require,module,exports){var math=require("../utils/math"),util=require("util"),widget=require("../core/widget"),vinyl=module.exports=function(t){this.defaultSize={width:100,height:100},widget.call(this,t),this.circleSize,this.speed=.05,this.defaultspeed=.05,this.rotation=0,this.hasMovedOnce=!1,this.lockResize=!0,this.val={speed:0},this.init(),nx.aniItems.push(this.spin.bind(this))};util.inherits(vinyl,widget),vinyl.prototype.init=function(){this.circleSize=Math.min(this.center.x,this.center.y)-this.lineWidth,this.draw()},vinyl.prototype.draw=function(){with(this.erase(),this.context)strokeStyle=this.colors.border,fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),beginPath(),fillStyle=this.colors.black,arc(this.center.x,this.center.y,this.circleSize-5,0,2*Math.PI,!0),fill(),closePath(),beginPath(),fillStyle=this.colors.accent,arc(this.center.x,1*this.center.y,this.circleSize/4,0,2*Math.PI,!1),fill(),closePath(),beginPath(),globalAlpha=.5,fillStyle=this.colors.fill,arc(this.center.x,this.center.y,this.circleSize,this.rotation,this.rotation+.4,!1),lineTo(this.center.x,this.center.y),arc(this.center.x,this.center.y,this.circleSize,this.rotation+Math.PI,this.rotation+Math.PI+.4,!1),lineTo(this.center.x,this.center.y),fill(),globalAlpha=1,closePath(),beginPath(),fillStyle=this.colors.white,arc(this.center.x,1*this.center.y,this.circleSize/16,0,2*Math.PI,!1),fill(),closePath();this.drawLabel()},vinyl.prototype.click=function(t){this.hasMovedOnce=!1,this.lastRotation=this.rotation,this.grabAngle=this.rotation%(2*Math.PI),this.grabPos=math.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).angle},vinyl.prototype.move=function(){this.hasMovedOnce||(this.hasMovedOnce=!0,this.grabAngle=this.rotation%(2*Math.PI),this.grabPos=math.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).angle),this.rotation=math.toPolar(this.clickPos.x-this.center.x,this.clickPos.y-this.center.y).angle+this.grabAngle-this.grabPos},vinyl.prototype.release=function(){this.speed=(this.rotation-this.lastRotation+(this.lastRotation-this.lastRotation2))/2},vinyl.prototype.spin=function(){this.clicked?this.speed/=1.1:this.speed=.9*this.speed+.1*this.defaultspeed,this.val.speed=20*(this.rotation-this.lastRotation),this.lastRotation2=this.lastRotation,this.lastRotation=this.rotation,this.rotation+=this.speed,this.draw(),this.transmit(this.val)},vinyl.prototype.customDestroy=function(){nx.removeAni(this.spin.bind(this))}},{"../core/widget":3,"../utils/math":6,util:47}],41:[function(require,module,exports){var util=require("util"),widget=require("../core/widget"),math=require("../utils/math"),waveform=module.exports=function(t){this.defaultSize={width:400,height:125},widget.call(this,t),this.val={start:0,stop:0,size:0,starttime:0,stoptime:0,looptime:0},this.handle,this.relhandle,this.cap,this.firsttouch="start",this.buffer=[],nx.isMobile?this.definition=3:this.definition=1,this.pieces=!1,this.channels=1,this.rawbuffer=[],this.times=[{dur:10,format:1},{dur:50,format:1},{dur:100,format:1},{dur:200,format:1},{dur:500,format:1},{dur:1e3,format:1},{dur:2e3,format:1},{dur:5e3,format:1},{dur:1e4,format:3},{dur:15e3,format:3},{dur:6e4,format:3},{dur:12e4,format:3},{dur:3e5,format:3},{dur:6e5,format:3}],this.timescale=!1,this.mode="area",this.touchdown=new Object,this.init()};util.inherits(waveform,widget),waveform.prototype.init=function(){this.pieces=~~(this.width/this.definition),this.draw()},waveform.prototype.setBuffer=function(t){for(this.channels=t.numberOfChannels,this.duration=t.duration,this.sampleRate=t.sampleRate,this.waveHeight=this.height/this.channels,this.durationMS=1e3*this.duration,this.timescale=0;~~(this.durationMS/this.times[this.timescale].dur)>7&&this.timescale<this.times.length;)this.timescale++;this.timescale=this.times[this.timescale],this.rawbuffer=[],this.buffer=[];for(var e=0;e<this.channels;e++){this.rawbuffer.push(t.getChannelData(0)),this.buffer.push([]);for(var i=~~(this.rawbuffer[0].length/(5*this.sampleRate))+1,s=~~(this.rawbuffer[e].length/this.pieces),n=0,o=0,r=0,a=0;a<this.rawbuffer[e].length;a+=i)this.rawbuffer[e][a]>0?n=Math.max(n,this.rawbuffer[e][a]):o=Math.min(o,this.rawbuffer[e][a]),a>r*s&&(this.buffer[e].push([n,o]),r++,o=0,n=0)}this.val.start&&this.val.stop,this.val.starttime=Math.round(this.val.start*this.durationMS),this.val.stoptime=Math.round(this.val.stop*this.durationMS),this.val.looptime=Math.round(this.val.size*this.durationMS),this.draw()},waveform.prototype.select=function(t,e){this.val.start=math.clip(t/this.durationMS,0,1),this.val.stop=math.clip(e/this.durationMS,0,1),this.val.size=this.val.stop-this.val.start,this.val.starttime=t,this.val.stoptime=e,this.val.looptime=t-e,this.transmit(this.val),this.draw()},waveform.prototype.draw=function(){with(this.context){fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height);for(var i=0;i<this.buffer.length;i++){fillStyle=this.colors.black,this.waveTop=i*this.waveHeight,this.waveCenter=this.waveTop+this.waveHeight/2;for(var j=0;j<this.buffer[i].length;j++){var ht1=this.waveCenter-this.buffer[i][j][0]*this.waveHeight,ht2=this.waveCenter+Math.abs(this.buffer[i][j][1]*this.waveHeight);ht2-=ht1,fillRect(j*this.definition,ht1,this.definition,ht2)}this.buffer[i]}if(globalAlpha=.3,fillStyle=this.colors.border,fillRect(0,0,this.width,16),globalAlpha=1,textBaseline="middle",textAlign="left",fontSize="8px",this.timescale)for(var i=1;i<this.durationMS/this.timescale.dur;i++){var x=i*this.timescale.dur/this.durationMS;x*=this.width,fillStyle=this.colors.border,fillRect(x,0,1,this.height),fillStyle=this.colors.black,globalAlpha=.6,fillText(this.msToTime(i*this.timescale.dur,this.timescale.format),x+5,8),globalAlpha=1}var x1=this.val.start*this.width,y1=0,x2=this.val.stop*this.width,y2=this.height;if(fillStyle=this.colors.accent,strokeStyle=this.colors.accent,lineWidth=2,globalAlpha=.3,fillRect(x1,y1,x2-x1,y2-y1),globalAlpha=.7,strokeRect(x1,y1-2,x2-x1,y2-y1+4),this.durationMS&&this.val.looptime){this.val.size=this.val.stop-this.val.start,textAlign="center";var dur=this.val.looptime;dur>1e3?(dur/=1e3,math.prune(dur,2),dur+=" s"):(math.prune(dur,0),dur+=" ms"),fillText(dur,x1+(x2-x1)/2,this.height/2)}globalAlpha=1}},waveform.prototype.msToTime=function(t,e){var e=e?e:2,i=~~(t/1e3),s=i%60;i=(i-s)/60;var n=i%60,o=t%1e3;return s=10>s&&n?s+"0":s,1==e?s+"."+o:2==e?n+":"+s+"."+o:3==e?n+":"+s:void 0},waveform.prototype.click=function(){"edge"==this.mode?Math.abs(this.clickPos.x-this.val.start*this.width)<Math.abs(this.clickPos.x-this.val.stop*this.width)?this.firsttouch="start":this.firsttouch="stop":"area"==this.mode&&(this.touchdown={x:this.clickPos.x,y:this.clickPos.y},this.startval=new Object,this.startval.size=this.val.stop-this.val.start,this.startval.loc=this.val.start+this.startval.size/2),this.move()},waveform.prototype.move=function(){if("edge"==this.mode)"start"==this.firsttouch?(this.val.start=this.clickPos.x/this.width,this.clickPos.touches.length>1&&(this.val.stop=this.clickPos.touches[1].x/this.width)):(this.val.stop=this.clickPos.x/this.width,this.clickPos.touches.length>1&&(this.val.start=this.clickPos.touches[1].x/this.width)),this.val.stop<this.val.start&&(this.tempstart=this.val.start,this.val.start=this.val.stop,this.val.stop=this.tempstart,"start"==this.firsttouch?this.firsttouch="stop":this.firsttouch="start");else if("area"==this.mode){var t=this.clickPos.x/this.width,e=(this.touchdown.y-this.clickPos.y)/this.height;e/=4;var i=this.startval.size+e;i=math.clip(i,.001,1),this.val={start:t-i/2,stop:t+i/2}}this.val.start=math.clip(this.val.start,0,1),this.val.stop=math.clip(this.val.stop,0,1),this.val.size=math.clip(Math.abs(this.val.stop-this.val.start),0,1),this.durationMS&&(this.val.starttime=Math.round(this.val.start*this.durationMS),this.val.stoptime=Math.round(this.val.stop*this.durationMS),this.val.looptime=Math.round(this.val.size*this.durationMS)),this.transmit(this.val),this.draw()}},{"../core/widget":3,"../utils/math":6,util:47}],42:[function(require,module,exports){var util=(require("../utils/math"),require("util")),widget=require("../core/widget"),windows=module.exports=function(t){this.defaultSize={width:200,height:200},widget.call(this,t),this.val={items:[],add:!1,remove:!1,change:!1},this.size=.25,this.meta=!1,this.resizing=!1,this.init(),document.addEventListener("keydown",function(t){t.shiftKey&&!this.meta&&(this.meta=!0,this.draw())}.bind(this)),document.addEventListener("keyup",function(t){!t.shiftKey&&this.meta&&(this.meta=!1,this.draw())}.bind(this))};util.inherits(windows,widget),windows.prototype.init=function(){this.draw()},windows.prototype.add=function(t,e,i,s){this.val.items.push({x:t,y:e,w:i,h:s}),this.draw()},windows.prototype.setWindow=function(t,e){this.val.items[t]=e,this.draw()},windows.prototype.remove=function(t){this.val.items.splice(t,1),this.val.add=!1,this.val.remove=t,this.val.change=!1,this.transmit(this.val),this.draw()},windows.prototype.draw=function(){with(this.context){this.meta?fillStyle=this.colors.border:fillStyle=this.colors.fill,fillRect(0,0,this.width,this.height),globalAlpha=.8;for(var i=0;i<this.val.items.length;i++){fillStyle=this.colors.accent;var x=this.val.items[i].x*this.width,y=this.val.items[i].y*this.height,w=this.val.items[i].w*this.width,h=this.val.items[i].h*this.height;fillRect(x,y,w,h),strokeStyle=this.colors.fill,lineWidth=1,strokeRect(x+w-10,y+h-10,10,10)}globalAlpha=1}this.drawLabel()},windows.prototype.click=function(){this.holds=!1;for(var t=this.clickPos.x/this.width,e=this.clickPos.y/this.height,i=0;i<this.val.items.length;i++)nx.isInside({x:t,y:e},this.val.items[i])&&(this.holds=i,this.clickPos.x>(this.val.items[i].x+this.val.items[i].w)*this.width-10&&this.clickPos.x<(this.val.items[i].x+this.val.items[i].w)*this.width&&this.clickPos.y>(this.val.items[i].y+this.val.items[i].h)*this.height-10&&this.clickPos.y<(this.val.items[i].y+this.val.items[i].h)*this.height&&(this.resizing=!0));if(this.holds===!1&&(this.val.items.push({x:t,y:e,w:this.size,h:this.size}),this.holds=this.val.items.length-1,this.hasMoved=!0,this.val.add=this.val.items[this.holds],this.val.remove=!1,this.val.change=!1,this.transmit(this.val)),this.meta){for(var i=0;i<this.val.items.length;i++)this.val.items[i].tx=this.val.items[i].x,this.val.items[i].ty=this.val.items[i].y;this.tx=t,this.ty=e}this.draw()},windows.prototype.move=function(){var t=this.clickPos.x/this.width,e=this.clickPos.y/this.height;if(this.resizing)if(this.meta)for(var i=0;i<this.val.items.length;i++)this.val.items[i].w=t-this.val.items[this.holds].x,this.val.items[i].h=e-this.val.items[this.holds].y,this.val.items[i]=this.restrict(this.val.items[i]);else this.val.items[this.holds].w=t-this.val.items[this.holds].x,this.val.items[this.holds].h=e-this.val.items[this.holds].y,this.val.items[this.holds]=this.restrict(this.val.items[this.holds]);else if(this.meta)for(var i=0;i<this.val.items.length;i++)this.val.items[i].x=t-this.tx+this.val.items[i].tx,this.val.items[i].y=e-this.ty+this.val.items[i].ty,this.val.items[i]=this.restrict(this.val.items[i]);else this.val.items[this.holds].x=t,this.val.items[this.holds].y=e,this.val.items[this.holds]=this.restrict(this.val.items[this.holds]);this.val.change=!0,this.val.add=!1,this.val.remove=!1,this.transmit(this.val),this.draw()},windows.prototype.release=function(){this.hasMoved||(this.meta?(this.val.add=!1,this.val.remove="all",this.val.change=!1,this.val.items=[]):(this.val.add=!1,this.val.remove=this.holds,this.val.change=!1,this.val.items.splice(this.holds,1))),this.resizing=!1,this.transmit(this.val),this.draw()},windows.prototype.restrict=function(t){return t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x+t.w>1&&(t.x=1-t.w),t.y+t.h>1&&(t.y=1-t.h),t}},{"../core/widget":3,"../utils/math":6,util:47}],43:[function(t,e,i){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function o(t){return"number"==typeof t}function r(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},s.prototype.emit=function(t){var e,i,s,o,h,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[t],a(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,o=new Array(s-1),h=1;s>h;h++)o[h-1]=arguments[h];i.apply(this,o)}else if(r(i)){for(s=arguments.length,o=new Array(s-1),h=1;s>h;h++)o[h-1]=arguments[h];for(l=i.slice(),s=l.length,h=0;s>h;h++)l[h].apply(this,o)}return!0},s.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned){var i;i=a(this._maxListeners)?s.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(t,e){function i(){this.removeListener(t,i),s||(s=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var s=!1;return i.listener=e,this.on(t,i),this},s.prototype.removeListener=function(t,e){var i,s,o,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],o=i.length,s=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(a=o;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){s=a;break}if(0>s)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},s.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},s.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},s.listenerCount=function(t,e){var i;return i=t._events&&t._events[e]?n(t._events[e])?1:t._events[e].length:0}},{}],44:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],45:[function(t,e,i){function s(){}var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var i=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),i.length>0)){var s=i.shift();s()}},!0),function(t){i.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=s,n.addListener=s,n.once=s,n.off=s,n.removeListener=s,n.removeAllListeners=s,n.emit=s,n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],46:[function(t,e,i){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],47:[function(t,e,i){(function(e,s){function n(t,e){var s={seen:[],stylize:r};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),y(e)?s.showHidden=e:e&&i._extend(s,e),b(s.showHidden)&&(s.showHidden=!1),b(s.depth)&&(s.depth=2),b(s.colors)&&(s.colors=!1),b(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=o),h(s,t,s.depth)}function o(t,e){var i=n.styles[e];return i?"["+n.colors[i][0]+"m"+t+"["+n.colors[i][1]+"m":t}function r(t,e){return t}function a(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}function h(t,e,s){if(t.customInspect&&e&&P(e.inspect)&&e.inspect!==i.inspect&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(s,t);return w(n)||(n=h(t,n,s)),n}var o=l(t,e);if(o)return o;var r=Object.keys(e),y=a(r);if(t.showHidden&&(r=Object.getOwnPropertyNames(e)),k(e)&&(r.indexOf("message")>=0||r.indexOf("description")>=0))return c(e);if(0===r.length){if(P(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(T(e))return t.stylize(Date.prototype.toString.call(e),"date");if(k(e))return c(e)}var v="",g=!1,_=["{","}"];if(f(e)&&(g=!0,_=["[","]"]),P(e)){var b=e.name?": "+e.name:"";v=" [Function"+b+"]"}if(x(e)&&(v=" "+RegExp.prototype.toString.call(e)),T(e)&&(v=" "+Date.prototype.toUTCString.call(e)),k(e)&&(v=" "+c(e)),0===r.length&&(!g||0==e.length))return _[0]+v+_[1];if(0>s)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var S;return S=g?u(t,e,s,y,r):r.map(function(i){return p(t,e,s,y,i,g)}),t.seen.pop(),d(S,v,_)}function l(t,e){if(b(e))return t.stylize("undefined","undefined");if(w(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return g(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function u(t,e,i,s,n){for(var o=[],r=0,a=e.length;a>r;++r)O(e,String(r))?o.push(p(t,e,i,s,String(r),!0)):o.push("");return n.forEach(function(n){n.match(/^\d+$/)||o.push(p(t,e,i,s,n,!0))}),o}function p(t,e,i,s,n,o){var r,a,l;if(l=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]},l.get?a=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),O(s,n)||(r="["+n+"]"),a||(t.seen.indexOf(l.value)<0?(a=m(i)?h(t,l.value,null):h(t,l.value,i-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),b(r)){if(o&&n.match(/^\d+$/))return a;r=JSON.stringify(""+n),r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(r=r.substr(1,r.length-2),r=t.stylize(r,"name")):(r=r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),r=t.stylize(r,"string"))}return r+": "+a}function d(t,e,i){var s=0,n=t.reduce(function(t,e){return s++,e.indexOf("\n")>=0&&s++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return n>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}function f(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function m(t){return null===t}function v(t){return null==t}function g(t){return"number"==typeof t}function w(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function b(t){return void 0===t}function x(t){return S(t)&&"[object RegExp]"===E(t)}function S(t){return"object"==typeof t&&null!==t}function T(t){return S(t)&&"[object Date]"===E(t)}function k(t){return S(t)&&("[object Error]"===E(t)||t instanceof Error)}function P(t){return"function"==typeof t}function M(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function E(t){return Object.prototype.toString.call(t)}function A(t){return 10>t?"0"+t.toString(10):t.toString(10)}function q(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),j[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=/%[sdj%]/g;i.format=function(t){if(!w(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(n(arguments[i]));return e.join(" ")}for(var i=1,s=arguments,o=s.length,r=String(t).replace(C,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(s[i++]);case"%d":return Number(s[i++]);case"%j":try{return JSON.stringify(s[i++])}catch(e){return"[Circular]"}default:return t}}),a=s[i];o>i;a=s[++i])r+=m(a)||!S(a)?" "+a:" "+n(a);return r},i.deprecate=function(t,n){function o(){if(!r){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),r=!0}return t.apply(this,arguments)}if(b(s.process))return function(){return i.deprecate(t,n).apply(this,arguments)};if(e.noDeprecation===!0)return t;var r=!1;return o};var R,F={};i.debuglog=function(t){if(b(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!F[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var s=e.pid;F[t]=function(){var e=i.format.apply(i,arguments);console.error("%s %d: %s",t,s,e)}}else F[t]=function(){};return F[t]},i.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},i.isArray=f,i.isBoolean=y,i.isNull=m,i.isNullOrUndefined=v,i.isNumber=g,i.isString=w,i.isSymbol=_,i.isUndefined=b,i.isRegExp=x,i.isObject=S,i.isDate=T,i.isError=k,i.isFunction=P,i.isPrimitive=M,i.isBuffer=t("./support/isBuffer");var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i.log=function(){console.log("%s - %s",q(),i.format.apply(i,arguments))},i.inherits=t("inherits"),i._extend=function(t,e){if(!e||!S(e))return t;for(var i=Object.keys(e),s=i.length;s--;)t[i[s]]=e[i[s]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":46,_process:45,inherits:44}],48:[function(t,e,i){var s,n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=function(t){"use strict";if(!t||"[object Object]"!==o.call(t))return!1;var e=n.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!i)return!1;var r;for(r in t);return r===s||n.call(t,r)};e.exports=function a(){"use strict";var t,e,i,n,o,h,l=arguments[0],c=1,u=arguments.length,p=!1;for("boolean"==typeof l?(p=l,l=arguments[1]||{},c=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});u>c;++c)if(t=arguments[c],null!=t)for(e in t)i=l[e],n=t[e],l!==n&&(p&&n&&(r(n)||(o=Array.isArray(n)))?(o?(o=!1,h=i&&Array.isArray(i)?i:[]):h=i&&r(i)?i:{},l[e]=a(p,h,n)):n!==s&&(l[e]=n));return l}},{}]},{},[1])}).call(exports,function(){return this}())},function(t,e,i){function s(t,e){for(var i=0;i<t.length;i++){var s=t[i],n=d[s.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](s.parts[o]);for(;o<s.parts.length;o++)n.parts.push(l(s.parts[o],e))}else{for(var r=[],o=0;o<s.parts.length;o++)r.push(l(s.parts[o],e));d[s.id]={id:s.id,refs:1,parts:r}}}}function n(t){for(var e=[],i={},s=0;s<t.length;s++){var n=t[s],o=n[0],r=n[1],a=n[2],h=n[3],l={css:r,media:a,sourceMap:h};i[o]?i[o].parts.push(l):e.push(i[o]={id:o,parts:[l]})}return e}function o(t,e){var i=m(),s=w[w.length-1];if("top"===t.insertAt)s?s.nextSibling?i.insertBefore(e,s.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),w.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=w.indexOf(t);e>=0&&w.splice(e,1)}function a(t){var e=document.createElement("style");return e.type="text/css",o(t,e),e}function h(t){var e=document.createElement("link");return e.rel="stylesheet",o(t,e),e}function l(t,e){var i,s,n;if(e.singleton){var o=g++;i=v||(v=a(e)),s=c.bind(null,i,o,!1),n=c.bind(null,i,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=h(e),s=p.bind(null,i),n=function(){r(i),i.href&&URL.revokeObjectURL(i.href)}):(i=a(e),s=u.bind(null,i),n=function(){r(i)});return s(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s(t=e)}else n()}}function c(t,e,i,s){var n=i?"":s.css;if(t.styleSheet)t.styleSheet.cssText=_(e,n);else{var o=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function u(t,e){var i=e.css,s=e.media;e.sourceMap;if(s&&t.setAttribute("media",s),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function p(t,e){var i=e.css,s=(e.media,e.sourceMap);s&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var n=new Blob([i],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(n),o&&URL.revokeObjectURL(o)}var d={},f=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},y=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,g=0,w=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=y()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var i=n(t);return s(i,e),function(t){for(var o=[],r=0;r<i.length;r++){var a=i[r],h=d[a.id];h.refs--,o.push(h)}if(t){var l=n(t);s(l,e)}for(var r=0;r<o.length;r++){var h=o[r];if(0===h.refs){for(var c=0;c<h.parts.length;c++)h.parts[c]();delete d[h.id]}}}};var _=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e,i){var s=i(7);"string"==typeof s&&(s=[[t.id,s,""]]);i(10)(s,{});s.locals&&(t.exports=s.locals)},function(t,e,i){var s,s;(function(t){!function e(t,i,n){function o(a,h){if(!i[a]){if(!t[a]){var l="function"==typeof s&&s;if(!h&&l)return s(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[a]={exports:{}};t[a][0].call(u.exports,function(e){var i=t[a][1][e];return o(i?i:e)},u,u.exports,e,t,i,n)}return i[a].exports}for(var r="function"==typeof s&&s,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){function s(){c=!1,a.length?l=a.concat(l):u=-1,l.length&&n()}function n(){if(!c){var t=setTimeout(s);c=!0;for(var e=l.length;e;){for(a=l,l=[];++u<e;)a&&a[u].run();u=-1,e=l.length}a=null,c=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function r(){}var a,h=e.exports={},l=[],c=!1,u=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new o(t,e)),1!==l.length||c||setTimeout(n,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=r,h.addListener=r,h.once=r,h.off=r,h.removeListener=r,h.removeAllListeners=r,h.emit=r,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],2:[function(t,e,i){"use strict";function s(t){var e="jazz_"+a++ +Date.now(),i=void 0,s=void 0,n=void 0;if(o.getDevice().nodejs===!0)s=new jazzMidi.MIDI;else{var l=document.createElement("object");l.id=e+"ie",l.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",n=l;var c=document.createElement("object");c.id=e,c.type="audio/x-jazz",l.appendChild(c),s=c;var u=document.createElement("p");u.appendChild(document.createTextNode("This page requires the "));var p=document.createElement("a");p.appendChild(document.createTextNode("Jazz plugin")),p.href="http://jazz-soft.net/",u.appendChild(p),u.appendChild(document.createTextNode(".")),c.appendChild(u);var d=document.getElementById("MIDIPlugin");d||(d=document.createElement("div"),d.id="MIDIPlugin",d.style.position="absolute",d.style.visibility="hidden",d.style.left="-9999px",d.style.top="-9999px",document.body.appendChild(d)),d.appendChild(l)}setTimeout(function(){s.isJazz===!0?i=s:n.isJazz===!0&&(i=n),void 0!==i&&(i._perfTimeZero=performance.now(),
h.set(e,i)),t(i)},r)}function n(t,e){var i=null,n="input"===t?"inputInUse":"outputInUse",o=!0,r=!1,a=void 0;try{for(var l,c=h.values()[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u[n]!==!0){i=u;break}}}catch(p){r=!0,a=p}finally{try{!o&&c["return"]&&c["return"]()}finally{if(r)throw a}}null===i?s(e):e(i)}Object.defineProperty(i,"__esModule",{value:!0}),i.createJazzInstance=s,i.getJazzInstance=n;var o=t("./util"),r=100,a=0,h=new Map},{"./util":9}],3:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(){return new Promise(function(t,e){return void 0!==w?void t(w):"ie9"===g.getDevice().browser?void e({message:"WebMIDIAPIShim supports Internet Explorer 10 and above."}):void f.createJazzInstance(function(i){return void 0===i?void e({message:"No access to MIDI devices: browser does not support the WebMIDI API and the Jazz plugin is not installed."}):(_=i,void o(function(){l(),w=new P(b,x),t(w)}))})})}function o(t){var e=_.MidiInList(),i=_.MidiOutList(),s=e.length,n=i.length;r(0,s,"input",e,function(){r(0,n,"output",i,t)})}function r(t,e,i,s,n){if(e>t){var o=s[t++];a(i,o,function(){r(t,e,i,s,n)})}else n()}function a(t,e,i){f.getJazzInstance(t,function(s){var n=void 0,o=[e,"",""];"input"===t?(s.Support("MidiInInfo")&&(o=s.MidiInInfo(e)),n=new y.MIDIInput(o,s),b.set(n.id,n)):"output"===t&&(s.Support("MidiOutInfo")&&(o=s.MidiOutInfo(e)),n=new m.MIDIOutput(o,s),x.set(n.id,n)),i(n)})}function h(t,e){var i=void 0,s=!0,n=!1,o=void 0;try{for(var r,a=t.values()[Symbol.iterator]();!(s=(r=a.next()).done)&&(i=r.value,i.name!==e);s=!0);}catch(h){n=!0,o=h}finally{try{!s&&a["return"]&&a["return"]()}finally{if(n)throw o}}return i}function l(){_.OnDisconnectMidiIn(function(t){var e=h(b,t);void 0!==e&&(e.state="disconnected",e.close(),e._jazzInstance.inputInUse=!1,b["delete"](e.id),c(e))}),_.OnDisconnectMidiOut(function(t){var e=h(x,t);void 0!==e&&(e.state="disconnected",e.close(),e._jazzInstance.outputInUse=!1,x["delete"](e.id),c(e))}),_.OnConnectMidiIn(function(t){a("input",t,function(t){c(t)})}),_.OnConnectMidiOut(function(t){a("output",t,function(t){c(t)})})}function c(t){t.dispatchEvent(new v.MIDIConnectionEvent(t,t));var e=new v.MIDIConnectionEvent(w,t);"function"==typeof w.onstatechange&&w.onstatechange(e);var i=!0,s=!1,n=void 0;try{for(var o,r=k[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var a=o.value;a(e)}}catch(h){s=!0,n=h}finally{try{!i&&r["return"]&&r["return"]()}finally{if(s)throw n}}}function u(){b.forEach(function(t){t._jazzInstance.MidiInClose()})}function p(t,e){var i=void 0;return"input"===e?(i=S.get(t),void 0===i&&(i=g.generateUUID(),S.set(t,i))):"output"===e&&(i=T.get(t),void 0===i&&(i=g.generateUUID(),T.set(t,i))),i}Object.defineProperty(i,"__esModule",{value:!0});var d=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();i.createMIDIAccess=n,i.dispatchEvent=c,i.closeAllMIDIInputs=u,i.getMIDIDeviceId=p;var f=t("./jazz_instance"),y=t("./midi_input"),m=t("./midi_output"),v=t("./midiconnection_event"),g=t("./util"),w=void 0,_=void 0,b=new Map,x=new Map,S=new Map,T=new Map,k=new Set,P=function(){function t(e,i){s(this,t),this.sysexEnabled=!0,this.inputs=e,this.outputs=i}return d(t,[{key:"addEventListener",value:function(t,e,i){"statechange"===t&&k.has(e)===!1&&k.add(e)}},{key:"removeEventListener",value:function(t,e,i){"statechange"===t&&k.has(e)===!0&&k["delete"](e)}}]),t}()},{"./jazz_instance":2,"./midi_input":4,"./midi_output":5,"./midiconnection_event":6,"./util":9}],4:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=t("./util"),r=t("./midimessage_event"),a=(t("./midiconnection_event"),t("./midi_access")),h=void 0,l=o.getDevice().nodejs,c=function(){function t(e,i){s(this,t),this.id=a.getMIDIDeviceId(e[0],"input"),this.name=e[0],this.manufacturer=e[1],this.version=e[2],this.type="input",this.state="connected",this.connection="pending",this.onstatechange=null,this._onmidimessage=null,Object.defineProperty(this,"onmidimessage",{set:function(t){this._onmidimessage=t,"function"==typeof t&&this.open()}}),this._listeners=(new Map).set("midimessage",new Set).set("statechange",new Set),this._inLongSysexMessage=!1,this._sysexBuffer=new Uint8Array,this._jazzInstance=i,this._jazzInstance.inputInUse=!0,"linux"===o.getDevice().platform&&this._jazzInstance.MidiInOpen(this.name,h.bind(this))}return n(t,[{key:"addEventListener",value:function(t,e,i){var s=this._listeners.get(t);void 0!==s&&s.has(e)===!1&&s.add(e)}},{key:"removeEventListener",value:function(t,e,i){var s=this._listeners.get(t);void 0!==s&&s.has(e)===!1&&s["delete"](e)}},{key:"dispatchEvent",value:function(t){var e=this._listeners.get(t.type);e.forEach(function(e){e(t)}),"midimessage"===t.type?null!==this._onmidimessage&&this._onmidimessage(t):"statechange"===t.type&&null!==this.onstatechange&&this.onstatechange(t)}},{key:"open",value:function(){"open"!==this.connection&&("linux"!==o.getDevice().platform&&this._jazzInstance.MidiInOpen(this.name,h.bind(this)),this.connection="open",a.dispatchEvent(this))}},{key:"close",value:function(){"closed"!==this.connection&&("linux"!==o.getDevice().platform&&this._jazzInstance.MidiInClose(),this.connection="closed",a.dispatchEvent(this),this._onmidimessage=null,this.onstatechange=null,this._listeners.get("midimessage").clear(),this._listeners.get("statechange").clear())}},{key:"_appendToSysexBuffer",value:function(t){var e=this._sysexBuffer.length,i=new Uint8Array(e+t.length);i.set(this._sysexBuffer),i.set(t,e),this._sysexBuffer=i}},{key:"_bufferLongSysex",value:function(t,e){for(var i=e;i<t.length;){if(247==t[i])return i++,this._appendToSysexBuffer(t.slice(e,i)),i;i++}return this._appendToSysexBuffer(t.slice(e,i)),this._inLongSysexMessage=!0,i}}]),t}();i.MIDIInput=c,h=function(t,e){var i=0,s=void 0,n=!1;for(s=0;s<e.length;s+=i){var o=!0;if(this._inLongSysexMessage){if(s=this._bufferLongSysex(e,s),247!=e[s-1])return;n=!0}else switch(n=!1,240&e[s]){case 0:i=1,o=!1;break;case 128:case 144:case 160:case 176:case 224:i=3;break;case 192:case 208:i=2;break;case 240:switch(e[s]){case 240:if(s=this._bufferLongSysex(e,s),247!=e[s-1])return;n=!0;break;case 241:case 243:i=2;break;case 242:i=3;break;default:i=1}}if(o){var a={};if(a.receivedTime=parseFloat(t.toString())+this._jazzInstance._perfTimeZero,n||this._inLongSysexMessage?(a.data=new Uint8Array(this._sysexBuffer),this._sysexBuffer=new Uint8Array(0),this._inLongSysexMessage=!1):a.data=new Uint8Array(e.slice(s,i+s)),l)this._onmidimessage&&this._onmidimessage(a);else{var h=new r.MIDIMessageEvent(this,a.data,a.receivedTime);this.dispatchEvent(h)}}}}},{"./midi_access":3,"./midiconnection_event":6,"./midimessage_event":7,"./util":9}],5:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=t("./util"),r=t("./midi_access"),a=function(){function t(e,i){s(this,t),this.id=r.getMIDIDeviceId(e[0],"output"),this.name=e[0],this.manufacturer=e[1],this.version=e[2],this.type="output",this.state="connected",this.connection="pending",this.onmidimessage=null,this.onstatechange=null,this._listeners=new Set,this._inLongSysexMessage=!1,this._sysexBuffer=new Uint8Array,this._jazzInstance=i,this._jazzInstance.outputInUse=!0,"linux"===o.getDevice().platform&&this._jazzInstance.MidiOutOpen(this.name)}return n(t,[{key:"open",value:function(){"open"!==this.connection&&("linux"!==o.getDevice().platform&&this._jazzInstance.MidiOutOpen(this.name),this.connection="open",r.dispatchEvent(this))}},{key:"close",value:function(){"closed"!==this.connection&&("linux"!==o.getDevice().platform&&this._jazzInstance.MidiOutClose(),this.connection="closed",r.dispatchEvent(this),this.onstatechange=null,this._listeners.clear())}},{key:"send",value:function(t,e){var i=this,s=0;return 0===t.length?!1:(e&&(s=Math.floor(e-performance.now())),e&&s>1?setTimeout(function(){i._jazzInstance.MidiOutLong(t)},s):this._jazzInstance.MidiOutLong(t),!0)}},{key:"clear",value:function(){}},{key:"addEventListener",value:function(t,e,i){"statechange"===t&&this._listeners.has(e)===!1&&this._listeners.add(e)}},{key:"removeEventListener",value:function(t,e,i){"statechange"===t&&this._listeners.has(e)===!1&&this._listeners["delete"](e)}},{key:"dispatchEvent",value:function(t){this._listeners.forEach(function(e){e(t)}),null!==this.onstatechange&&this.onstatechange(t)}}]),t}();i.MIDIOutput=a},{"./midi_access":3,"./util":9}],6:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function o(t,e){s(this,o),this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=t,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.port=e,this.returnValue=!0,this.srcElement=t,this.target=t,this.timeStamp=Date.now(),this.type="statechange"};i.MIDIConnectionEvent=n},{}],7:[function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function o(t,e,i){s(this,o),this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=t,this.data=e,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.receivedTime=i,this.returnValue=!0,this.srcElement=t,this.target=t,this.timeStamp=Date.now(),this.type="midimessage"};i.MIDIMessageEvent=n},{}],8:[function(t,e,i){"use strict";var s=t("./midi_access"),n=t("./util"),o=void 0;!function(){navigator.requestMIDIAccess||(n.polyfill(),navigator.requestMIDIAccess=function(){return void 0===o&&(o=s.createMIDIAccess()),o},n.getDevice().nodejs===!0&&(navigator.close=function(){s.closeAllMIDIInputs()}))}()},{"./midi_access":3,"./util":9}],9:[function(e,i,s){(function(t,e){"use strict";function i(){if(void 0!==h)return h;var e="undetected",i="undetected";if(navigator.nodejs)return e=t.platform,h={platform:e,nodejs:!0,mobile:"ios"===e||"android"===e};var s=navigator.userAgent;return s.match(/(iPad|iPhone|iPod)/g)?e="ios":-1!==s.indexOf("Android")?e="android":-1!==s.indexOf("Linux")?e="linux":-1!==s.indexOf("Macintosh")?e="osx":-1!==s.indexOf("Windows")&&(e="windows"),-1!==s.indexOf("Chrome")?(i="chrome",-1!==s.indexOf("OPR")?i="opera":-1!==s.indexOf("Chromium")&&(i="chromium")):-1!==s.indexOf("Safari")?i="safari":-1!==s.indexOf("Firefox")?i="firefox":-1!==s.indexOf("Trident")&&(i="ie",-1!==s.indexOf("MSIE 9")&&(i="ie9")),"ios"===e&&-1!==s.indexOf("CriOS")&&(i="chrome"),h={platform:e,browser:i,mobile:"ios"===e||"android"===e,nodejs:!1}}function n(){void 0===performance&&(performance={}),Date.now=Date.now||function(){return(new Date).getTime()},void 0===performance.now&&!function(){var t=Date.now();void 0!==performance.timing&&void 0!==performance.timing.navigationStart&&(t=performance.timing.navigationStart),performance.now=function(){return Date.now()-t}}()}function o(){var t=(new Date).getTime(),e=new Array(64).join("x");return e=e.replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16).toUpperCase()})}function r(t){"function"!=typeof t.Promise&&(t.Promise=function(t){this.executor=t},t.Promise.prototype.then=function(t,e){"function"!=typeof t&&(t=function(){}),"function"!=typeof e&&(e=function(){}),this.executor(t,e)})}function a(){var t=i();"ie"===t.browser?r(window):t.nodejs===!0&&r(e),n()}Object.defineProperty(s,"__esModule",{value:!0}),s.getDevice=i,s.polyfillPerformance=n,s.generateUUID=o,s.polyfillPromise=r,s.polyfill=a;var h=void 0}).call(this,e("_process"),"undefined"!=typeof t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}]},{},[8])}).call(e,function(){return this}())}]);